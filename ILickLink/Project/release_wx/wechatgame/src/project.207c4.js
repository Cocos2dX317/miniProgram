window.__require=function e(t,n,o){function i(a,s){if(!n[a]){if(!t[a]){var c=a.split("/");if(c=c[c.length-1],!t[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}}var h=n[a]={exports:{}};t[a][0].call(h.exports,function(e){return i(t[a][1][e]||e)},h,h.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<o.length;a++)i(o[a]);return i}({AudioManager:[function(e,t,n){"use strict";cc._RF.push(t,"1fd20BHmC5DgpFQ625qm01Y","AudioManager"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("./LoadManager");(function(e){e.MUSIC_LoginBG="login_bg",e.MUSIC_FightBG="fight_bg",e.EFF_Touch="touch",e.EFF_OpenWindow="open_window",e.EFF_CloseWindow="close_window"})(o=n.AudioType||(n.AudioType={}));var r=cc._decorator,a=r.ccclass,s=(r.property,function(){function e(){this.current=-1,this._music_on=!1,this._sound_on=!1;var e=cc.sys.localStorage.getItem("music_on");null!=e?this.music_on="true"==e:(cc.sys.localStorage.setItem("music_on",!0),this.music_on=!0),null!=(e=cc.sys.localStorage.getItem("sound_on"))?this.sound_on="true"==e:(cc.sys.localStorage.setItem("sound_on",!0),this.sound_on=!0),cc.audioEngine.setMusicVolume(.5),cc.audioEngine.setEffectsVolume(2)}var t;return t=e,Object.defineProperty(e,"Instance",{get:function(){return null==this.instance&&(this.instance=new t),this.instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"music_on",{get:function(){return this._music_on},set:function(e){this._music_on=e,cc.sys.localStorage.setItem("music_on",e),e?cc.director.getScene()&&("FightScene"==cc.director.getScene().name?this.playBg(o.MUSIC_FightBG):this.playBg(o.MUSIC_LoginBG)):this.stopBg()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sound_on",{get:function(){return this._sound_on},set:function(e){this._sound_on=e,cc.sys.localStorage.setItem("sound_on",e)},enumerable:!0,configurable:!0}),e.prototype.playEff=function(e){this._sound_on&&(this.current=cc.audioEngine.play(i.LoadManager.Instance.audios[e],!1,1))},e.prototype.stopEff=function(){cc.audioEngine.stop(this.current)},e.prototype.playBg=function(e){this._music_on&&cc.audioEngine.playMusic(i.LoadManager.Instance.audios[e],!0)},e.prototype.stopBg=function(){cc.audioEngine.stopMusic()},e.prototype.pause=function(){cc.audioEngine.pauseAll()},e.prototype.resume=function(){cc.audioEngine.resumeAll()},e=t=__decorate([a],e)}());n.AudioManager=s,cc._RF.pop()},{"./LoadManager":"LoadManager"}],BackGround:[function(e,t,n){"use strict";cc._RF.push(t,"dfcf172yxBPNa7ofu+4Tf4R","BackGround"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=o.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon_item=null,t.speed=cc.v2(0,0),t.maxSize=20,t.col=4,t.one_width=200,t.one_height=200,t.icons=[],t.iconPool=new cc.NodePool,t}return __extends(t,e),t.prototype.onLoad=function(){this.initIconPool(),this.playSlowFlow()},t.prototype.initIconPool=function(){for(var e=0;e<this.maxSize;e++){var t=cc.instantiate(this.icon_item);this.iconPool.put(t)}},t.prototype.playSlowFlow=function(){for(var e=0;e<this.icons.length;e++)this.iconPool.put(this.icons[e]),this.icons.splice(e,1),e--;for(e=0;e<this.maxSize;e++){var t=-cc.winSize.width/2+e%this.col*this.one_width,n=-cc.winSize.height/2+Math.floor(e/this.col)*this.one_height;this.createIcon(cc.v2(t,n))}},t.prototype.createIcon=function(e){if(this.iconPool.size()>0){var t=this.iconPool.get();this.node.addChild(t),t.setPosition(e),t.active=!0,this.icons.push(t)}},t.prototype.update=function(e){for(var t=0;t<this.icons.length;t++){var n=this.icons[t];n.x-=e*this.speed.x,n.y-=e*this.speed.y,n.x<-cc.winSize.width/2-this.one_width/2&&(n.x=-cc.winSize.width/2+(this.col-.5)*this.one_width),n.y<-cc.winSize.height/2-this.one_height/2&&(n.y=-cc.winSize.height/2+(Math.floor(this.maxSize/this.col)-.5)*this.one_height)}},__decorate([r(cc.Node)],t.prototype,"icon_item",void 0),__decorate([r],t.prototype,"speed",void 0),__decorate([r],t.prototype,"maxSize",void 0),__decorate([r],t.prototype,"col",void 0),__decorate([r()],t.prototype,"one_width",void 0),__decorate([r()],t.prototype,"one_height",void 0),t=__decorate([i],t)}(cc.Component);n.default=a,cc._RF.pop()},{}],BagManager:[function(e,t,n){"use strict";cc._RF.push(t,"cc6e5cTNW9OJLZvfm1QOqgs","BagManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Define/BagType"),i=e("./UIManager"),r=e("./LoadManager"),a=e("../Define/Util"),s=e("./UserManager"),c=e("../Tool/Logger"),u=function(){function e(){this.bag=new o.MyBag,this.equipConfig={},this.itemConfig={},this.initEquipConfig(),this.initItemConfig()}return Object.defineProperty(e,"Instance",{get:function(){return null==this.instance&&(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.initEquipConfig=function(){var e=r.LoadManager.Instance.configs.equip;if(e)for(var t=0;t<e.length;t++){var n=e[t];this.equipConfig[n.Id]=n}else c.Logger.error("\u8bfb\u53d6\u88c5\u5907\u914d\u7f6e\u5931\u8d25")},e.prototype.initItemConfig=function(){var e=r.LoadManager.Instance.configs.item;if(e)for(var t=0;t<e.length;t++){var n=e[t];this.itemConfig[n.Id]=n}else c.Logger.error("\u8bfb\u53d6\u88c5\u5907\u914d\u7f6e\u5931\u8d25")},e.prototype.getBagInfo=function(){return this.bag},e.prototype.getDiamonds=function(){return this.bag.myItems[101001]?(c.Logger.info(this.bag.myItems[101001]),this.bag.myItems[101001].Count):0},e.prototype.getGold=function(){return this.bag.myItems[102001]?this.bag.myItems[102001].Count:0},e.prototype.updateItemCount=function(e,t){this.bag.myItems[e]&&(this.bag.myItems[e].Count=t,s.UserManager.Instance.updateAssets())},e.prototype.updateItemAdd=function(e,t){this.bag.myItems[e]&&(this.bag.myItems[e].Count+=t,s.UserManager.Instance.updateAssets())},e.prototype.updateShareAward=function(e){s.UserManager.Instance.updateAssets(),i.UIManager.Instance.showToast("\u606d\u559c\u83b7\u5f97\u94bb\u77f3x"+e.awardCount)},e.prototype.updateMyBag=function(e){this.dealItemList(e.itemlist),this.dealEquipmentList(e.equiplist),this.dealWearList(e.wearEquiplist);var t=i.UIManager.Instance.findComponent("PropShop");t&&t.updateUI()},e.prototype.updateWear=function(e){this.dealWearList(e.wearEquiplist);var t=i.UIManager.Instance.findComponent("PropShop");t&&t.updateUI()},e.prototype.updateUpGrade=function(e){this.dealItemList(e.itemlist),this.dealEquipmentList(e.equiplist);var t=i.UIManager.Instance.findComponent("PropShop");t&&t.updateUI()},e.prototype.findEquipById=function(e){return this.equipConfig[e]},e.prototype.findItemById=function(e){return this.itemConfig[e]},e.prototype.dealEquipmentList=function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];this.bag.myKeepEquipment[o.EquipmentTypeName[parseInt(t)-1]].setList(n)}},e.prototype.dealItemList=function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=this.findItemById(parseInt(t));if(n){var i=e[t],r=new o.PropItem(n.Typeid,parseInt(t),n.Itemname);a.Util.safeCopy(r,n),r.Count=i,this.bag.myItems[t]=r}}c.Logger.info(this.bag.myItems),s.UserManager.Instance.updateAssets()},e.prototype.dealWearList=function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];this.bag.myKeepEquipment[o.EquipmentTypeName[parseInt(t)-1]].selectById(n)}},e}();n.BagManager=u,cc._RF.pop()},{"../Define/BagType":"BagType","../Define/Util":"Util","../Tool/Logger":"Logger","./LoadManager":"LoadManager","./UIManager":"UIManager","./UserManager":"UserManager"}],BagPacket:[function(e,t,n){"use strict";cc._RF.push(t,"a0c9043nUZHp54r//gPRIOY","BagPacket"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./MsgPacket"),i=function(e){function t(){var t=e.call(this)||this;return t.pt="GetItemList",t}return __extends(t,e),t}(o.CS_Packet);n.CS_GetItemList=i;var r=function(e){function t(){var t=e.call(this)||this;return t.itemlist={},t.equiplist={},t.wearEquiplist={},t.pt="GetItemList",t}return __extends(t,e),t}(o.SC_Packet);n.SC_GetItemList=r;var a=function(e){function t(){var t=e.call(this)||this;return t.equipType=0,t.equipId=0,t.pt="WearEquip",t}return __extends(t,e),t}(o.CS_Packet);n.CS_WearEquip=a;var s=function(e){function t(){var t=e.call(this)||this;return t.wearEquiplist={},t.pt="WearEquip",t}return __extends(t,e),t}(o.SC_Packet);n.SC_WearEquip=s;var c=function(e){function t(){var t=e.call(this)||this;return t.equipType=0,t.equipId=0,t.pt="UpGradeEquip",t}return __extends(t,e),t}(o.CS_Packet);n.CS_UpGradeEquip=c;var u=function(e){function t(){var t=e.call(this)||this;return t.itemlist={},t.equiplist={},t.pt="UpGradeEquip",t}return __extends(t,e),t}(o.SC_Packet);n.SC_UpGradeEquip=u;var h=function(e){function t(){var t=e.call(this)||this;return t.Id=0,t.shopType=0,t.chargeId=0,t.pt="ShopBuyInfo",t}return __extends(t,e),t}(o.CS_Packet);n.CS_ShopBuyInfo=h;var p=function(e){function t(){var t=e.call(this)||this;return t.Id=0,t.shopType=0,t.chargeId=0,t.buySuccess=0,t.pt="ShopBuyInfo",t}return __extends(t,e),t}(o.SC_Packet);n.SC_ShopBuyInfo=p;var l=function(e){function t(){var t=e.call(this)||this;return t.itemId=0,t.pt="OpenBox",t}return __extends(t,e),t}(o.CS_Packet);n.CS_OpenBox=l;var g=function(e){function t(){var t=e.call(this)||this;return t.randomItemInBox=0,t.pt="OpenBox",t}return __extends(t,e),t}(o.SC_Packet);n.SC_OpenBox=g,cc._RF.pop()},{"./MsgPacket":"MsgPacket"}],BagType:[function(e,t,n){"use strict";cc._RF.push(t,"9be70Zr6wpJc4oFSj6yvvhJ","BagType"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("./Util"),r=e("../manager/BagManager"),a=e("../Tool/Logger");n.EquipmentTypeName=["weapon","mask","hat","armband","clothes","action"],function(e){e[e.None=-1]="None",e[e.Diamond=1]="Diamond",e[e.SoulStone=2]="SoulStone",e[e.Rune=3]="Rune",e[e.Chest=4]="Chest",e[e.Equip=5]="Equip"}(o=n.PropType||(n.PropType={}));var s,c=function(){return function(e,t,n){this.Id=0,this.Itemname="",this.Desc="",this.Typeid=o.None,this.Bagtype=0,this.Icon="",this.Count=0,this.Price=0,this.Typeid=e,this.Itemname=n,this.Id=t}}();n.PropItem=c,function(e){e[e.None=-1]="None",e[e.Weapon=1]="Weapon",e[e.Mask=2]="Mask",e[e.Hat=3]="Hat",e[e.Armband=4]="Armband",e[e.Clothes=5]="Clothes",e[e.Action=6]="Action"}(s=n.EquipmentType||(n.EquipmentType={}));var u=function(){return function(e,t,n){this.Id=0,this.Name="",this.Desc="",this.Itemtype=s.None,this.Stage=0,this.Modelid="",this.Upgradeitem=0,this.Uptype=0,this.Range=0,this.Rangeweight=0,this.Soul=0,this.Soulweight=0,this.Itemadd=0,this.Shock=0,this.Shockweight=0,this.SlowTime=0,this.STweight=0,this.Defense=0,this.Defenseweight=0,this.Recovery=0,this.Recoveryweight=0,this.Luck=0,this.Luckweight=0,this.lv=1,this.canBuy=!1,this.canEquip=!1,this.Itemtype=e,this.Name=n,this.Id=t}}();n.EquipmentItem=u;var h=function(){function e(e){this.type=s.None,this.list={},this.mapList={},this.selectID=-1,this.showID=0,this.showIndex=0,this.maxStage=1,this.type=e}return e.prototype.setList=function(e){if(e){this.list={},this.mapList={};var t=0;for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];if("canBuy"!=n){var s=r.BagManager.Instance.findEquipById(parseInt(n));if(s){var c=new u(this.type,parseInt(n),s.Name);i.Util.safeCopy(c,s),c.Itemadd=o.itemAdd,c.lv=o.lv,c.Range=o.range,c.Shock=o.shock,c.SlowTime=o.slowTime,c.Stage=o.stage,c.Soul=o.soul,c.canEquip=!0;var h=this.getIndex(c);this.list[h]||(this.list[h]=new Array),this.list[h].push(c),this.mapList[c.Id]=c,t||(t=c.Id)}}else for(var p=0;p<o.length;p++){var l=o[p],g=r.BagManager.Instance.findEquipById(l);if(g){var f=new u(this.type,l,g.Name);i.Util.safeCopy(f,g),f.canBuy=!0;var d=this.getIndex(f);this.list[d]||(this.list[d]=new Array),this.list[d].push(f),this.mapList[f.Id]=f,t||(t=f.Id)}}}a.Logger.info(this.list),this.showID<=0&&(this.showID=t),this.selectID<=0&&(this.selectID=t)}},e.prototype.selectByShow=function(){this.selectID=this.showID},e.prototype.selectById=function(e){this.selectID=e,this.showID=e},e.prototype.getSelect=function(){return this.mapList[this.selectID]},e.prototype.showNext=function(e){if(e<1&&e>4)a.Logger.warn("\u9519\u8bef\u7684\u7b49\u9636\uff01");else{var t=Object.getOwnPropertyNames(this.list).length;this.showIndex++,this.showIndex>=t&&(this.showIndex=0);var n=this.findIndex(this.showIndex);if(n&&n.length>0){var o=this.findIndexStage(e,n);o&&(this.showID=o.Id)}}},e.prototype.showStage=function(e){if(e<1&&e>4)a.Logger.warn("\u9519\u8bef\u7684\u7b49\u9636\uff01");else{var t=this.findIndex(this.showIndex);if(t&&t.length>0){var n=this.findIndexStage(e,t);n&&(this.showID=n.Id)}}},e.prototype.showBack=function(e){if(e<1&&e>4)a.Logger.warn("\u9519\u8bef\u7684\u7b49\u9636\uff01");else{var t=Object.getOwnPropertyNames(this.list).length;this.showIndex--,this.showIndex<0&&(this.showIndex=t-1);var n=this.findIndex(this.showIndex);if(n&&n.length>0){var o=this.findIndexStage(e,n);o&&(this.showID=o.Id)}}},e.prototype.getShow=function(){return this.mapList[this.showID]},e.prototype.getMaxStage=function(){var e=this.findIndex(this.showIndex);if(e){this.maxStage=1;for(var t=0;t<e.length;t++)e[t].Stage>=this.maxStage&&(this.maxStage=e[t].Stage)}return this.maxStage},e.prototype.findIndex=function(e){var t=null,n=0;for(var o in this.list)this.list.hasOwnProperty(o)&&(e==n&&(t=this.list[o]),n++);return t},e.prototype.findIndexStage=function(e,t){for(var n=null,o=0;o<t.length;o++)if(e==t[o].Stage){n=t[o];break}return n},e.prototype.getIndex=function(e){var t=e.Id.toString();return parseInt(t[2])},e.prototype.guessId=function(e,t){return 1e5+1e4*this.type+1e3*(e+1)+(t+1)},e}();n.Equipment=h;var p=function(){return function(){this.weapon=new h(s.Weapon),this.hat=new h(s.Hat),this.armband=new h(s.Armband),this.clothes=new h(s.Clothes),this.mask=new h(s.Mask),this.action=new h(s.Action)}}();n.KeepEquipment=p;var l=function(){return function(){this.myItems={},this.myKeepEquipment=new p}}();n.MyBag=l,cc._RF.pop()},{"../Tool/Logger":"Logger","../manager/BagManager":"BagManager","./Util":"Util"}],BaseUI:[function(e,t,n){"use strict";cc._RF.push(t,"409c2MTB41BtawuCcpeAFWJ","BaseUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/UIManager"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.withFlowBg=!1,t}return __extends(t,e),t.prototype.onShow=function(){},t.prototype.onHide=function(){},t.prototype.addFlowBg=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.withFlowBg?[4,o.UIManager.Instance.createPrefab("BackGround")]:[2];case 1:return e=t.sent(),this.node.addChild(e.node,-1),[2]}})})},__decorate([a({tooltip:"\u6dfb\u52a0\u6d6e\u52a8\u80cc\u666f"})],t.prototype,"withFlowBg",void 0),t=__decorate([r],t)}(cc.Component);n.BaseUI=s,cc._RF.pop()},{"../manager/UIManager":"UIManager"}],BuffCsv:[function(e,t,n){"use strict";cc._RF.push(t,"cbecahmyl1G9YiE+SHsubea","BuffCsv"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tool/CsvBase"),i=function(){function e(){this.line=new Array}return e.prototype.SetValues=function(e){var t=0;this._Id=Number(e[t++]),this.line.push(this._Id),this._Name=e[t++],this.line.push(this._Name),this._Type=Number(e[t++]),this.line.push(this._Type),this._Effect=e[t++],this.line.push(this._Effect),this._MaxNumber=Number(e[t++]),this.line.push(this._MaxNumber),this._A=Number(e[t++]),this.line.push(this._A),this._B=Number(e[t++]),this.line.push(this._B)},e.prototype.ColNum=function(){return 7},Object.defineProperty(e.prototype,"Id",{get:function(){return this._Id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Name",{get:function(){return this._Name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Type",{get:function(){return this._Type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Effect",{get:function(){return this._Effect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MaxNumber",{get:function(){return this._MaxNumber},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"A",{get:function(){return this._A},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"B",{get:function(){return this._B},enumerable:!0,configurable:!0}),e.prototype.OnInit=function(){},e}();n.BuffCsv=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=o.CsvFactory.Instance(t)),t._instance},enumerable:!0,configurable:!0}),t.prototype.ConfigName=function(){return"Csv/Buff"},t.prototype.UseNote=function(){return!0},t.prototype.GetKeyCsv=function(e){return e.Id},t.prototype.create=function(){return new i},t}(o.CsvBaseManager);n.BuffCsvManage=r,cc._RF.pop()},{"../Tool/CsvBase":"CsvBase"}],Clisson:[function(e,t,n){"use strict";cc._RF.push(t,"f0cd9Tc17BPg47E8ocnlEe9","Clisson"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=o.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clissoner=null,t.fighter=null,t.help=null,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.onCollisionEnter=function(e,t){if(this.fighter||(this.fighter=this.clissoner.getComponent("Fighter"),!this.help&&this.fighter.help&&(this.help=this.fighter.help)),!this.fighter.die&&this.help){var n=e.node.getComponent("Clisson");if(n.fighter||(n.fighter=n.clissoner.getComponent("Fighter"),!n.help&&n.fighter.help&&(n.help=n.fighter.help)),!n.fighter.die)if(n.help)if(!(this.fighter.flipX&&n.fighter.node.x>this.fighter.node.x))if(this.fighter.flipX||!(n.fighter.node.x<this.fighter.node.x))if(this.help.addClissonTarget(n))if("player"==e.node.group)n.help.playHurt();else if("monster"==e.node.group){n.help.playHurt()}}},__decorate([r(cc.Node)],t.prototype,"clissoner",void 0),t=__decorate([i],t)}(cc.Component);n.Clisson=a,cc._RF.pop()},{}],CommonParam:[function(e,t,n){"use strict";cc._RF.push(t,"c7a2fkYyVlFOYbVgOEharcI","CommonParam"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(e,t,n){this.success=null,this.fail=null,this.complete=null,this.success=e,this.fail=t,this.complete=n}}();n.CommonHandel=o;var i=function(){return function(e,t){this.process=null,this.complete=null,this.process=e,this.complete=t}}();n.LoadHandel=i;var r=function(){return function(e,t,n){this.type="idle",this.name=[],this.priority=0,this.name=e,this.priority=t,this.type=n}}();n.FighterAnim=r;var a=function(){function e(){this.idle=new r([],0,"idle"),this.walk=new r([],1,"walk"),this.run=new r([],2,"run"),this.atk=new r([],4,"atk"),this.block=new r([],14,"block"),this.hurt=new r([],20,"hurt"),this.death=new r([],21,"death")}return e.prototype.reset=function(){this.idle.name.splice(0,this.idle.name.length),this.walk.name.splice(0,this.idle.name.length),this.run.name.splice(0,this.idle.name.length),this.atk.name.splice(0,this.idle.name.length),this.block.name.splice(0,this.idle.name.length),this.hurt.name.splice(0,this.idle.name.length),this.death.name.splice(0,this.idle.name.length)},e}();n.FighterAnims=a,cc._RF.pop()},{}],CsvBase:[function(e,t,n){"use strict";cc._RF.push(t,"dc386QpRINDG5cvQW6Cz0Jo","CsvBase"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tool/Load"),i=e("../Tool/Help"),r=e("./Logger"),a=function(){function e(){}return e.Instance=function(t){var n=t.name,o=e.map[n];return o||(o=new t,e.map[n]=o),o},e.map={},e}();n.CsvFactory=a;var s=function(){function e(){this.mListCsv=new Array,this.mDictionaryCsv={},this.onLoad()}return e.prototype.onLoad=function(){this.DoLoad(this.ConfigName())},e.prototype.DoLoad=function(e){var t=this;this.rRes=o.LoadAsync.getRes(e);var n=this.rRes.get();n?this.UpdateValues(n.text):this.rRes.onUpdata.SetCall(function(e){t.UpdateValues(e.text)},this)},e.prototype.UpdateValues=function(e){var t=e.split("\r\n"),n=this.UseNote?3:2;this.mListCsv=[],this.mDictionaryCsv={};for(var o=n,a=t.length;o<a;o++){var s=this.create(),c=t[o];if(!i.StringHelp.IsEmpty(c)){var u=c.split(",");if(u.length>0&&""==u[0])r.Logger.error(i.StringHelp.Format("\u914d\u7f6e[{0}]\u6570\u636eLine[{1}]\u4e3a\u7a7a\u5b57\u7b26",this.ConfigName(),o));else if(u.length<s.ColNum())r.Logger.error(i.StringHelp.Format("\u914d\u7f6e[{0}]\u6570\u636e\u7f3a\u5c11Line[{1}]---\x3e{2}/{3}",this.ConfigName(),o,u.length,s.ColNum()));else{s.SetValues(u),s.OnInit();var h=this.GetKeyCsv(s);this.mDictionaryCsv[h]?r.Logger.error(i.StringHelp.Format("\u914d\u7f6e[{0}]\u91cd\u590dLine[{1}]Key[{2}]",this.ConfigName(),o,h)):(this.mListCsv.push(s),this.mDictionaryCsv[h]=s)}}}},e.prototype.GetItem=function(e){var t=this.mDictionaryCsv[e];return t||(r.Logger.error(i.StringHelp.Format("[{0}]\u9519\u8bef\u7684key={1}",this.ConfigName(),e)),t=this.mListCsv[0]),t},e.prototype.GetAll=function(){return this.mListCsv},e}();n.CsvBaseManager=s,cc._RF.pop()},{"../Tool/Help":"Help","../Tool/Load":"Load","./Logger":"Logger"}],EffectCsv:[function(e,t,n){"use strict";cc._RF.push(t,"97364YnWZtAy5/zerwuf+XP","EffectCsv"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tool/CsvBase"),i=function(){function e(){this.line=new Array}return e.prototype.SetValues=function(e){var t=0;this._Id=Number(e[t++]),this.line.push(this._Id),this._Name=e[t++],this.line.push(this._Name),this._Type=Number(e[t++]),this.line.push(this._Type),this._RoleID=Number(e[t++]),this.line.push(this._RoleID),this._LoopNum=Number(e[t++]),this.line.push(this._LoopNum),this._Layer=Number(e[t++]),this.line.push(this._Layer),this._BlendMode=Number(e[t++]),this.line.push(this._BlendMode)},e.prototype.ColNum=function(){return 7},Object.defineProperty(e.prototype,"Id",{get:function(){return this._Id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Name",{get:function(){return this._Name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Type",{get:function(){return this._Type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RoleID",{get:function(){return this._RoleID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"LoopNum",{get:function(){return this._LoopNum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Layer",{get:function(){return this._Layer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"BlendMode",{get:function(){return this._BlendMode},enumerable:!0,configurable:!0}),e.prototype.OnInit=function(){},e}();n.EffectCsv=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=o.CsvFactory.Instance(t)),t._instance},enumerable:!0,configurable:!0}),t.prototype.ConfigName=function(){return"Csv/Effect"},t.prototype.UseNote=function(){return!0},t.prototype.GetKeyCsv=function(e){return e.Id},t.prototype.create=function(){return new i},t}(o.CsvBaseManager);n.EffectCsvManage=r,cc._RF.pop()},{"../Tool/CsvBase":"CsvBase"}],ErrorLang:[function(e,t,n){"use strict";var o;cc._RF.push(t,"e0c85Wch8tBe4yOWf0ryCAJ","ErrorLang"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.COMMON_ERR=0]="COMMON_ERR",e[e.COMMON_SUCCESS=1]="COMMON_SUCCESS",e[e.COMMON_NOLOGIN=2]="COMMON_NOLOGIN",e[e.COMMON_LOGIN_ERR=3]="COMMON_LOGIN_ERR",e[e.COMMON_LOGIN_EXPIRED=4]="COMMON_LOGIN_EXPIRED",e[e.COMMON_LOGIN_RELOAD_DATA=5]="COMMON_LOGIN_RELOAD_DATA",e[e.COMMON_FUNC_CLOSE=101]="COMMON_FUNC_CLOSE",e[e.COMMON_SAVE_ERR=102]="COMMON_SAVE_ERR",e[e.COMMON_LOAD_ERR=103]="COMMON_LOAD_ERR",e[e.COMMON_JSON_ERR=104]="COMMON_JSON_ERR",e[e.COMMON_CAPTCHA_ERR=105]="COMMON_CAPTCHA_ERR",e[e.COMMON_WXLOGIN_ERR=106]="COMMON_WXLOGIN_ERR"}(o=n.ErrorType||(n.ErrorType={})),n.ErrorLang={},n.ErrorLang[o.COMMON_ERR]="\u672a\u77e5\u9519\u8bef",n.ErrorLang[o.COMMON_SUCCESS]="\u64cd\u4f5c\u6210\u529f",n.ErrorLang[o.COMMON_NOLOGIN]="\u767b\u5f55\u5931\u6548\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55",n.ErrorLang[o.COMMON_LOGIN_ERR]="\u767b\u5f55\u9519\u8bef",n.ErrorLang[o.COMMON_LOGIN_EXPIRED]="\u767b\u5f55\u8fc7\u671f",n.ErrorLang[o.COMMON_LOGIN_RELOAD_DATA]="\u5931\u53bb\u8fde\u63a5\uff0c\u91cd\u767b",n.ErrorLang[o.COMMON_FUNC_CLOSE]="\u529f\u80fd\u5173\u95ed",n.ErrorLang[o.COMMON_SAVE_ERR]="\u4fdd\u5b58\u5931\u8d25",n.ErrorLang[o.COMMON_LOAD_ERR]="\u52a0\u8f7d\u5931\u8d25",n.ErrorLang[o.COMMON_JSON_ERR]="\u65e0\u6548JSON\u6570\u636e",n.ErrorLang[o.COMMON_CAPTCHA_ERR]="\u65e0\u6548\u9a8c\u8bc1\u7801",n.ErrorLang[o.COMMON_WXLOGIN_ERR]="\u5fae\u4fe1\u767b\u5f55\u5931\u8d25",cc._RF.pop()},{}],FightLayer:[function(e,t,n){"use strict";cc._RF.push(t,"cf58aUfRLZBUJwz0qtml1lP","FightLayer"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./FighterFactor"),i=e("./FightManager"),r=e("../manager/AudioManager"),a=e("./TeXiaoFactor"),s=e("../manager/UIManager"),c=["PreLoadRes/texture/fight/background1","PreLoadRes/texture/fight/background2","PreLoadRes/texture/fight/background3","PreLoadRes/texture/fight/background4","PreLoadRes/texture/fight/background5"],u=cc._decorator,h=u.ccclass,p=u.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.camera=null,t.timer=0,t.timer2=.5,t.map=null,t._bgFrame=null,t.player=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"bgFrame",{get:function(){return this._bgFrame},set:function(e){this._bgFrame=e,this.map.getChildByName("bg1").getComponent(cc.Sprite).spriteFrame=e,this.map.getChildByName("bg2").getComponent(cc.Sprite).spriteFrame=e},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){r.AudioManager.Instance.stopBg(),r.AudioManager.Instance.playBg(r.AudioType.MUSIC_FightBG),a.TeXiaoFactor.Instance.init()},t.prototype.start=function(){this.startGame(),this.refreshTop();var e=Math.floor(Math.random()*c.length);this.bgFrame=new cc.SpriteFrame(c[e])},t.prototype.menu=function(e,t){"pause"==t&&s.UIManager.Instance.openWindow("Setting")},t.prototype.startGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return e=this,t=this,[4,o.FighterFactor.Instance.createPlayer()];case 1:return t.player=n.sent(),e.playerEnter(this.player),o.FighterFactor.Instance.initMonstersPool(),e.monsterEnter(),e.readyGame(),[2]}})})},t.prototype.playerEnter=function(e){this.player=e,this.map.addChild(e.node),this.addControl()},t.prototype.monsterEnter=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return o.FighterFactor.Instance.setLeftBrushConfig(),o.FighterFactor.Instance.brushLeftMonsters(this.map),[2]})})},t.prototype.readyGame=function(){cc.director.getCollisionManager().enabled=!0},t.prototype.playNextAction=function(e){this.player&&this.player.help.playAtk(e)},t.prototype.addControl=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.a:this.playNextAction(!0);break;case cc.macro.KEY.d:this.playNextAction(!1)}},t.prototype.removeControl=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},t.prototype.onTouchStart=function(e){this.player&&this.player.die||(e.touch.getStartLocation().x>cc.winSize.width/2?this.playNextAction(!1):this.playNextAction(!0))},t.prototype.onTouchMove=function(e){},t.prototype.onTouchEnd=function(e){},t.prototype.update=function(e){if(this.player&&!this.player.die){var t=this.player.node.getPosition().sub(cc.v2(this.player.config.bornPos.x,this.player.config.bornPos.y)).sub(this.camera.getPosition());cc.v2(t.x,t.y).mag()>.1&&(this.camera.x+=t.x*e,this.camera.y+=t.y*e),Math.floor(this.player.node.x/1600)%2==0?(this.map.getChildByName("bg1").x=1600*Math.floor(this.player.node.x/1600),this.map.getChildByName("bg2").x=1600*Math.floor(this.player.node.x/1600)+1600):(this.map.getChildByName("bg1").x=1600*Math.floor(this.player.node.x/1600)+1600,this.map.getChildByName("bg2").x=1600*Math.floor(this.player.node.x/1600)),o.FighterFactor.Instance.dealNearMonster(),Object.getOwnPropertyNames(o.FighterFactor.Instance.monsters).length>=8||o.FighterFactor.Instance.isInBoss||(this.timer-o.FighterFactor.Instance.refreshTime>=0&&(o.FighterFactor.Instance.brushLeftMonsters(this.map),this.timer=0),this.timer2-o.FighterFactor.Instance.refreshTime>=0&&(o.FighterFactor.Instance.brushRightMonsters(this.map),this.timer2=0),this.timer+=e,this.timer2+=e)}},t.prototype.refreshTop=function(){this.node.getChildByName("top").getChildByName("lb3").getComponent(cc.Label).string=i.FightManager.Instance.fightLogic.killedGold.toString(),this.node.getChildByName("top").getChildByName("lb4").getComponent(cc.Label).string=i.FightManager.Instance.fightLogic.killedScore.toString(),this.node.getChildByName("top").getChildByName("lb5").getComponent(cc.Label).string=(i.FightManager.Instance.fightLogic.gateConfig.nowGateIndex+1).toString()},__decorate([p(cc.Node)],t.prototype,"camera",void 0),__decorate([p(cc.Node)],t.prototype,"map",void 0),t=__decorate([h],t)}(cc.Component);n.FightLayer=l,cc._RF.pop()},{"../manager/AudioManager":"AudioManager","../manager/UIManager":"UIManager","./FightManager":"FightManager","./FighterFactor":"FighterFactor","./TeXiaoFactor":"TeXiaoFactor"}],FightLogic:[function(e,t,n){"use strict";cc._RF.push(t,"192f1SsKM5Bk4xYp+lGCzh0","FightLogic"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/LoadManager"),i=e("../Fight/FightManager"),r=e("../manager/BagManager"),a=e("../Define/Util"),s=function(){return function(e){this.Id=0,this.Rank=0,this.Score=0,this.Relegation=0,this.Scoreadd=0,this.Target=0,this.Targetadd=0,this.Elite=0,this.Eliteadd=0,this.Combat=0,this.Speed=1,this.Bag="",this.Time=0,this.Boss=0,a.Util.safeCopy(this,e)}}();n.GateConfigItem=s;var c=function(){function e(){this.gates=[],this.nowGateIndex=0;var e=o.LoadManager.Instance.configs.gateConfig;if(e&&e.length)for(var t=0,n=e;t<n.length;t++){var i=n[t],r=new s(i);this.gates.push(r)}}return e.prototype.getNowGate=function(){return this.gates[this.nowGateIndex]},e}();n.GateConfig=c;var u=["quan","wuqi01","wuqi02","wuqi03","wuqi04"],h=function(){function e(){this.gateConfig=new c,this.killedCount=0,this.killedScore=0,this.killedGold=0,this.weaponType="",this.atkScale=100,this.weaponScale=50,this.init()}return e.prototype.init=function(){this.gateConfig.nowGateIndex=0,this.initWeapon()},e.prototype.initWeapon=function(){var e=[100,120,140,160,180],t=[50,80,100,80,150];if(!r.BagManager.Instance.getBagInfo().myKeepEquipment.weapon.getSelect())return this.weaponType="quan",this.atkScale=e[0],void(this.weaponScale=t[0]);var n=r.BagManager.Instance.getBagInfo().myKeepEquipment.weapon.getSelect().Modelid.split("|");this.weaponType=n[0];var o=u.indexOf(this.weaponType);o>=0&&(this.atkScale=e[o]+r.BagManager.Instance.getBagInfo().myKeepEquipment.weapon.getSelect().Range,this.weaponScale=t[o])},e.prototype.addScore=function(e){this.killedCount++;var t=this.gateConfig.getNowGate().Target;return 2e3==e||(2001==e||2002==e?t+=this.gateConfig.getNowGate().Elite:this.killedScore+=0),this.killedScore+=t,r.BagManager.Instance.getBagInfo().myKeepEquipment.weapon.getSelect()&&(this.killedGold+=r.BagManager.Instance.getBagInfo().myKeepEquipment.weapon.getSelect().Soul),r.BagManager.Instance.getBagInfo().myKeepEquipment.mask.getSelect()&&(this.killedGold+=r.BagManager.Instance.getBagInfo().myKeepEquipment.mask.getSelect().Soul),r.BagManager.Instance.getBagInfo().myKeepEquipment.hat.getSelect()&&(this.killedGold+=r.BagManager.Instance.getBagInfo().myKeepEquipment.hat.getSelect().Soul),r.BagManager.Instance.getBagInfo().myKeepEquipment.clothes.getSelect()&&(this.killedGold+=r.BagManager.Instance.getBagInfo().myKeepEquipment.clothes.getSelect().Soul),r.BagManager.Instance.getBagInfo().myKeepEquipment.armband.getSelect()&&(this.killedGold+=r.BagManager.Instance.getBagInfo().myKeepEquipment.armband.getSelect().Soul),this.checkUpGate()},e.prototype.checkUpGate=function(){var e=0;return this.killedScore<this.gateConfig.getNowGate().Relegation?e=0:this.killedScore<this.gateConfig.getNowGate().Score?e=1:(e=2,this.gateConfig.nowGateIndex++,this.killedScore=0),i.FightManager.Instance.fightLayer.refreshTop(),e},e.prototype.checkUpGateEnd=function(){this.killedScore<this.gateConfig.getNowGate().Relegation?(0,this.gateConfig.nowGateIndex--,this.gateConfig.nowGateIndex<0?this.gateConfig.nowGateIndex=0:this.killedScore+=this.gateConfig.getNowGate().Score):this.killedScore<this.gateConfig.getNowGate().Score||(2,this.gateConfig.nowGateIndex++),i.FightManager.Instance.fightLayer.refreshTop()},e.prototype.getNowRank=function(){return this.gateConfig.getNowGate()},e}();n.FightLogic=h,cc._RF.pop()},{"../Define/Util":"Util","../Fight/FightManager":"FightManager","../manager/BagManager":"BagManager","../manager/LoadManager":"LoadManager"}],FightManager:[function(e,t,n){"use strict";cc._RF.push(t,"c8ccaFNkoFN3LkREmd0jk3Q","FightManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./FighterFactor"),i=e("./FightLogic"),r=e("../manager/UIManager"),a=e("../protocols/GameProto"),s=e("../Net/MsgPacket"),c=e("./TeXiaoFactor"),u=function(){function e(){this.fightLayer=null,this.fightLogic=null,this.clear()}return Object.defineProperty(e,"Instance",{get:function(){return null==this.instance&&(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.fightLayer&&r.UIManager.Instance.closeAllWindow(),this.fightLayer=null,o.FighterFactor.Instance.clear(),c.TeXiaoFactor.Instance.TexiaoPool.clear(),this.fightLogic=null},e.prototype.enterGame=function(e,t){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return this.clear(),t=this,[4,r.UIManager.Instance.loadScene("FightScene",function(){})];case 1:return n.sent(),1==e&&t.createFightScene(),[2]}})})},e.prototype.restartGame=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this.clear(),1==e&&this.createFightScene(),[2]})})},e.prototype.exitGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.clear(),[4,r.UIManager.Instance.loadScene("MainScene",function(){})];case 1:return e.sent(),[4,r.UIManager.Instance.openWindow("MainUI")];case 2:return e.sent(),[2]}})})},e.prototype.endGame=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.fightLayer,(e=new s.CS_SynPlayerData).score=this.fightLogic.killedScore,e.stage=this.fightLogic.gateConfig.nowGateIndex+1,e.gold=this.fightLogic.killedGold,a.GameProto.Instance.requestSynPlayerData(e),[4,r.UIManager.Instance.openWindow("GameEnd")];case 1:return t.sent(),[2]}})})},e.prototype.createFightScene=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.fightLogic=new i.FightLogic,this,[4,r.UIManager.Instance.openWindow("FightLayer")];case 1:return e.sent(),this.fightLayer=r.UIManager.Instance.findComponent("FightLayer"),[2]}})})},e.prototype.createBatterScene=function(){},e.prototype.createHangUpScene=function(){},e}();n.FightManager=u,cc._RF.pop()},{"../Net/MsgPacket":"MsgPacket","../manager/UIManager":"UIManager","../protocols/GameProto":"GameProto","./FightLogic":"FightLogic","./FighterFactor":"FighterFactor","./TeXiaoFactor":"TeXiaoFactor"}],FighterFactor:[function(e,t,n){"use strict";cc._RF.push(t,"b5273i4fOhAkI+RfnhZj3lg","FighterFactor"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/UIManager"),i=e("./Fighter"),r=e("./FightManager"),a=e("../manager/LoadManager"),s=e("../Tool/Logger"),c=3,u=-1,h=-1,p=function(){function e(){this.monsterConfig={},this.monsterBag={},this.fighterModel=null,this.monstersPool=new cc.NodePool,this.monsters={},this.monster_count=0,this.isInBoss=!1,this.refreshTime=c,this.pauseRefresh=!1,this.bagTimerL=0,this.bagTimerR=0,this.brushLeftMonsterList=[],this.brushRightMonsterList=[],this.initMonsterConfig(),this.initMonsterBagConfig(),this.init()}return Object.defineProperty(e,"Instance",{get:function(){return null==this.instance&&(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){this.clear()},e.prototype.clear=function(){this.monster_count=0,this.monsters={},this.player=null,this.isInBoss=!1,this.refreshTime=c,this.pauseRefresh=!1,this.brushLeftMonsterList.splice(0,this.brushLeftMonsterList.length),this.brushRightMonsterList.splice(0,this.brushRightMonsterList.length),this.monstersPool.clear()},e.prototype.initMonsterConfig=function(){var e=a.LoadManager.Instance.configs.monster;if(e)for(var t=0;t<e.length;t++){var n=e[t];this.monsterConfig[n.Id]=n}else s.Logger.error("\u8bfb\u53d6\u7269\u914d\u7f6e\u4fe1\u606f\u5931\u8d25")},e.prototype.initMonsterBagConfig=function(){var e=a.LoadManager.Instance.configs.monsterbag;if(e)for(var t=0;t<e.length;t++){var n=e[t];this.monsterBag[n.Id]=n}else s.Logger.error("\u8bfb\u53d6\u602a\u7269\u5305\u4fe1\u606f\u5931\u8d25")},e.prototype.setLeftBrushConfig=function(){if(r.FightManager.Instance.fightLogic){this.brushLeftMonsterList.splice(0,this.brushLeftMonsterList.length);var e=r.FightManager.Instance.fightLogic.getNowRank().Bag.split("|"),t=e[Math.floor(Math.random()*e.length)];if(this.monsterBag[t]){this.refreshTime=parseInt(this.monsterBag[t].Distance)/(100*r.FightManager.Instance.fightLogic.getNowRank().Speed);for(var n=this.monsterBag[t].MonsterId.split("|"),o=0;o<n.length;o++){var i={Id:parseInt(n[o]),isLeft:!0,timeLine:o};this.brushLeftMonsterList.push(i)}}else s.Logger.info("\u65e0\u6548\u7684\u602a\u7269\u5305")}},e.prototype.setRightBrushConfig=function(){if(r.FightManager.Instance.fightLogic){this.brushRightMonsterList.splice(0,this.brushRightMonsterList.length);var e=r.FightManager.Instance.fightLogic.getNowRank().Bag.split("|"),t=e[Math.floor(Math.random()*e.length)];if(this.monsterBag[t]){this.refreshTime=parseInt(this.monsterBag[t].Distance)/(100*r.FightManager.Instance.fightLogic.getNowRank().Speed);for(var n=this.monsterBag[t].MonsterId.split("|"),o=0;o<n.length;o++){var i={Id:parseInt(n[o]),isLeft:!1,timeLine:o};this.brushRightMonsterList.push(i)}}else s.Logger.info("\u65e0\u6548\u7684\u602a\u7269\u5305")}},e.prototype.createPlayer=function(){return __awaiter(this,void 0,Promise,function(){var e,t,n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.createFighter(i.PlayerHelp)];case 1:return e=o.sent(),t=this.monsterConfig[1e3],(n=new i.FighterItem(t,1e3)).group="player",e.setConfigData(n),this.player=e,[2,new Promise(function(t,n){t(e)})]}})})},e.prototype.initMonstersPool=function(){for(var e=0;e<10;e++){var t=cc.instantiate(this.fighterModel);this.monstersPool.put(t)}},e.prototype.createMonster=function(e){if(this.monstersPool.size()>0){var t=this.monstersPool.get().getComponent("Fighter");return e.group="monster",t.setConfigData(e),t}if(!this.fighterModel)return null;var n=cc.instantiate(this.fighterModel).getComponent("Fighter");return e.group="monster",n.setConfigData(e),n},e.prototype.brushLeftMonsters=function(e){if(this.brushLeftMonsterList.length<=0){if(this.pauseRefresh)return;return this.bagTimerL++,void(this.bagTimerL>=4&&(this.bagTimerL=0,this.setLeftBrushConfig()))}var t=this.brushLeftMonsterList.shift();t.Id>0&&this.brush(t.Id,t.isLeft,e)},e.prototype.brushRightMonsters=function(e){if(this.brushRightMonsterList.length<=0){if(this.pauseRefresh)return;return this.bagTimerR++,void(this.bagTimerR>=4&&(this.bagTimerR=0,this.setRightBrushConfig()))}var t=this.brushRightMonsterList.shift();t.Id>0&&this.brush(t.Id,t.isLeft,e)},e.prototype.brushBossMonsters=function(e,t){this.brush(e,Math.random()>.5,t)},e.prototype.brush=function(t,n,o){var r=this.monsterConfig[t];if(r){var a=2e4+this.monster_count;this.monster_count++;var c=new i.FighterItem(r,a);if(c.group="monster",!c.hasError){c.bornPos.x=this.getBrushX(n,a),c.bornPos.y=-200;var u=e.Instance.createMonster(c);u&&(this.monsters[c.bush_id]=u,o.addChild(u.node),u._isOnLoadCalled&&u.reset(),this.checkIsBoss(c.Id)&&(u.isBoss=!0))}}else s.Logger.error("\u65e0\u6548\u7684\u602a\u7269id")},e.prototype.createFighter=function(e){return __awaiter(this,void 0,Promise,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return e=this,this.fighterModel?[3,2]:[4,o.UIManager.Instance.loadPrefab("Fight/Fighter").then(function(e){return e}).catch(function(e){s.Logger.info(e)})];case 1:t=n.sent(),this.fighterModel=t,n.label=2;case 2:return[2,new Promise(function(t,n){t(cc.instantiate(e.fighterModel).getComponent("Fighter"))})]}})})},e.prototype.removeMonster=function(t){var n=e.Instance.monsters[t].config.Id;this.monstersPool.size()<10&&this.monstersPool.put(e.Instance.monsters[t].node),delete e.Instance.monsters[t],Object.getOwnPropertyNames(this.monsters).length<=0&&(s.Logger.info("\u6b7b\u5b8c\u4e86"),this.pauseRefresh=!1);var o=r.FightManager.Instance.fightLogic.addScore(n);r.FightManager.Instance.fightLogic.gateConfig.nowGateIndex;2==o&&(s.Logger.info("\u5347\u7ea7"),this.pauseRefresh=!0)},e.prototype.dealNearMonster=function(){for(var e in this.monsters)if(this.monsters.hasOwnProperty(e)){var t=this.monsters[e];t.help&&(t.die||Math.abs(t.node.x-this.player.node.x)<=t.config.Nearatk+r.FightManager.Instance.fightLogic.atkScale&&(t.nearTip.getComponent("nearTip").isNear||(t.nearTip.getComponent("nearTip").isNear=!0)))}},e.prototype.checkIsBoss=function(e){return e>=4e3},e.prototype.findNear=function(e){return e?this.findNearLeft():this.findNearRight()},e.prototype.findNearLeft=function(){var e=null,t=9999;for(var n in this.monsters)if(this.monsters.hasOwnProperty(n)){var o=this.monsters[n];if(o.nearTip.getComponent("nearTip").isNear&&!o.flipX){var i=Math.abs(o.node.x-this.player.node.x);i<t&&(e=o,t=i)}}return e},e.prototype.findNearRight=function(){var e=null,t=9999;for(var n in this.monsters)if(this.monsters.hasOwnProperty(n)){var o=this.monsters[n];if(o.nearTip.getComponent("nearTip").isNear&&o.flipX){var i=Math.abs(o.node.x-this.player.node.x);i<t&&(e=o,t=i)}}return e},e.prototype.getBrushX=function(e,t){var n=e?this.player.node.x-900:this.player.node.x+900;return e&&u>0&&(n=u,Math.abs(this.player.node.x-n)<900&&(n=this.player.node.x-900)),!e&&h>0&&(n=h,Math.abs(this.player.node.x-n)<900&&(n=this.player.node.x+900)),e?u=n:h=n,n},e}();n.FighterFactor=p,cc._RF.pop()},{"../Tool/Logger":"Logger","../manager/LoadManager":"LoadManager","../manager/UIManager":"UIManager","./FightManager":"FightManager","./Fighter":"Fighter"}],Fighter:[function(e,t,n){"use strict";cc._RF.push(t,"b94f13U8D9FsZDYUA+kthPe","Fighter"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Define/Util"),i=e("../Define/CommonParam"),r=e("../manager/LoadManager"),a=function(){return function(e,t){this.bush_id=1e4,this.group="default",this.bornPos=new cc.Vec2(0,-200),this.hasError=!1,this.Id=1e3,this.Name="Monster",this.Desc="Monster",this.Modelid="",this.Type=0,this.Maxhp=0,this.Attack=0,this.Nearatk=50,this.Movespeed=100,this.Attacksound=0,this.Deadsound=0,this.Produce=0,this.Combat=0,this.bush_id=t,o.Util.safeCopy(this,e)}}();n.FighterItem=a;var s=cc._decorator,c=s.ccclass,u=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.help=null,t.body=null,t.nearTip=null,t.skeleton=null,t.animations=new i.FighterAnims,t.now_anim=null,t.clissonNode=null,t.config=null,t.isChangeConfig=!0,t.heart=3,t.isMove=!1,t.dir=new cc.Vec3(1,0,0),t.die=!1,t.flipX=!1,t.isBoss=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.skeleton=this.body.getComponent(sp.Skeleton),this.config&&(this.initConfig(),"player"==this.config.group?(this.help=new b,this.help.fighter=this):"monster"==this.config.group&&(this.help=new C,this.help.fighter=this,this.help.fitMove(),this.help.playWalk()))},t.prototype.reset=function(){this.nearTip.getComponent("nearTip").isNear=!1,this.animations.reset(),this.isMove=!1,this.dir=new cc.Vec3(1,0,0),this.flipX=!1,this.die=!1,this.isBoss=!1,this.config&&(this.initConfig(),"player"==this.config.group?this.help.fighter=this:"monster"==this.config.group&&(this.help.fighter=this,this.help.fitMove(),this.help.playWalk()))},t.prototype.setConfigData=function(e){this.config&&(this.config.Id==e.Id?this.isChangeConfig=!1:this.isChangeConfig=!0),this.config=e},t.prototype.initConfig=function(){this.isChangeConfig&&this.initSkeletonRes(this.config.Modelid);for(var e=this.skeleton._skeleton,t=0;t<e.data.animations.length;t++){var n=e.data.animations[t];"player"==this.config.group&&(n.name.indexOf(l.FightManager.Instance.fightLogic.weaponType+"_idle")>=0&&this.animations.idle.name.push(n.name),n.name.indexOf(l.FightManager.Instance.fightLogic.weaponType+"_atk")>=0&&this.animations.atk.name.push(n.name),n.name.indexOf("block")>=0&&this.animations.block.name.push(n.name),n.name.indexOf("hurt")>=0&&this.animations.hurt.name.push(n.name),n.name.indexOf("death")>=0&&this.animations.death.name.push(n.name)),"monster"==this.config.group&&(n.name.indexOf("gongji")>=0&&this.animations.atk.name.push(n.name),n.name.indexOf("parry")>=0&&this.animations.block.name.push(n.name),n.name.indexOf("si")>=0&&this.animations.death.name.push(n.name),n.name.indexOf("pao")>=0&&this.animations.walk.name.push(n.name))}"player"==this.config.group&&this.initSkin(),this.now_anim=this.animations.idle,this.animations.idle.name.length>0&&this.setAnimation(0,this.animations.idle.name[0],!0),this.node.setPosition(this.config.bornPos),this.node.group=this.config.group,this.clissonNode.group=this.config.group,this.body.group=this.config.group,this.heart=this.config.Maxhp,this.nearTip.getComponent("nearTip").initNum(this.heart,this.config.Type),"monster"!=this.config.group&&(this.nearTip.active=!1)},t.prototype.initSkeletonRes=function(e){var t=e.split("|"),n=r.LoadManager.Instance.skeletons[t[0]];n&&(this.skeleton.skeletonData=n,t.length>1&&(this.skeleton.defaultSkin=t[1]),t.length>2&&(this.skeleton.animation=t[2]))},t.prototype.setAnimation=function(e,t,n){return this.skeleton.findAnimation(t)?this.skeleton.setAnimation(e,t,n):null},t.prototype.setSkin=function(e){},t.prototype.initSkin=function(){this.skeleton.setSkin("b");var e="";if(g.BagManager.Instance.getBagInfo().myKeepEquipment.weapon.getSelect()){var t=g.BagManager.Instance.getBagInfo().myKeepEquipment.weapon.getSelect().Modelid.split("|");v.Logger.info("\u6b66\u5668:",t);var n=this.skeleton.findSlot("wuqi_a1");n.setAttachment(null);var o=this.skeleton.findSlot("a/wuqi01");if(o.setAttachment(null),t.length>1){var i=this.skeleton.getAttachment("wuqi_a1",t[1]);i&&n.setAttachment(i)}if(t.length>2){var r=this.skeleton.getAttachment("a/wuqi01",t[2]);r&&o.setAttachment(r)}}if(g.BagManager.Instance.getBagInfo().myKeepEquipment.hat.getSelect()){t=(e=g.BagManager.Instance.getBagInfo().myKeepEquipment.hat.getSelect().Modelid).split("|");v.Logger.info("\u5e3d\u5b50:",e)}g.BagManager.Instance.getBagInfo().myKeepEquipment.armband.getSelect()&&(e=g.BagManager.Instance.getBagInfo().myKeepEquipment.armband.getSelect().Modelid,v.Logger.info("\u81c2\u7ae0:",e)),g.BagManager.Instance.getBagInfo().myKeepEquipment.clothes.getSelect()&&(e=g.BagManager.Instance.getBagInfo().myKeepEquipment.clothes.getSelect().Modelid,v.Logger.info("\u8863\u670d:",e)),g.BagManager.Instance.getBagInfo().myKeepEquipment.mask.getSelect()&&(e=g.BagManager.Instance.getBagInfo().myKeepEquipment.mask.getSelect().Modelid,v.Logger.info("\u9762\u5177:",e)),g.BagManager.Instance.getBagInfo().myKeepEquipment.action.getSelect()&&(e=g.BagManager.Instance.getBagInfo().myKeepEquipment.action.getSelect().Modelid,v.Logger.info("\u52a8\u4f5c:",e))},t.prototype.setFlipX=function(e,t){this.flipX=e,t?this.node.runAction(cc.sequence(cc.flipX(e),t)):this.node.runAction(cc.flipX(e)),this.flipX?this.dir=new cc.Vec3(-1,0,0):this.dir=new cc.Vec3(1,0,0)},t.prototype.update=function(e){this.removeAllColisson();for(var t=this.skeleton._skeleton,n=0;n<t.slots.length;n++){var o=t.slots[n];if(n==t.slots.length-1)for(var i=n;i<this.clissonNode.getComponents(cc.BoxCollider).length;i++){this.clissonNode.getComponents(cc.BoxCollider)[i].destroy()}if(o.attachment){var r=o.attachment.width,a=o.attachment.height,s=o.attachment.rotation,c=o.bone;this.updateCollison(n,c.worldX,c.worldY,r,a,s)}}this.help&&this.help.update(),this.isMove&&(this.node.x+=this.config.Movespeed*e*this.dir.x*l.FightManager.Instance.fightLogic.getNowRank().Speed)},t.prototype.updateCollison=function(e,t,n,o,i,r){var a;e>=this.clissonNode.getComponents(cc.BoxCollider).length?((a=this.clissonNode.addComponent(cc.BoxCollider)).offset=cc.v2(t,n),a.tag=e,a.size=cc.size(o,i),a.enabled=!0):((a=this.clissonNode.getComponents(cc.BoxCollider)[e]).offset=cc.v2(t,n),a.tag=e,a.size=cc.size(o,i),a.enabled=!0)},t.prototype.removeAllColisson=function(){},__decorate([u(cc.Node)],t.prototype,"body",void 0),__decorate([u(cc.Node)],t.prototype,"nearTip",void 0),__decorate([u(cc.Node)],t.prototype,"clissonNode",void 0),t=__decorate([c],t)}(cc.Component);n.Fighter=h;var p=e("./FighterFactor"),l=e("./FightManager"),g=e("../manager/BagManager"),f=e("../manager/AudioManager"),d=e("./TeXiao"),m=e("./TeXiaoFactor"),y=e("./Skill"),_=e("../Tool/shader/ShaderManager"),v=e("../Tool/Logger"),I=function(){function e(){this.clissonMaps={}}return e.prototype.update=function(){},e.prototype.checkAnimation=function(e){return!this.fighter.die&&!(e.name.length<=0)},e.prototype.moveBy=function(e,t,n){if(this.fighter.node.stopActionByTag(199),e<=0)return this.fighter.node.x+=t,void(this.fighter.node.y+=n);var o=cc.jumpBy(e,cc.v2(t,0),0,n);o.setTag(199),this.fighter.node.runAction(o)},e}(),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.comboCount=0,t.isCombo=!1,t.atk_state=0,t.delayActionTag=1001,t}return __extends(t,e),t.prototype.listenComplete=function(e){var t=this;this.fighter.skeleton.setTrackCompleteListener(e,function(e,n){t.playComplete(e,n)})},t.prototype.listenSpineEvent=function(e){var t=this;this.fighter.skeleton.setTrackEventListener(e,function(e,n){"hurt"==n.data.name?t.atk_state=1:"pause"==n.data.name&&(t.atk_state=2,t.playComboEffect())})},t.prototype.playIdle=function(){if(this.checkAnimation(this.fighter.animations.idle)){this.fighter.now_anim=this.fighter.animations.idle;var e=this.fighter.now_anim.name[0];this.fighter.setAnimation(0,e,!0)}},t.prototype.playHurt=function(){if(!this.fighter.die&&(v.Logger.info("PlayerHelp:play hurt"),this.fighter.heart--,this.fighter.heart<=0&&this.playDie(),this.checkAnimation(this.fighter.animations.hurt)&&!(this.fighter.animations.hurt.name.length<=0))){this.fighter.now_anim=this.fighter.animations.hurt;var e=this.fighter.animations.hurt.name[0],t=this.fighter.setAnimation(0,e,!1);this.listenComplete(t)}},t.prototype.playDie=function(){if(this.fighter.die=!0,v.Logger.info("PlayerHelp:death"),!(this.fighter.animations.death.name.length<=0||this.fighter.animations.death.priority<=this.fighter.now_anim.priority)){v.Logger.info("PlayerHelp:play death"),this.fighter.now_anim=this.fighter.animations.death;var e=this.fighter.animations.death.name[0],t=this.fighter.setAnimation(0,e,!1);this.fighter.skeleton.setTrackCompleteListener(t,function(e,t){v.Logger.info("PlayerHelp:play death \u56de\u8c03\u4e86\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f\uff1f"),l.FightManager.Instance.endGame()})}},t.prototype.playWalk=function(){if(this.checkAnimation(this.fighter.animations.walk)&&!(this.fighter.animations.walk.priority<=this.fighter.now_anim.priority)){v.Logger.info("PlayerHelp:play walk"),this.fighter.isMove=!0,this.fighter.now_anim=this.fighter.animations.walk;var e=this.fighter.animations.walk.name[0];this.fighter.setAnimation(0,e,!0)}},t.prototype.playAtk=function(e){if(this.checkAnimation(this.fighter.animations.atk)){var t=this.comboCount%this.fighter.animations.atk.name.length,n=this.fighter.now_anim.name.indexOf(this.fighter.skeleton.animation);if(n=n>=0?n:0,!(this.isCombo&&this.fighter.animations.atk.priority+this.comboCount<=this.fighter.now_anim.priority+n)&&(this.isCombo||!(this.fighter.animations.atk.priority+t<=this.fighter.now_anim.priority+n))){this.clissonMaps={},v.Logger.info("###############PlayerHelp:play atk###############",t);var o=this;this.fighter.now_anim=this.fighter.animations.atk;var i=this.fighter.animations.atk.name[t],r=cc.callFunc(function(){(function(){__awaiter(this,void 0,void 0,function(){var e,t,n,r;return __generator(this,function(a){switch(a.label){case 0:return[4,m.TeXiaoFactor.Instance.create(o.fighter.node,m.AtkArrowTX[i],cc.v2(0,0))];case 1:return a.sent().play(),e=o.fighter.setAnimation(0,i,!1),o.atk_state=0,o.isCombo=!1,t=o.fighter.skeleton.skeletonData.skeletonJson.animations[i].events[0].time,(n=p.FighterFactor.Instance.findNear(o.fighter.flipX))?(r=n.node.x-o.fighter.node.x,r=o.fighter.flipX?r+l.FightManager.Instance.fightLogic.weaponScale:r-l.FightManager.Instance.fightLogic.weaponScale,o.fighter.flipX,o.moveBy(t/2,r,0)):o.fighter.flipX?o.moveBy(t,-20,0):o.moveBy(t,20,0),o.listenSpineEvent(e),o.listenComplete(e),[2]}})})})()},this);this.fighter.setFlipX(e,r)}}},t.prototype.playComboEffect=function(){this.isCombo||l.FightManager.Instance.fightLayer.camera.runAction(cc.Shake(.2,4,4))},t.prototype.playCameraEffect=function(){var e=l.FightManager.Instance.fightLayer.map.getChildByName("bg1").getComponent("ShaderComponent");e.shader=_.ShaderType.Blur;var t=cc.sequence(cc.CameraScaleTo(.05,1.02).easing(cc.easeIn),cc.CameraScaleTo(.05,1).easing(cc.easeOut),cc.callFunc(function(){e.shader=_.ShaderType.Default},this));l.FightManager.Instance.fightLayer.camera.runAction(t)},t.prototype.playComplete=function(e,t){this.atk_state=3,this.comboCount=0,this.isCombo=!1,this.clissonMaps={},this.playIdle()},t.prototype.addClissonTarget=function(e){return"atk"==this.fighter.now_anim.type&&(this.atk_state<=1&&(!(Object.getOwnPropertyNames(this.clissonMaps).length>=1)&&(!this.clissonMaps[e.fighter.config.bush_id]&&(this.clissonMaps[e.fighter.config.bush_id]=e,this.comboCount++,this.isCombo=!0,"quan"==l.FightManager.Instance.fightLogic.weaponType?f.AudioManager.Instance.playEff("player_hurt01"):f.AudioManager.Instance.playEff("player_hurt02"),!0))))},t.prototype.removeClissonTarget=function(e){this.clissonMaps[e.fighter.config.bush_id]&&delete this.clissonMaps[e.fighter.config.bush_id]},t.prototype.update=function(){},t}(I);n.PlayerHelp=b;var C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.comboCount=0,t.AtkCheck=!1,t.can_atk=!1,t}return __extends(t,e),t.prototype.reset=function(){this.comboCount=0,this.AtkCheck=!1,this.can_atk=!1},t.prototype.listenComplete=function(e){var t=this;this.fighter.skeleton.setTrackCompleteListener(e,function(e,n){t.playComplete(e,n)})},t.prototype.listenSpineEvent=function(e){var t=this;this.fighter.skeleton.setTrackEventListener(e,function(e,n){e.animation.name.indexOf("si")>=0&&"pause"==n.data.name&&(v.Logger.info("\u602a\u7269\u6b7b\u4ea1event pause"),t.fighter.node.stopActionByTag(199))})},t.prototype.playHurt=function(){if(!this.fighter.die){this.fighter.heart--,this.fighter.nearTip.getComponent("nearTip").reduce();var e=p.FighterFactor.Instance.player.help.comboCount%p.FighterFactor.Instance.player.animations.atk.name.length;switch(p.FighterFactor.Instance.player.animations.atk.name[e]){case"quan_atk1":case"quan_atk2":case"quan_atk3":m.TeXiaoFactor.Instance.create(this.fighter.node,d.TeXiaoType.TX_Quan_Sj,cc.v2(0,90)).then(function(e){e.play()});break;case"wuqi01_atk1":case"wuqi01_atk2":case"wuqi01_atk3":case"wuqi02_atk1":case"wuqi02_atk2":case"wuqi02_atk3":case"wuqi03_atk1":case"wuqi03_atk2":case"wuqi03_atk3":case"wuqi04_atk1":case"wuqi04_atk2":case"wuqi04_atk3":m.TeXiaoFactor.Instance.create(this.fighter.node,d.TeXiaoType.TX_Wuqi_Sj,cc.v2(0,90)).then(function(e){e.play()})}if(this.fighter.heart<=0)this.playDie();else{if(this.fighter.animations.block.name.length>0)return v.Logger.info("MonsterHelp:play block"),this.fighter.isMove=!1,2001==this.fighter.config.Id&&y.Skill.Instance.playSkill(this.fighter,y.SkillType.Skill_Knock),void(3001==this.fighter.config.Id&&y.Skill.Instance.playSkill(this.fighter,y.SkillType.Skill_CiKe));if(this.fighter.animations.hurt.name.length>0){this.fighter.isMove=!1,this.fighter.now_anim=this.fighter.animations.hurt;var t=this.fighter.animations.hurt.name[0];this.fighter.skeleton.timeScale=1;var n=this.fighter.setAnimation(0,t,!1);this.listenComplete(n)}else;}}},t.prototype.playDie=function(){if(this.fighter.die=!0,this.fighter.isMove=!1,this.fighter.skeleton.timeScale=1,this.fighter.nearTip.getComponent("nearTip").clear(),!(this.fighter.animations.death.name.length<=0||this.fighter.animations.death.priority<=this.fighter.now_anim.priority)){this.fighter.now_anim=this.fighter.animations.death;var e=Math.floor(Math.random()*this.fighter.animations.death.name.length),t=this.fighter.animations.death.name[e];this.fighter.skeleton.timeScale=1;var n=this.fighter.setAnimation(0,t,!1);this.fighter.flipX?this.moveBy(n.animation.duration,1==e?800:400,50):this.moveBy(n.animation.duration,-(1==e?800:400),50),this.listenSpineEvent(n);var o=this;this.fighter.skeleton.setTrackCompleteListener(n,function(e,t){o.dealDie()})}},t.prototype.dealDie=function(){this.reset(),p.FighterFactor.Instance.removeMonster(this.fighter.config.bush_id)},t.prototype.playWalk=function(){if(this.checkAnimation(this.fighter.animations.walk)){this.fighter.isMove=!0,this.fighter.now_anim=this.fighter.animations.walk;var e=this.fighter.animations.walk.name[0];this.fighter.skeleton.timeScale=this.fighter.config.Movespeed*l.FightManager.Instance.fightLogic.getNowRank().Speed/150;this.fighter.setAnimation(0,e,!0)}},t.prototype.playAtk=function(){if(this.checkAnimation(this.fighter.animations.atk)){var e=this.fighter.now_anim.name.indexOf(this.fighter.skeleton.animation);if(e=e>=0?e:0,!(this.fighter.animations.atk.priority+this.comboCount<=this.fighter.now_anim.priority+e)){this.comboCount>=this.fighter.animations.atk.name.length&&(this.comboCount=0),this.fighter.isMove=!1,this.fighter.now_anim=this.fighter.animations.atk;var t=Math.floor(Math.random()*this.fighter.animations.atk.name.length),n=this.fighter.animations.atk.name[t];this.fighter.skeleton.timeScale=1;var o=this.fighter.setAnimation(0,n,!1);this.listenComplete(o),this.AtkCheck=!0}}},t.prototype.playComplete=function(e,t){this.AtkCheck=!1,this.comboCount=0,this.clissonMaps={},this.playWalk()},t.prototype.addClissonTarget=function(e){return"atk"==this.fighter.now_anim.type&&(!!this.AtkCheck&&(!this.clissonMaps[e.fighter.config.bush_id]&&(this.clissonMaps[e.fighter.config.bush_id]=e,this.fighter.isBoss?f.AudioManager.Instance.playEff("boss_hurt"):f.AudioManager.Instance.playEff("monster_hurt"),!0)))},t.prototype.removeClissonTarget=function(e){this.clissonMaps[e.fighter.config.bush_id]&&delete this.clissonMaps[e.fighter.config.bush_id]},t.prototype.fitMove=function(){this.fighter.node.x<=p.FighterFactor.Instance.player.node.x?(this.fighter.dir=new cc.Vec3(1,0,0),this.fighter.setFlipX(!1,null)):(this.fighter.dir=new cc.Vec3(-1,0,0),this.fighter.setFlipX(!0,null))},t.prototype.update=function(){this.fighter.die||p.FighterFactor.Instance.player.die||(Math.abs(this.fighter.node.x-p.FighterFactor.Instance.player.node.x)<this.fighter.config.Nearatk?this.can_atk=!0:this.can_atk=!1,this.can_atk&&this.playAtk())},t}(I);n.MonsterHelp=C,cc._RF.pop()},{"../Define/CommonParam":"CommonParam","../Define/Util":"Util","../Tool/Logger":"Logger","../Tool/shader/ShaderManager":"ShaderManager","../manager/AudioManager":"AudioManager","../manager/BagManager":"BagManager","../manager/LoadManager":"LoadManager","./FightManager":"FightManager","./FighterFactor":"FighterFactor","./Skill":"Skill","./TeXiao":"TeXiao","./TeXiaoFactor":"TeXiaoFactor"}],FreeGet:[function(e,t,n){"use strict";cc._RF.push(t,"efc02eNLRNHNr8KN9MJbToV","FreeGet"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/AudioManager"),i=e("../manager/UIManager"),r=e("../Tool/wx/wxApi"),a=e("../Define/CommonParam"),s=e("../manager/UserManager"),c=e("../protocols/GameProto"),u=e("../Net/MsgPacket"),h=cc._decorator,p=h.ccclass,l=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shareBn=null,t.lookMvBn=null,t}return __extends(t,e),t.prototype.start=function(){this.refreshUI()},t.prototype.refreshUI=function(){this.shareBn.getChildByName("getNum").getComponent(cc.Label).string="x5",this.shareBn.getChildByName("label").getComponent(cc.Label).string="\u4eca\u65e5\u5269\u4f59"+cc.sys.localStorage.getItem("rewardShareCount")+"\u6b21",this.lookMvBn.getChildByName("getNum").getComponent(cc.Label).string="x5",this.lookMvBn.getChildByName("label").getComponent(cc.Label).string="\u4eca\u65e5\u5269\u4f59"+cc.sys.localStorage.getItem("rewardLookMvCount")+"\u6b21"},t.prototype.getReward=function(e){var t=new u.CS_GetShareAward;t.shareType=e,c.GameProto.Instance.requestGetShareAward(t)},t.prototype.menu=function(e,t){o.AudioManager.Instance.playEff(o.AudioType.EFF_Touch),"close"==t&&i.UIManager.Instance.closeWindow("FreeGet"),"share"==t&&this.share(),"lookMv"==t&&this.lookMv()},t.prototype.share=function(){var e=new a.CommonHandel;e.success=function(){},e.fail=function(){},e.complete=function(){},r.WXManager.Instance.share({title:"\u514d\u8d39\u7684\u94bb\u77f3",imageUrl:""+s.UserManager.Instance.getUserInfo().avatarUrl,query:"sharetype=1&sharekey="+s.UserManager.Instance.getUserInfo().openid},e);var t=cc.sys.localStorage.getItem("rewardShareCount");t&&t>0&&(this.getReward(1),t--,cc.sys.localStorage.setItem("rewardShareCount",t))},t.prototype.lookMv=function(){var e=this;r.WXManager.Instance.createRewardedVideoAd({onLoad:function(){},onClose:function(){var t=cc.sys.localStorage.getItem("rewardLookMvCount");t&&t>0&&(e.getReward(2),t--,cc.sys.localStorage.setItem("rewardLookMvCount",t))}})},__decorate([l(cc.Node)],t.prototype,"shareBn",void 0),__decorate([l(cc.Node)],t.prototype,"lookMvBn",void 0),t=__decorate([p],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../Define/CommonParam":"CommonParam","../Net/MsgPacket":"MsgPacket","../Tool/wx/wxApi":"wxApi","../manager/AudioManager":"AudioManager","../manager/UIManager":"UIManager","../manager/UserManager":"UserManager","../protocols/GameProto":"GameProto"}],FriendCare:[function(e,t,n){"use strict";cc._RF.push(t,"f2fedDAwxNMp6jER0f4C8oR","FriendCare"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/UIManager"),i=e("../Tool/Logger"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollView=null,t.item=null,t}return __extends(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){},this),this.updateScroll([{name:"\u73ed\u957f",imageUrl:"-",combat:10},{name:"\u98ce\u7eaa\u59d4\u5458",imageUrl:"",combat:10},{name:"\u5b66\u4e60\u59d4\u5458",imageUrl:"",combat:10},{name:"\u4e0d\u826f\u5c11\u5e74",imageUrl:"",combat:10},{name:"\u5b66\u9738",imageUrl:"",combat:10},{name:"\u5b66\u6e23",imageUrl:"",combat:10},{name:"\u4e66\u5446\u5b50",imageUrl:"",combat:10},{name:"\u540c\u5b66\u7532",imageUrl:"",combat:10}])},t.prototype.menu=function(e,t){"close"==t&&o.UIManager.Instance.closeWindow("FriendCare"),"item"==t&&i.Logger.info("\u70b9\u51fb\u5206\u4eab",e.target.myflag)},t.prototype.refreshUI=function(){},t.prototype.updateScroll=function(e){i.Logger.info("\u66f4\u65b0\u540c\u5b66\u5173\u6000\u5217\u8868:",e);var t=this.scrollView.getComponent(cc.ScrollView);if(t.content.removeAllChildren(),!(e.length<=0)){this.node.active=!0;var n=this.item.width+20,o=this.item.height;t.content.width=e.length*n;for(var r=0;r<e.length;r++){var a=e[r],s=cc.instantiate(this.item);s.active=!0,t.content.addChild(s),s.myflag=r,s.setPosition(cc.v2(r%4*n+n/2,-Math.floor(r/4)*o-o/2)),s.getChildByName("name").getComponent(cc.Label).string=a.name,s.getChildByName("iconMask").getChildByName("head").width=45,s.getChildByName("iconMask").getChildByName("head").height=45,s.getComponent(cc.Button).interactable=!0,a.imageUrl.length>0&&(this.loadHttpIcon(s.getChildByName("iconMask").getChildByName("head"),"",null),s.getChildByName("iconMask").getChildByName("head").width=72,s.getChildByName("iconMask").getChildByName("head").height=72,s.getComponent(cc.Button).interactable=!1),s.getChildByName("combat").getComponent(cc.Label).string="\u6218\u529b+"+a.combat}}},t.prototype.loadHttpIcon=function(e,t,n){t&&""!=t||(t="http://thirdwx.qlogo.cn/mmopen/vi_32/opmkDJhG2jpF8X8AfFQfTauRlpBc7VeFicJevZ9IiajEl5g4ia75opNSZOb0FvDV87BvpUN1rsyctibGnicP7uibsMtw/132"),cc.loader.load({url:t,type:"png"},function(t,o){var r=new cc.SpriteFrame(o);e.getComponent(cc.Sprite).spriteFrame=r,n&&n(),i.Logger.info("Should load a texture from RESTful API by specify the type: "+(o instanceof cc.Texture2D))})},__decorate([s(cc.Node)],t.prototype,"scrollView",void 0),__decorate([s(cc.Node)],t.prototype,"item",void 0),t=__decorate([a],t)}(cc.Component);n.default=c,cc._RF.pop()},{"../Tool/Logger":"Logger","../manager/UIManager":"UIManager"}],FriendCriticism:[function(e,t,n){"use strict";cc._RF.push(t,"b0b0dOtzh9GY59BzSWbs8T4","FriendCriticism"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/UIManager"),i=e("../Tool/Logger"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollView=null,t.item=null,t}return __extends(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){},this),this.updateScroll([{name:"\u6821\u957f",imageUrl:"-",addGold:10},{name:"\u5e74\u7ea7\u4e3b\u4efb",imageUrl:"-",addGold:10},{name:"\u73ed\u4e3b\u4efb",imageUrl:"-",addGold:10},{name:"\u8bed\u6587\u8001\u5e08",imageUrl:"",addGold:10},{name:"\u6570\u5b66\u8001\u5e08",imageUrl:"",addGold:10},{name:"\u82f1\u8bed\u8001\u5e08",imageUrl:"",addGold:10},{name:"\u7f8e\u672f\u8001\u5e08",imageUrl:"",addGold:10},{name:"\u4f53\u80b2\u8001\u5e08",imageUrl:"-",addGold:1e3}])},t.prototype.menu=function(e,t){"close"==t&&o.UIManager.Instance.closeWindow("FriendCriticism"),"item"==t&&i.Logger.info("\u70b9\u51fb\u5206\u4eab",e.target.myflag)},t.prototype.refreshUI=function(){},t.prototype.updateScroll=function(e){i.Logger.info("\u66f4\u65b0\u540c\u5b66\u5173\u6000\u5217\u8868:",e);var t=this.scrollView.getComponent(cc.ScrollView);if(t.content.removeAllChildren(),!(e.length<=0)){this.node.active=!0;var n=this.item.width+20,o=this.item.height;t.content.width=e.length*n;for(var r=0;r<e.length;r++){var a=e[r],s=cc.instantiate(this.item);s.active=!0,t.content.addChild(s),s.myflag=r,s.setPosition(cc.v2(r%4*n+n/2,-Math.floor(r/4)*o-o/2)),s.getChildByName("name").getComponent(cc.Label).string=a.name,s.getChildByName("iconMask").getChildByName("head").width=45,s.getChildByName("iconMask").getChildByName("head").height=45,s.getComponent(cc.Button).interactable=!0,a.imageUrl.length>0&&(this.loadHttpIcon(s.getChildByName("iconMask").getChildByName("head"),"",null),s.getChildByName("iconMask").getChildByName("head").width=72,s.getChildByName("iconMask").getChildByName("head").height=72,s.getComponent(cc.Button).interactable=!1),s.getChildByName("combat").getComponent(cc.Label).string="\u91d1\u5e01+"+a.addGold+"%"}}},t.prototype.loadHttpIcon=function(e,t,n){t&&""!=t||(t="http://thirdwx.qlogo.cn/mmopen/vi_32/opmkDJhG2jpF8X8AfFQfTauRlpBc7VeFicJevZ9IiajEl5g4ia75opNSZOb0FvDV87BvpUN1rsyctibGnicP7uibsMtw/132"),cc.loader.load({url:t,type:"png"},function(t,o){var r=new cc.SpriteFrame(o);e.getComponent(cc.Sprite).spriteFrame=r,n&&n(),i.Logger.info("Should load a texture from RESTful API by specify the type: "+(o instanceof cc.Texture2D))})},__decorate([s(cc.Node)],t.prototype,"scrollView",void 0),__decorate([s(cc.Node)],t.prototype,"item",void 0),t=__decorate([a],t)}(cc.Component);n.default=c,cc._RF.pop()},{"../Tool/Logger":"Logger","../manager/UIManager":"UIManager"}],GameConfig:[function(e,t,n){"use strict";var o;cc._RF.push(t,"e9e586Z9KNGiboN4g5iyrWt","GameConfig"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.USERNAME=1]="USERNAME",e[e.WECHAT=2]="WECHAT",e[e.FACEBOOK=3]="FACEBOOK"}(o=n.LoginType||(n.LoginType={})),n.GameLoginType=o.FACEBOOK;var i=function(){function e(){}return e.httpUrl="http://192.168.1.110:7998/",e.gameUrl="http://192.168.1.110:7000/",e.wsServer="192.168.1.28",e.port=8200,e.imageUrl="https://minigame-1257126548.cos.ap-chengdu.myqcloud.com/images/stick_client/",e.downLoadUrl="https://minigame-1257126548.cos.ap-chengdu.myqcloud.com/stick_client/",e.beforeLoadRes=["Csv/Buff","Csv/case","Csv/c_prop","Csv/Effect","Csv/equip","Csv/item","Csv/Skill","Csv/SkillEffect","Csv/t_item","Csv/weapon"],e}();n.GameConfig=i,cc._RF.pop()},{}],GameEnd:[function(e,t,n){"use strict";cc._RF.push(t,"186b8pY3+xEiqZ1q+Eg6yGH","GameEnd"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BaseUI"),i=e("../manager/UIManager"),r=e("../Fight/FightManager"),a=e("../Tool/Logger"),s=cc._decorator,c=s.ccclass,u=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gold_num=null,t.score_num=null,t.rank_num=null,t}return __extends(t,e),t.prototype.onLoad=function(){a.Logger.info("GameEnd onLoad")},t.prototype.onDestroy=function(){a.Logger.info("GameEnd onDestroy")},t.prototype.onEnable=function(){a.Logger.info("GameEnd onEnable")},t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){},this),this.gold_num.getComponent(cc.Label).string=r.FightManager.Instance.fightLogic.killedGold.toString(),this.score_num.getComponent(cc.Label).string=r.FightManager.Instance.fightLogic.killedScore.toString(),this.rank_num.getComponent(cc.Label).string=(r.FightManager.Instance.fightLogic.gateConfig.nowGateIndex+1).toString()},t.prototype.menu=function(e,t){"close"==t&&this.close(),"startgame"==t&&(a.Logger.info("\u91cd\u65b0\u5f00\u59cb"),this.startFight()),"lookrank"==t&&i.UIManager.Instance.openWindow("rank"),"lookmovie"==t&&a.Logger.info("\u70b9\u51fb\u89c2\u770b\u89c6\u9891")},t.prototype.close=function(){i.UIManager.Instance.closeWindow("GameEnd"),r.FightManager.Instance.exitGame()},t.prototype.startFight=function(){a.Logger.info("\u8fdb\u5165\u6218\u6597\u754c\u9762"),r.FightManager.Instance.restartGame(1,0)},t.prototype.onShow=function(){a.Logger.info("GameEnd onShow")},t.prototype.onHide=function(){a.Logger.info("GameEnd onHide")},__decorate([u(cc.Node)],t.prototype,"gold_num",void 0),__decorate([u(cc.Node)],t.prototype,"score_num",void 0),__decorate([u(cc.Node)],t.prototype,"rank_num",void 0),t=__decorate([c],t)}(o.BaseUI);n.GameEnd=h,cc._RF.pop()},{"../Fight/FightManager":"FightManager","../Tool/Logger":"Logger","../manager/UIManager":"UIManager","./BaseUI":"BaseUI"}],GameNetwork:[function(e,t,n){"use strict";cc._RF.push(t,"b22d8VY5spIy77K2OW1DY9Z","GameNetwork"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Net/ws/NetSocket"),i=e("../Net/ws/INetSocket"),r=function(){function e(){this.connect_callback=null,this.heartTimer=-1,this.link=new o.NetSocket,this.initListener()}return Object.defineProperty(e,"Instance",{get:function(){return null==this.instance&&(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.connect=function(e){this.link.connect("GameConfig.wsServer",8080,this.onSocketHandler,this),this.connect_callback=e},Object.defineProperty(e.prototype,"isConnected",{get:function(){return this.link.isConnected},enumerable:!0,configurable:!0}),e.prototype.close=function(){this.link.close()},e.prototype.initListener=function(){this.link.addListenerMessage("UserLogin",this.recUserLogin,this)},e.prototype.onSocketHandler=function(e){switch(e){case i.NetSocketStatus.Connected:this.connect_callback&&this.connect_callback();break;case i.NetSocketStatus.ConnectFailed:this.link.close(),this.openConnectTip("  Connection failed, whether to reconnect!");break;case i.NetSocketStatus.Disconnect:this.link.close(),this.closeHeart(),this.openConnectTip("  The network has been disconnected, is it reconnected?");break;case i.NetSocketStatus.Error:this.link.close(),this.openConnectTip("  Connection error, whether to reconnect!")}},e.prototype.openConnectTip=function(e){},e.prototype.sendHeart=function(e){var t=this;this.heartTimer=setTimeout(function(){t.link.send("Ping","")},e)},e.prototype.closeHeart=function(){clearTimeout(this.heartTimer)},e.prototype.requestLoginByWeb=function(e){e.type=0,this.link.send(e.pt,JSON.stringify(e))},e.prototype.recUserLogin=function(e){},e}();n.GameNetwork=r,cc._RF.pop()},{"../Net/ws/INetSocket":"INetSocket","../Net/ws/NetSocket":"NetSocket"}],GameProto:[function(e,t,n){"use strict";cc._RF.push(t,"7076dYNRtRNeZvdFdBbIXbs","GameProto"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Net/HttpHandel"),i=e("../Net/MsgPacket"),r=e("../manager/UserManager"),a=e("../manager/RankManager"),s=e("../Net/BagPacket"),c=e("../manager/BagManager"),u=e("../Tool/Logger"),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"Instance",{get:function(){return null==this.instance&&(this.instance=new t),this.instance},enumerable:!0,configurable:!0}),t.prototype.registerProtocol=function(){o.HttpHandler.Instance.registerProtocol("UserLogin",this),o.HttpHandler.Instance.registerProtocol("GetPlayerData",this),o.HttpHandler.Instance.registerProtocol("SynPlayerData",this),o.HttpHandler.Instance.registerProtocol("AllRank",this),o.HttpHandler.Instance.registerProtocol("DayRank",this),o.HttpHandler.Instance.registerProtocol("CombatRank",this),o.HttpHandler.Instance.registerProtocol("CheckRankAward",this),o.HttpHandler.Instance.registerProtocol("GetShareAward",this),o.HttpHandler.Instance.registerProtocol("GetItemList",this),o.HttpHandler.Instance.registerProtocol("WearEquip",this),o.HttpHandler.Instance.registerProtocol("UpGradeEquip",this),o.HttpHandler.Instance.registerProtocol("ShopBuyInfo",this),o.HttpHandler.Instance.registerProtocol("OpenBox",this)},t.prototype.requestUserLogin=function(e){window.wx?e.type=1:e.type=0,o.HttpHandler.Instance.sendLoginPostMessage(e)},t.prototype.handleUserLogin=function(e){u.Logger.info("\u6536\u5230\u670d\u52a1\u5668\u8fd4\u56de\u767b\u9646\u4fe1\u606f\uff1a",e),r.UserManager.Instance.setUserInfo(e);var t=new i.CS_GetPlayerData;t.nickName=r.UserManager.Instance.getUserInfo().nickName,t.picUrl=r.UserManager.Instance.getUserInfo().avatarUrl,this.requestGetPlayerData(t)},t.prototype.requestSynPlayerData=function(e){r.UserManager.Instance.getUserInfo().score=e.score,r.UserManager.Instance.getUserInfo().stage=e.stage,c.BagManager.Instance.updateItemAdd(102001,e.gold),o.HttpHandler.Instance.sendGamePostMessage(e)},t.prototype.handleSynPlayerData=function(e){u.Logger.info("\u4fdd\u5b58\u7ed3\u7b97\u4fe1\u606f\u6210\u529f\uff1a",e)},t.prototype.requestGetPlayerData=function(e){o.HttpHandler.Instance.sendGamePostMessage(e)},t.prototype.handleGetPlayerData=function(e){u.Logger.info("\u6536\u5230\u670d\u52a1\u5668\u8fd4\u56de\u73a9\u5bb6\u6570\u636e\uff1a",e),r.UserManager.Instance.updatePlayerData(e)},t.prototype.requestAllRank=function(e){o.HttpHandler.Instance.sendGamePostMessage(e)},t.prototype.handleAllRank=function(e){u.Logger.info("\u6536\u5230\u670d\u52a1\u5668\u8fd4\u56de\u603b\u6392\u884c\u699c\u4fe1\u606f\uff1a",e),a.RankManager.Instance.refreshAllRank(e)},t.prototype.requestDayRank=function(e){o.HttpHandler.Instance.sendGamePostMessage(e)},t.prototype.handleDayRank=function(e){u.Logger.info("\u6536\u5230\u670d\u52a1\u5668\u8fd4\u56de\u65e5\u6392\u884c\u699c\u4fe1\u606f\uff1a",e),a.RankManager.Instance.refreshDayRank(e)},t.prototype.requestCombatRank=function(e){o.HttpHandler.Instance.sendGamePostMessage(e)},t.prototype.handleCombatRank=function(e){u.Logger.info("\u6536\u5230\u670d\u52a1\u5668\u8fd4\u56de\u6218\u529b\u6392\u884c\u699c\u4fe1\u606f\uff1a",e),a.RankManager.Instance.refreshCombatRank(e)},t.prototype.handleCheckRankAward=function(e){u.Logger.info("\u68c0\u6d4b\u6392\u884c\u699c\u5956\u52b1\uff1a",e)},t.prototype.requestGetShareAward=function(e){o.HttpHandler.Instance.sendGamePostMessage(e)},t.prototype.handleGetShareAward=function(e){u.Logger.info("\u89c6\u5c4f\u5206\u4eab\u5956\u52b1\uff1a",e),c.BagManager.Instance.updateShareAward(e)},t.prototype.requestGetItemList=function(e){if(e.uid<=0){var t=new s.SC_GetItemList;t.equiplist={1:{111001:{itemAdd:25,lv:1,range:20,shock:10,slowTime:10,soul:20,stage:1},111002:{itemAdd:25,lv:1,range:20,shock:10,slowTime:10,soul:20,stage:2},112001:{itemAdd:25,lv:1,range:20,shock:10,slowTime:10,soul:20,stage:1},112002:{itemAdd:25,lv:1,range:20,shock:10,slowTime:10,soul:20,stage:2},113001:{itemAdd:25,lv:1,range:20,shock:10,slowTime:10,soul:20,stage:1},114001:{itemAdd:25,lv:1,range:20,shock:10,slowTime:10,soul:20,stage:1},115001:{itemAdd:25,lv:1,range:20,shock:10,slowTime:10,soul:20,stage:1},canBuy:[111003,113002]},3:{canBuy:[121001,121002]}},t.wearEquiplist={1:111002},t.itemlist={101001:1e4,102001:0,105001:1,105002:0,105003:0,105004:0},c.BagManager.Instance.updateMyBag(t)}o.HttpHandler.Instance.sendGamePostMessage(e)},t.prototype.handleGetItemList=function(e){u.Logger.info("\u6536\u5230\u670d\u52a1\u5668\u8fd4\u56de\u80cc\u5305\u5217\u8868\u4fe1\u606f\uff1a",e),c.BagManager.Instance.updateMyBag(e)},t.prototype.requestWearEquip=function(e){o.HttpHandler.Instance.sendGamePostMessage(e)},t.prototype.handleWearEquip=function(e){u.Logger.info("\u6536\u5230\u670d\u52a1\u5668\u8fd4\u56de\u7a7f\u6234\u88c5\u5907\uff1a",e),c.BagManager.Instance.updateWear(e)},t.prototype.requestUpGradeEquip=function(e){o.HttpHandler.Instance.sendGamePostMessage(e)},t.prototype.handleUpGradeEquip=function(e){u.Logger.info("\u6536\u5230\u670d\u52a1\u5668\u8fd4\u56de\u5347\u7ea7\u88c5\u5907\uff1a",e),c.BagManager.Instance.updateUpGrade(e)},t.prototype.requestShopBuyInfo=function(e){o.HttpHandler.Instance.sendGamePostMessage(e)},t.prototype.handleShopBuyInfo=function(e){u.Logger.info("\u6536\u5230\u670d\u52a1\u5668\u8fd4\u56de\u8d2d\u4e70\u5546\u57ce\u7269\u54c1\uff1a",e)},t.prototype.requestOpenBox=function(e){o.HttpHandler.Instance.sendGamePostMessage(e)},t.prototype.handleOpenBox=function(e){u.Logger.info("\u6536\u5230\u670d\u52a1\u5668\u8fd4\u56de\u5f00\u5b9d\u7bb1\uff1a",e)},t}(i.ProtoBase);n.GameProto=h,cc._RF.pop()},{"../Net/BagPacket":"BagPacket","../Net/HttpHandel":"HttpHandel","../Net/MsgPacket":"MsgPacket","../Tool/Logger":"Logger","../manager/BagManager":"BagManager","../manager/RankManager":"RankManager","../manager/UserManager":"UserManager"}],HangLingQu:[function(e,t,n){"use strict";cc._RF.push(t,"ac9876O3v1FqqwANpduWxnI","HangLingQu"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/AudioManager"),i=e("../manager/UIManager"),r=cc._decorator,a=r.ccclass,s=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.get=null,t.getDouble=null,t}return __extends(t,e),t.prototype.start=function(){this.refreshUI()},t.prototype.refreshUI=function(){this.get.getChildByName("tip").getComponent(cc.Label).string="\u91d1\u5e01x1000",this.getDouble.getChildByName("tip").getComponent(cc.Label).string="\u91d1\u5e01x1000"},t.prototype.getReward=function(){},t.prototype.menu=function(e,t){o.AudioManager.Instance.playEff(o.AudioType.EFF_Touch),"close"==t&&i.UIManager.Instance.closeWindow("HangLingQu")},__decorate([s(cc.Node)],t.prototype,"get",void 0),__decorate([s(cc.Node)],t.prototype,"getDouble",void 0),t=__decorate([a],t)}(cc.Component);n.default=c,cc._RF.pop()},{"../manager/AudioManager":"AudioManager","../manager/UIManager":"UIManager"}],HangManager:[function(e,t,n){"use strict";cc._RF.push(t,"7687aJasWBNSIBJ/J/v4t5Y","HangManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Define/UserType"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=e.call(this)||this;return t.hangUpInfo=new o.HangUpInfo,t.hangUpInfo.UnlockBossArr=[{name:"\u73ed\u4e3b\u4efb",imageUrl:"-",combat:20,say:"\u55ef\uff1f\u88ab\u6211\u53d1\u73b0\u4e86\u5427\uff01"},{name:"\u8bad\u5bfc\u4e3b\u4efb",imageUrl:"-",combat:50,say:"????"}],t}var n;return __extends(t,e),n=t,Object.defineProperty(t,"Instance",{get:function(){return null==this.instance&&(this.instance=new n),this.instance},enumerable:!0,configurable:!0}),t.prototype.getHangUpInfo=function(){return this.hangUpInfo},t.prototype.updateHang=function(){},t.prototype.onLoad=function(){},t.prototype.onDestroy=function(){},t.prototype.update=function(e){},t=n=__decorate([r],t)}(cc.Component));n.HangManager=a,cc._RF.pop()},{"../Define/UserType":"UserType"}],HangUp:[function(e,t,n){"use strict";cc._RF.push(t,"7cfc1eOw7dGbqBgV7qhE8QV","HangUp"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/UIManager"),i=e("../manager/HangManager"),r=e("../Tool/Logger"),a=e("./BaseUI"),s=cc._decorator,c=s.ccclass,u=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bossScroll=null,t.bossItem=null,t.tip=null,t.isUnlock=!1,t}return __extends(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){},this),this.refreshUI(),this.updateBossScroll(i.HangManager.Instance.getHangUpInfo().UnlockBossArr)},t.prototype.refreshUI=function(){this.tip.getChildByName("tip1").getComponent(cc.Label).string=i.HangManager.Instance.getHangUpInfo().upGold+"\u91d1\u5e01/\u5206\u949f",this.tip.getChildByName("tip2").getComponent(cc.Label).string="\u91d1\u5e01\u52a0\u6210"+i.HangManager.Instance.getHangUpInfo().upGoldRate+"%",this.tip.getChildByName("tip3").getComponent(cc.Label).string="\u597d\u53cb\u603b\u6218\u529b+"+i.HangManager.Instance.getHangUpInfo().friendCombat,this.tip.getChildByName("tip4").getComponent(cc.Label).string="BOSS\u603b\u6218\u529b+"+i.HangManager.Instance.getHangUpInfo().bossCombat,this.updateBossScroll(i.HangManager.Instance.getHangUpInfo().UnlockBossArr)},t.prototype.menu=function(e,t){if("close"==t&&o.UIManager.Instance.closeWindow("HangUp"),"piping"==t&&o.UIManager.Instance.openWindow("FriendCriticism"),"care"==t&&o.UIManager.Instance.openWindow("FriendCare"),"get"==t&&(r.Logger.info("\u70b9\u51fb\u9886\u53d6"),o.UIManager.Instance.openWindow("HangLingQu")),"bossItem"==t){var n=e.target.myflag,a=i.HangManager.Instance.getHangUpInfo().UnlockBossArr[n];r.Logger.info("\u9009\u62e9bossItem = ",a),o.UIManager.Instance.showToast(a.name+":"+a.say)}},t.prototype.updateBossScroll=function(e){r.Logger.info("\u66f4\u65b0\u6302\u673a\u5217\u8868:",e);var t=this.bossScroll.getComponent(cc.ScrollView);if(t.content.removeAllChildren(),!(e.length<=0)){this.node.active=!0;var n=this.bossItem.width+2;this.bossItem.height;t.content.width=e.length*n;for(var o=0;o<e.length;o++){var i=e[o],a=cc.instantiate(this.bossItem);a.active=!0,t.content.addChild(a),a.myflag=o,a.setPosition(cc.v2(o*n+n/2,0)),a.getChildByName("name").getComponent(cc.Label).string=i.name,a.getChildByName("icon").width=160,a.getChildByName("icon").height=160,i.imageUrl.length>0&&this.loadHttpIcon(a.getChildByName("icon"),"",null),a.getChildByName("combat").getComponent(cc.Label).string="\u6218\u529b+"+i.combat}}},t.prototype.loadHttpIcon=function(e,t,n){t&&""!=t||(t="http://thirdwx.qlogo.cn/mmopen/vi_32/opmkDJhG2jpF8X8AfFQfTauRlpBc7VeFicJevZ9IiajEl5g4ia75opNSZOb0FvDV87BvpUN1rsyctibGnicP7uibsMtw/132"),cc.loader.load({url:t,type:"png"},function(t,o){var i=new cc.SpriteFrame(o);e.getComponent(cc.Sprite).spriteFrame=i,n&&n(),r.Logger.info("Should load a texture from RESTful API by specify the type: "+(o instanceof cc.Texture2D))})},__decorate([u(cc.Node)],t.prototype,"bossScroll",void 0),__decorate([u(cc.Node)],t.prototype,"bossItem",void 0),__decorate([u(cc.Node)],t.prototype,"tip",void 0),t=__decorate([c],t)}(a.BaseUI);n.default=h,cc._RF.pop()},{"../Tool/Logger":"Logger","../manager/HangManager":"HangManager","../manager/UIManager":"UIManager","./BaseUI":"BaseUI"}],HashMap:[function(e,t,n){"use strict";cc._RF.push(t,"1450cV9q9lAn4QXQVxkoPrB","HashMap"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.clear()}return e.prototype.getIndexByKey=function(e){for(var t=this._list.length,n=0;n<t;n++){if(this._list[n].key==e)return n}return-1},e.prototype.add=function(e,t){var n={key:e,value:t},o=this.getIndexByKey(e);-1!=o?this._list[o]=n:this._list.push(n)},e.prototype.remove=function(e){var t=this.getIndexByKey(e);if(-1!=t){var n=this._list[t];return this._list.splice(t,1),n}return null},e.prototype.has=function(e){return-1!=this.getIndexByKey(e)},e.prototype.get=function(e){var t=this.getIndexByKey(e);return-1!=t?this._list[t].value:null},Object.defineProperty(e.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),e.prototype.forEachKeyValue=function(e){for(var t=this._list.length,n=0;n<t;n++){e(this._list[n])}},e.prototype.forEach=function(e){for(var t=this._list.length,n=0;n<t;n++){var o=this._list[n];e(o.key,o.value)}},e.prototype.clear=function(){this._list=[]},e}();n.HashMap=o,cc._RF.pop()},{}],Helloworld:[function(e,t,n){"use strict";cc._RF.push(t,"e1b90/rohdEk4SdmmEZANaD","Helloworld"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=o.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return __extends(t,e),t.prototype.start=function(){this.label.string=this.text},__decorate([r(cc.Label)],t.prototype,"label",void 0),__decorate([r],t.prototype,"text",void 0),t=__decorate([i],t)}(cc.Component);n.default=a,cc._RF.pop()},{}],Help:[function(e,t,n){"use strict";cc._RF.push(t,"d8deciG9y1Kva7HhQhgZSLC","Help"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.PrefixInteger=function(e,t){return("000000"+e).substr(-t)},e.ArrayRemove=function(e,t){var n=e.indexOf(t);return n>-1&&(e.splice(n,1),!0)},e.Lerp=function(e,t,n){return e*(1-n)+t*n},e.GetRandomInt=function(e,t){var n=t-e,o=Math.random();return e+Math.round(o*n)},e.GetRandom=function(e,t){var n=t-e;return e+Math.random()*n},e.StringToArray=function(e,t){void 0===t&&(t="|");for(var n=e.split(t),o=new Array,i=0,r=n;i<r.length;i++){var a=r[i];o.push(Number(a))}return o},e.Clone=function(e,t){for(var n in e){var o=e[n];"number"==typeof o&&(t[n]=o),"string"==typeof o&&(t[n]=o),"boolean"==typeof o&&(t[n]=o)}},e}();n.Help=o;var i=function(){function e(){}return e.IsEmpty=function(e){return void 0==e||(null==e||""==e)},e.Format=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var o=0;o<10;o++){var i="{"+o+"}";if(-1==e.indexOf(i))break;var r=String(t[o]);e=e.replace(i,r)}return e},e}();n.StringHelp=i;var r=function(){return function(){this.index=-1}}();n.IndexObj=r;var a=function(){function e(){this.num=0,this.arr=[],this.length=0}return e.prototype.Add=function(e){if(-1==e.index&&(this.arr.push(e),e.index=this.length,this.length++),e.index>=this.num){var t=this.arr[this.num];t.index=e.index,this.arr[t.index]=t,e.index=this.num,this.arr[e.index]=e,this.num++}},e.prototype.Del=function(e){if(-1==e.index&&(this.arr.push(e),e.index=this.length,this.length++),e.index<this.num){this.num--;var t=this.arr[this.num];t.index=e.index,this.arr[t.index]=t,e.index=this.num,this.arr[e.index]=e}},Object.defineProperty(e.prototype,"array",{get:function(){return this.arr.slice(0,this.num)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"one",{get:function(){return this.arr[0]},enumerable:!0,configurable:!0}),e}();n.LoopArry=a,cc._RF.pop()},{}],HostAdress:[function(e,t,n){"use strict";cc._RF.push(t,"9801eZ5/A9LroR+1kwwcUtK","HostAdress"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype.completeAddress=function(){return(this.encryption?"wss":"ws")+"://"+this.host+":"+this.port},e}();n.HostAdress=o,cc._RF.pop()},{}],HttpHandel:[function(e,t,n){"use strict";cc._RF.push(t,"257f4ZVg+ZAfKiche3Xy9x+","HttpHandel"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Define/GameConfig"),i=e("../Tool/Logger"),r=function(){function e(){this._protoMap={},this.msgQuen=[]}return Object.defineProperty(e,"Instance",{get:function(){return null==this.instance&&(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.registerProtocol=function(e,t){this._protoMap[e]=t},e.prototype.sendLoginPostMessage=function(e){var t=this,n=o.GameConfig.httpUrl+"api/"+e.pt,r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(200===r.status?t.onPostComplete(r):t.onPostError(r))},r.responseType="text",r.open("POST",n,!0),r.setRequestHeader("Content-Type","application/json;charset=utf-8"),r.send(JSON.stringify(e)),i.Logger.info("http sendPostMessage: \u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7684\u6d88\u606f\uff1a",e)},e.prototype.sendGamePostMessage=function(e){if(e.tk.length<=0)i.Logger.warn("\u672a\u767b\u5f55");else{var t=this,n=o.GameConfig.gameUrl+"api/"+e.pt,r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(200===r.status?t.onPostComplete(r):t.onPostError(r))},r.responseType="text",r.open("POST",n,!0),r.setRequestHeader("Content-Type","application/json;charset=utf-8"),r.send(JSON.stringify(e)),i.Logger.info("http sendPostMessage:\u53d1\u9001\u7ed9\u670d\u52a1\u5668\u7684\u6d88\u606f\uff1a",e)}},e.prototype.dispatch=function(e){var t=this;e.forEach(function(e){t._protoMap[e.pt]?t._protoMap[e.pt].handleProtocol(e):i.Logger.info("\u672a\u5b9a\u4e49pt "+e.pt)})},e.prototype.onPostComplete=function(e){try{this.dispatch(JSON.parse(e.response))}catch(e){i.Logger.info("\u8fd4\u56de\u6570\u636e\u5fc5\u987b\u4e3a\u6570\u7ec4\uff1a",e)}},e.prototype.onPostError=function(e){i.Logger.info("\u53d1\u9001\u6d88\u606f\u9519\u8bef: ",e)},e}();n.HttpHandler=r,cc._RF.pop()},{"../Define/GameConfig":"GameConfig","../Tool/Logger":"Logger"}],INetSocket:[function(e,t,n){"use strict";cc._RF.push(t,"c00e0WxVmdLNLjeZe4PNRuj","INetSocket"),Object.defineProperty(n,"__esModule",{value:!0}),function(e){e[e.None=0]="None",e[e.BeginConnect=1]="BeginConnect",e[e.Connected=2]="Connected",e[e.ConnectFailed=3]="ConnectFailed",e[e.Disconnect=4]="Disconnect",e[e.Error=5]="Error"}(n.NetSocketStatus||(n.NetSocketStatus={})),cc._RF.pop()},{}],ItemBase:[function(e,t,n){"use strict";cc._RF.push(t,"3017esYwmNG7KkLL0e6u2TB","ItemBase"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.itemID=0,this.name="",this.description="",this.type=0,this.level=0,this.quality=0,this.icon=""}return e.prototype.init=function(e){},e.prototype.getID=function(){return this.itemID},e.prototype.getName=function(){return this.name},e.prototype.getDescription=function(){return this.description},e}();n.default=o,cc._RF.pop()},{}],LoadManager:[function(e,t,n){"use strict";cc._RF.push(t,"f55bbcQVlFD0pKn/NNSmjQ0","LoadManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Define/GameConfig"),i=e("../Tool/Load"),r=e("../Tool/wx/wxApi"),a=e("../Tool/Logger"),s=function(){function e(){this.loadhandel=null,this.loadView=null,this.configs={},this.skeletons={},this.audios={},this.init()}return Object.defineProperty(e,"Instance",{get:function(){return null==this.instance&&(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.loadRes=function(e,t){return __awaiter(this,void 0,Promise,function(){var n,r,s,c;return __generator(this,function(u){switch(u.label){case 0:this.loadhandel=e,t&&(this.loadView=t),this.showLoadView(),n=0,r=o.GameConfig.beforeLoadRes,u.label=1;case 1:return n<r.length?(s=r[n],[4,i.LoadAsync.getRes(s).load()]):[3,4];case 2:u.sent(),u.label=3;case 3:return n++,[3,1];case 4:return c=this,[2,new Promise(function(e,t){c.loadResRemote({success:function(){a.Logger.info("LoadManager \u8d44\u6e90\u52a0\u8f7d\u5b8c\u6210"),c.hideLoadView(),c.loadhandel.complete(),e()}})})]}})})},e.prototype.loadResRemote=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return this,this.loadResLocal(e,"PreLoadRes"),[2]})})},e.prototype.loadResLocal=function(e,t){var n=this;cc.loader.loadResDir(t,function(e,t,o){n.processLoadView(e,t)},function(t,o,i){if(t)a.Logger.info(t);else{a.Logger.info("\u52a0\u8f7d\u4e86\u4e0b\u5217\u8d44\u6e90:",o);for(var r=0,s=o;r<s.length;r++){var c=s[r],u=c.__classname__;"cc.JsonAsset"==u?n.configs[c.name]=c.json:"cc.SpriteFrame"==u||"cc.TTFFont"==u||"cc.Texture2D"==u||("sp.SkeletonData"==u?n.skeletons[c.name]=c:"cc.AudioClip"==u&&(n.audios[c.name]=c))}e.success()}})},e.prototype.loadResWX=function(e){var t=this;a.Logger.info(window.wx,cc.loader.downloader),r.WXManager.Instance.downLoad({urls:["remoteRes/fnt/hyykh.ttf","remoteRes/json/monster.json","remoteRes/json/map1.json","remoteRes/texture/\u6218\u6597\u754c\u97621.png","remoteRes/texture/fight/background1.png","remoteRes/texture/fight/pause.png","remoteRes/texture/fight/top.png","remoteRes/spine/hero/nanzhu.json","remoteRes/spine/hero/nanzhu.png","remoteRes/spine/hero/nanzhu.atlas","remoteRes/spine/hero/nanzhu.skel"],success:function(n){a.Logger.info(n);r.WXManager.Instance.wx.loadFont(r.WXManager.Instance.wx.env.USER_DATA_PATH+"/remoteRes/fnt/HYYANKAIW.ttf");t.loadResLocal(e,"remoteRes")},process:function(e,n){t.processLoadView(e,n)}})},e.prototype.showLoadView=function(){this.loadView&&(this.loadView.active=!0)},e.prototype.hideLoadView=function(){this.loadView&&(this.loadView.active=!1)},e.prototype.processLoadView=function(e,t){},e}();n.LoadManager=s,cc._RF.pop()},{"../Define/GameConfig":"GameConfig","../Tool/Load":"Load","../Tool/Logger":"Logger","../Tool/wx/wxApi":"wxApi"}],Load:[function(e,t,n){"use strict";cc._RF.push(t,"564dbINIblFYrtYwGAxkb/M","Load"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../Tool/SingletonFactory");(function(e){e[e.Null=0]="Null",e[e.Loading=1]="Loading",e[e.Ok=2]="Ok",e[e.Fail=3]="Fail"})(o=n.LoadState||(n.LoadState={}));var r=function(){function e(){}return Object.defineProperty(e.prototype,"res",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadState",{get:function(){return this.resData.loadState},enumerable:!0,configurable:!0}),e.prototype.setRes=function(e){},e.prototype.loadaSync=function(){return __awaiter(this,void 0,Promise,function(){var e=this;return __generator(this,function(t){return this.resData=u.getResObj(this.res),[2,new Promise(function(t){var n=e,i=n.resData.data.onUpdata.AddListen(function(e){i(),n.setRes(e),t()},n);n.resData.loadState==o.Ok?n.resData.data.set(n.resData.data.get()):n.resData.load()})]})})},e}();n.LoadObj=r;var a=function(e){function t(t){var n=e.call(this,void 0)||this;return n.loadState=o.Null,n.url=t,n.onUpdata.AddListen(function(e){e&&(n.loadState=o.Ok)}),n}return __extends(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this},enumerable:!0,configurable:!0}),t.prototype.load=function(){return __awaiter(this,void 0,Promise,function(){var e,t=this;return __generator(this,function(n){return e=this.url,[2,new Promise(function(n){var o=t;cc.loader.loadRes(e,function(e,t){o.set(t),n(t)})})]})})},t.prototype.loadT=function(e){return __awaiter(this,void 0,Promise,function(){var t,n=this;return __generator(this,function(o){return t=this.url,[2,new Promise(function(o){var i=n;cc.loader.loadRes(t,e,function(e,t){i.set(t),o(t)})})]})})},t}(i.MyUpateObj);n.ResObj=a;var s=function(e){function t(t){var n=e.call(this,void 0)||this;return n.loadState=o.Null,n.url=t,n.onUpdata.AddListen(function(e){e&&(n.loadState=o.Ok)}),n}return __extends(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this},enumerable:!0,configurable:!0}),t.prototype.load=function(){return __awaiter(this,void 0,Promise,function(){var e,t=this;return __generator(this,function(n){return e=this.url,[2,new Promise(function(n){var o=t;cc.loader.loadResArray(e,function(e,t){o.set(t),n(t)})})]})})},t.prototype.loadT=function(e){return __awaiter(this,void 0,Promise,function(){var t,n=this;return __generator(this,function(o){return t=this.url,[2,new Promise(function(o){var i=n;cc.loader.loadResArray(t,e,function(e,t){i.set(t),o(t)})})]})})},t.prototype.loadTS=function(e){return __awaiter(this,void 0,Promise,function(){var t;return __generator(this,function(n){return t=this.url,[2,new Promise(function(n){cc.loader.loadResArray(t,e)})]})})},t}(i.MyUpateObj);n.ResObjArray=s;var c=function(e){function t(t){var n=e.call(this,void 0)||this;return n.loadState=o.Null,n.url=t,n.onUpdata.AddListen(function(e){e&&(n.loadState=o.Ok)}),n}return __extends(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this},enumerable:!0,configurable:!0}),t.prototype.load=function(){return __awaiter(this,void 0,Promise,function(){var e,t=this;return __generator(this,function(n){return e=this.url,[2,new Promise(function(n){var o=t;cc.loader.loadResDir(e,function(e,t,i){o.set([t,i]),n(t)})})]})})},t.prototype.loadT=function(e){return __awaiter(this,void 0,Promise,function(){var t,n=this;return __generator(this,function(o){return t=this.url,[2,new Promise(function(o){var i=n;cc.loader.loadResDir(t,e,function(e,t,n){i.set([t,n]),o(t)})})]})})},t}(i.MyUpateObj);n.ResDir=c;var u=function(){function e(){}return e.getRes=function(t,n){var i=e._resDic[t];return i||(i=new a(t),e._resDic[t]=i),i.loadState==o.Null&&(i.loadState=o.Loading,n?i.loadT(n):i.load()),i},e.getResObj=function(t,n){var o=e._resDic[t];return o||(o=new a(t),e._resDic[t]=o),o},e.getResArry=function(t){var n=new s(t);return n.onUpdata.SetCall(function(n){if(n)for(var o=0,i=t.length;o<i;o++){var r=t[o],a=n[o];e.getResObj(r).set(a)}}),n},e.getResDir=function(t){var n=new c(t);return n.onUpdata.SetCall(function(n){var o=n[0],i=n[1];if(o)for(var r=0,a=t.length;r<a;r++){var s=i[r],c=o[r];e.getResObj(s).set(c)}}),n},e._resDic={},e}();n.LoadAsync=u,cc._RF.pop()},{"../Tool/SingletonFactory":"SingletonFactory"}],LocalNode:[function(e,t,n){"use strict";cc._RF.push(t,"40aa6MAg29Ly6amtflORwVo","LocalNode"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./Define/CommonParam"),i=e("./manager/UIManager"),r=e("./manager/LoadManager"),a=e("./protocols/GameProto"),s=e("./Tool/wx/wxApi"),c=e("./manager/AudioManager"),u=e("./Net/BagPacket"),h=cc._decorator,p=h.ccclass,l=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.displayView=null,t}return __extends(t,e),t.prototype.onLoad=function(){s.WXManager.Instance.loadWx(),a.GameProto.Instance.registerProtocol()},t.prototype.start=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return cc.game.addPersistRootNode(this.node),[4,i.UIManager.Instance.openWindow("LoginUI")];case 1:return e.sent(),[4,r.LoadManager.Instance.loadRes(new o.LoadHandel(function(e){},function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})}))];case 2:return e.sent(),[4,i.UIManager.Instance.openWindow("MainUI")];case 3:return e.sent(),i.UIManager.Instance.findComponent("LoginUI").login(),[2]}})})},t.prototype.loginComplete=function(){a.GameProto.Instance.requestGetItemList(new u.CS_GetItemList),c.AudioManager.Instance.playBg(c.AudioType.MUSIC_LoginBG),cc.debug.setDisplayStats(!0)},t.prototype.showDisplayView=function(){this.displayView.getComponent("displaywxsub").show()},t.prototype.hideDisplayView=function(){this.displayView.getComponent("displaywxsub").hide()},t.prototype.openTest=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,i.UIManager.Instance.openWindow("TestUI")];case 1:return e.sent(),i.UIManager.Instance.findComponent("TestUI").play(),[2]}})})},__decorate([l({type:cc.Node,tooltip:"\u5c55\u793a\u5fae\u4fe1\u6570\u636e\u57df"})],t.prototype,"displayView",void 0),t=__decorate([p],t)}(cc.Component);n.LocalNode=g,cc._RF.pop()},{"./Define/CommonParam":"CommonParam","./Net/BagPacket":"BagPacket","./Tool/wx/wxApi":"wxApi","./manager/AudioManager":"AudioManager","./manager/LoadManager":"LoadManager","./manager/UIManager":"UIManager","./protocols/GameProto":"GameProto"}],Logger:[function(e,t,n){"use strict";cc._RF.push(t,"5d66cygXahPQ67+qChrqcPz","Logger"),Object.defineProperty(n,"__esModule",{value:!0}),n.Logger={info:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},warn:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},error:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]}},cc._RF.pop()},{}],LoginUI:[function(e,t,n){"use strict";cc._RF.push(t,"7098bDZAOtMj41FDhoO5IlW","LoginUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BaseUI"),i=e("../Define/GameConfig"),r=e("../manager/UIManager"),a=e("../Tool/wx/wxApi"),s=e("../Define/CommonParam"),c=e("../protocols/GameProto"),u=e("../Net/MsgPacket"),h=e("../manager/UserManager"),p=e("../manager/AudioManager"),l=e("../Tool/Logger"),g=cc._decorator,f=g.ccclass,d=g.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.loginBtn=null,t.wx_button=null,t.loginHandel=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){},this)},t.prototype.onDestroy=function(){this.hideWxInfoButton()},t.prototype.start=function(){},t.prototype.login=function(){var e=cc.find("LocalNode").getComponent("LocalNode");if(window.wx)a.WXManager.Instance.login(new s.CommonHandel(function(e){l.Logger.info("============ \u5fae\u4fe1\u767b\u5f55\u6210\u529f ============="),h.UserManager.Instance.getUserInfo().nickName=e.userInfo.nickName,h.UserManager.Instance.getUserInfo().gender=e.userInfo.gender,h.UserManager.Instance.getUserInfo().avatarUrl=e.userInfo.avatarUrl;var t=new u.CS_UserLogin;t.code=h.UserManager.Instance.getUserInfo().code,c.GameProto.Instance.requestUserLogin(t)}));else{var t=new u.CS_UserLogin;c.GameProto.Instance.requestUserLogin(t),e.loginComplete(),r.UIManager.Instance.closeWindow("LoginUI")}},t.prototype.hideWxInfoButton=function(){this.wx_button&&this.wx_button.hide()},t.prototype.showWxInfoButton=function(){l.Logger.info("\u663e\u793a\u5fae\u4fe1\u6388\u6743\u6309\u94ae");var e=this,t=i.GameConfig.imageUrl+"weixinshouquan.png";if(e.wx_button)e.wx_button.show();else{var n=window.wx;n.getSystemInfo({success:function(o){var i=o.screenWidth,r=o.screenHeight;e.wx_button=n.createUserInfoButton({type:"image",image:t,style:{left:i/2-86,top:r/2-26+100,width:172,height:52}}),e.wx_button.onTap(function(t){p.AudioManager.Instance.playEff(p.AudioType.EFF_Touch),e.loginHandel?a.WXManager.Instance.getUserInfo(e.loginHandel):l.Logger.warn("??? loginHandel = null")}),e.wx_button.show()}})}},__decorate([d(cc.Node)],t.prototype,"loginBtn",void 0),t=__decorate([f],t)}(o.BaseUI);n.LoginUI=m,cc._RF.pop()},{"../Define/CommonParam":"CommonParam","../Define/GameConfig":"GameConfig","../Net/MsgPacket":"MsgPacket","../Tool/Logger":"Logger","../Tool/wx/wxApi":"wxApi","../manager/AudioManager":"AudioManager","../manager/UIManager":"UIManager","../manager/UserManager":"UserManager","../protocols/GameProto":"GameProto","./BaseUI":"BaseUI"}],MainUI:[function(e,t,n){"use strict";cc._RF.push(t,"db716TEQO5EHpblmOSPi2oI","MainUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Fight/FightManager"),i=e("../manager/UIManager"),r=e("../manager/AudioManager"),a=e("../manager/UserManager"),s=e("./BaseUI"),c=e("../Tool/Logger"),u=cc._decorator,h=u.ccclass,p=u.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.menuNode=null,t.topUI=null,t}return __extends(t,e),t.prototype.onLoad=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.menuNode.active=!1,r.AudioManager.Instance.stopBg(),r.AudioManager.Instance.playBg(r.AudioType.MUSIC_LoginBG),[2]})})},t.prototype.onShow=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=this,[4,i.UIManager.Instance.createPrefab("TopUI")];case 1:return e.topUI=t.sent(),this.node.addChild(this.topUI.node),this.topUI.refreshUI(),i.UIManager.Instance.preLoadWindow(["HangUp","PropShop","diamshop","rank"]),[2]}})})},t.prototype.start=function(){this.playShowMenu()},t.prototype.refreshUI=function(){this.topUI&&this.topUI.refreshUI(),this.node.getChildByName("playername").getComponent(cc.Label).string=a.UserManager.Instance.getUserInfo().nickName.toString()+"    "+a.UserManager.Instance.getUserInfo().combat.toString(),a.UserManager.Instance.getUserInfo().myRank<=1e3?this.node.getChildByName("playerrank").getComponent(cc.Label).string="No."+a.UserManager.Instance.getUserInfo().myRank:this.node.getChildByName("playerrank").getComponent(cc.Label).string="\u672a\u4e0a\u699c"},t.prototype.menu=function(e,t){r.AudioManager.Instance.playEff(r.AudioType.EFF_Touch),"rank"==t&&this.openrank(),"onestart"==t&&this.startFight(),"hangup"==t&&this.openHangUp(),"propshop"==t&&this.openPropShop(),"diamondsshop"==t&&this.opemdiamondsshop(),"duel"==t&&this.startPVP()},t.prototype.openrank=function(){i.UIManager.Instance.openWindow("rank"),i.UIManager.Instance.preLoadWindow(["combatrank","everydayrank"])},t.prototype.startFight=function(){c.Logger.info("\u8fdb\u5165\u6218\u6597\u754c\u9762"),o.FightManager.Instance.enterGame(1,0)},t.prototype.startPVP=function(){c.Logger.info("\u8fdb\u5165\u5339\u914d\u5bf9\u6218"),i.UIManager.Instance.showToast("\u656c\u8bf7\u671f\u5f85")},t.prototype.playShowMenu=function(){this.menuNode.active=!0},t.prototype.openHangUp=function(){c.Logger.info("\u6253\u5f00\u6302\u673a\u754c\u9762"),i.UIManager.Instance.showToast("\u656c\u8bf7\u671f\u5f85")},t.prototype.openPropShop=function(){c.Logger.info("\u6253\u5f00\u9053\u5177\u5546\u5e97"),i.UIManager.Instance.openWindow("PropShop")},t.prototype.opemdiamondsshop=function(){c.Logger.info("\u6253\u5f00\u94bb\u77f3\u5546\u5e97"),i.UIManager.Instance.openWindow("diamshop")},__decorate([p(cc.Node)],t.prototype,"menuNode",void 0),t=__decorate([h],t)}(s.BaseUI);n.MainUI=l,cc._RF.pop()},{"../Fight/FightManager":"FightManager","../Tool/Logger":"Logger","../manager/AudioManager":"AudioManager","../manager/UIManager":"UIManager","../manager/UserManager":"UserManager","./BaseUI":"BaseUI"}],MsgPacket:[function(e,t,n){"use strict";cc._RF.push(t,"42b1ck2oaZLdqFFUf9Qg+/T","MsgPacket"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Define/ErrorLang"),i=e("../manager/UserManager"),r=e("../Tool/Logger"),a=function(){return function(){this.pt=this.toString().substr(3)}}();n.IPacket=a;var s=function(e){function t(){var t=e.call(this)||this;return t.tk="",t.uid=0,t.tk=i.UserManager.Instance.getUserInfo().token,t.uid=i.UserManager.Instance.getUserInfo().uid,t}return __extends(t,e),t.prototype.Write=function(e){},t}(a);n.CS_Packet=s;var c=function(e){function t(){var t=e.call(this)||this;return t.ret=1,t}return __extends(t,e),t}(a);n.SC_Packet=c;var u=function(){function e(){}return e.prototype.handleProtocol=function(e){if(e.ret===o.ErrorType.COMMON_SUCCESS){var t=this["handle"+e.pt];t?t.call(this,e):r.Logger.warn("\u6210\u529f\u6d88\u606f\u89e3\u6790\u9519\u8bef")}else{r.Logger.warn(o.ErrorLang[e.ret]);var n=this["fail"+e.pt];n?n.call(this,e):r.Logger.warn("\u5931\u8d25\u6d88\u606f\u89e3\u6790\u9519\u8bef")}},e}();n.ProtoBase=u;var h=function(e){function t(){var t=e.call(this)||this;return t.type=0,t.code="",t.pt="UserLogin",t}return __extends(t,e),t}(s);n.CS_UserLogin=h;var p=function(e){function t(){var t=e.call(this)||this;return t.uid=0,t.openid="",t.tk="",t.pt="UserLogin",t}return __extends(t,e),t}(c);n.SC_UserLogin=p;var l=function(e){function t(){var t=e.call(this)||this;return t.picUrl="",t.nickName="",t.pt="GetPlayerData",t}return __extends(t,e),t}(s);n.CS_GetPlayerData=l;var g=function(e){function t(){var t=e.call(this)||this;return t.picUrl="",t.gender=0,t.nickName="",t.score=0,t.stage=0,t.combat=0,t.pt="GetPlayerData",t}return __extends(t,e),t}(c);n.SC_GetPlayerData=g;var f=function(e){function t(){var t=e.call(this)||this;return t.score=0,t.stage=0,t.gold=0,t.pt="SynPlayerData",t}return __extends(t,e),t}(s);n.CS_SynPlayerData=f;var d=function(e){function t(){var t=e.call(this)||this;return t.pt="SynPlayerData",t}return __extends(t,e),t}(c);n.SC_SynPlayerData=d;var m=function(e){function t(){var t=e.call(this)||this;return t.pt="AllRank",t}return __extends(t,e),t}(s);n.CS_AllRank=m;var y=function(e){function t(){var t=e.call(this)||this;return t.rankList=new Array,t.pt="AllRank",t}return __extends(t,e),t}(c);n.SC_AllRank=y;var _=function(e){function t(){var t=e.call(this)||this;return t.pt="DayRank",t}return __extends(t,e),t}(s);n.CS_DayRank=_;var v=function(e){function t(){var t=e.call(this)||this;return t.rankList=new Array,t.pt="DayRank",t}return __extends(t,e),t}(c);n.SC_DayRank=v;var I=function(e){function t(){var t=e.call(this)||this;return t.pt="CombatRank",t}return __extends(t,e),t}(s);n.CS_CombatRank=I;var b=function(e){function t(){var t=e.call(this)||this;return t.rankList=new Array,t.pt="CombatRank",t}return __extends(t,e),t}(c);n.SC_CombatRank=b;var C=function(e){function t(){var t=e.call(this)||this;return t.pt="CheckRankAward",t}return __extends(t,e),t}(s);n.CS_CheckRankAward=C;var M=function(e){function t(){var t=e.call(this)||this;return t.rankAward={},t.pt="CheckRankAward",t}return __extends(t,e),t}(c);n.SC_CheckRankAward=M;var w=function(e){function t(){var t=e.call(this)||this;return t.shareType=0,t.pt="GetShareAward",t}return __extends(t,e),t}(s);n.CS_GetShareAward=w;var S=function(e){function t(){var t=e.call(this)||this;return t.shareType=0,t.awardId=0,t.awardCount=0,t.pt="GetShareAward",t}return __extends(t,e),t}(c);n.SC_GetShareAward=S,cc._RF.pop()},{"../Define/ErrorLang":"ErrorLang","../Tool/Logger":"Logger","../manager/UserManager":"UserManager"}],NetSocket:[function(e,t,n){"use strict";cc._RF.push(t,"97255blIa5I0oXZweJWrF3E","NetSocket"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./INetSocket"),i=e("./HostAdress"),r=function(){function e(){this.status=o.NetSocketStatus.None,this.recFuncMaps=new Object,this.adress=new i.HostAdress}return Object.defineProperty(e.prototype,"isConnected",{get:function(){return null!=this.socket&&this.status==o.NetSocketStatus.Connected},enumerable:!0,configurable:!0}),e.prototype.addListenerMessage=function(e,t,n){if(console.log(this.recFuncMaps),null==this.recFuncMaps[e]){var o=new a;o.ID=e,o.handler=t,o.thisObj=n,this.recFuncMaps[e]=o}else console.log("The same ID already exists in the receive message list:"+e)},e.prototype.connect=function(e,t,n,i){""!=e&&0!=t||(console.error("[socket] connect error,host or port is null.."),this.status=o.NetSocketStatus.None),this.funcObj=i,this.onSocketFunc=n,this.connectToServer(e,t,!1)},e.prototype.secureConnect=function(e,t,n,i){""!=e&&0!=t||(console.error("[socket] connect error,host or port is null.."),this.status=o.NetSocketStatus.None),this.funcObj=i,this.onSocketFunc=n,this.connectToServer(e,t,!0)},e.prototype.send=function(e,t){this.isConnected?(console.info("ws send:",t),this.socket.send(t)):this.close()},e.prototype.close=function(){null!=this.socket&&(this.socket.onopen=null,this.socket.onmessage=null,this.socket.onerror=null,this.socket.onclose=null,this.socket.close(),this.socket=null),this.status=o.NetSocketStatus.None},e.prototype.connectToServer=function(e,t,n){this.adress.host=e,this.adress.port=t,this.adress.encryption=n,this.onInit()},e.prototype.onInit=function(){0==this.isConnected&&(this.status=o.NetSocketStatus.BeginConnect,null==this.socket&&(this.socket=new WebSocket(this.adress.completeAddress()),this.socket.onopen=this.onConnectSucceed,this.socket.onmessage=this.onReceive,this.socket.onerror=this.onError,this.socket.onclose=this.onClose))},e.prototype.onConnectSucceed=function(e){this.status=o.NetSocketStatus.Connected,console.log("[socket] connect server succeed!"),null!=this.onSocketFunc&&null!=this.funcObj&&this.onSocketFunc.call(this.funcObj,this.status)},e.prototype.onReceive=function(e){var t=e;console.info(e);var n=JSON.parse(t).pt;if(null!=this.recFuncMaps[n]){if(1!=JSON.parse(t).ret)return void console.error("ws onReceive err:",t);console.info("ws onReceive:",t);var o=this.recFuncMaps[n];o.handler.call(o.thisObj,t)}},e.prototype.onClose=function(e){this.status=o.NetSocketStatus.Disconnect,console.log("[socket] server close!"),null!=this.onSocketFunc&&null!=this.funcObj&&this.onSocketFunc.call(this.funcObj,this.status)},e.prototype.onError=function(e){this.status=o.NetSocketStatus.Error,console.error("[socket] connect server error!"),null!=this.onSocketFunc&&null!=this.funcObj&&this.onSocketFunc.call(this.funcObj,this.status)},e}();n.NetSocket=r;var a=function(){return function(){}}();cc._RF.pop()},{"./HostAdress":"HostAdress","./INetSocket":"INetSocket"}],NetUtil:[function(e,t,n){"use strict";cc._RF.push(t,"867e3NGaCtMwqduc/0zECu5","NetUtil"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return Object.defineProperty(e,"ApcData",{get:function(){return this._ApcData},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MessageData",{get:function(){return this._MessageData},enumerable:!0,configurable:!0}),e}();n.NetUtil=o,cc._RF.pop()},{}],PropShop:[function(e,t,n){"use strict";cc._RF.push(t,"6b84dsFBR9Iv5G6Qhi6RMv8","PropShop"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/UIManager"),i=e("../manager/BagManager"),r=e("../Define/BagType"),a=e("../protocols/GameProto"),s=e("../Net/BagPacket"),c=e("../manager/AudioManager"),u=e("./BaseUI"),h=e("../Tool/shader/ShaderManager"),p=e("../manager/UserManager"),l=e("../Tool/Logger"),g=cc._decorator,f=g.ccclass,d=g.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hero=null,t.heroSkeleton=null,t.topTabArr={},t.curTopTab=r.EquipmentType.Weapon,t.rightTabArr={},t.curRightTab=0,t.equip_child=null,t.child_scollview=null,t.child_item=null,t}return __extends(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){},this),a.GameProto.Instance.requestGetItemList(new s.CS_GetItemList),this.initTabTop(),this.initTabRight(),this.touchTabTop(r.EquipmentType.Weapon),this.hero.active=!0,this.heroSkeleton=this.hero.getComponent(sp.Skeleton),this.showHero()},t.prototype.menu=function(e,t){c.AudioManager.Instance.playEff(c.AudioType.EFF_Touch),"close"==t&&o.UIManager.Instance.closeWindow("PropShop"),"left"==t&&this.touchLeft(),"right"==t&&this.touchRight(),"upgrade"==t&&(l.Logger.info("\u70b9\u51fb\u5347\u7ea7"),this.touchUpgrade()),"advanced"==t&&(l.Logger.info("\u70b9\u51fb\u8fdb\u9636"),this.touchAdvanced()),"equip"==t&&(l.Logger.info("\u70b9\u51fb\u88c5\u5907\u6216\u8d2d\u4e70"),this.touchEquip()),"weapon"==t&&(l.Logger.info("\u70b9\u51fb\u6b66\u5668"),this.touchTabTop(r.EquipmentType.Weapon)),"hat"==t&&(l.Logger.info("\u70b9\u51fb\u5e3d\u5b50"),this.touchTabTop(r.EquipmentType.Hat)),"bizhang"==t&&(l.Logger.info("\u70b9\u51fb\u81c2\u7ae0"),this.touchTabTop(r.EquipmentType.Armband)),"clothes"==t&&(l.Logger.info("\u70b9\u51fb\u8863\u670d"),this.touchTabTop(r.EquipmentType.Clothes)),"mask"==t&&(l.Logger.info("\u70b9\u51fb\u9762\u5177"),this.touchTabTop(r.EquipmentType.Mask)),"action"==t&&(l.Logger.info("\u70b9\u51fb\u52a8\u4f5c"),this.touchTabTop(r.EquipmentType.Action)),"t1"==t&&(l.Logger.info("\u70b9\u51fbt1"),this.touchTabRight(0)),"t2"==t&&(l.Logger.info("\u70b9\u51fbt2"),this.touchTabRight(1)),"t3"==t&&(l.Logger.info("\u70b9\u51fbt3"),this.touchTabRight(2)),"t4"==t&&(l.Logger.info("\u70b9\u51fbt4"),this.touchTabRight(3)),"playTest"==t&&this.playTest()},t.prototype.initTabTop=function(){this.topTabArr={},this.topTabArr[r.EquipmentType.Weapon]=this.node.getChildByName("menu").getChildByName("weapon"),this.topTabArr[r.EquipmentType.Mask]=this.node.getChildByName("menu").getChildByName("mask"),this.topTabArr[r.EquipmentType.Hat]=this.node.getChildByName("menu").getChildByName("hat"),this.topTabArr[r.EquipmentType.Armband]=this.node.getChildByName("menu").getChildByName("bizhang"),this.topTabArr[r.EquipmentType.Clothes]=this.node.getChildByName("menu").getChildByName("clothes"),this.topTabArr[r.EquipmentType.Action]=this.node.getChildByName("menu").getChildByName("action")},t.prototype.initTabRight=function(){this.activeRightTab(r.EquipmentType.Weapon==this.curTopTab,1),this.activeRightTab(r.EquipmentType.Weapon==this.curTopTab,2),this.activeRightTab(r.EquipmentType.Weapon==this.curTopTab,3),this.activeRightTab(r.EquipmentType.Weapon==this.curTopTab,4),this.rightTabArr={},this.rightTabArr[0]=this.node.getChildByName("menu").getChildByName("T1_di"),this.lockRightTab(!0,2),this.lockRightTab(!0,3),this.lockRightTab(!0,4);var e=i.BagManager.Instance.getBagInfo().myKeepEquipment[r.EquipmentTypeName[this.curTopTab-1]];if(e.getShow()){var t=e.getMaxStage();t>1&&(this.rightTabArr[1]=this.node.getChildByName("menu").getChildByName("T2_di"),this.lockRightTab(!1,2)),t>2&&(this.rightTabArr[2]=this.node.getChildByName("menu").getChildByName("T3_di"),this.lockRightTab(!1,3)),t>3&&(this.rightTabArr[3]=this.node.getChildByName("menu").getChildByName("T4_di"),this.lockRightTab(!1,4))}this.touchTabRight(this.curRightTab)},t.prototype.lockRightTab=function(e,t){var n="T"+t+"_di";(this.node.getChildByName("menu").getChildByName(n).getComponent(cc.Sprite).enabled=!1,this.node.getChildByName("menu").getChildByName(n).getComponent(cc.Button).interactable=!1,e)?this.node.getChildByName("menu").getChildByName(n).getChildByName("icon").getComponent("ShaderComponent").shader=h.ShaderType.Gray:this.node.getChildByName("menu").getChildByName(n).getChildByName("icon").getComponent("ShaderComponent").shader=h.ShaderType.Default},t.prototype.activeRightTab=function(e,t){var n="T"+t+"_di";this.node.getChildByName("menu").getChildByName(n).active=e},t.prototype.updateUI=function(){this.showHero(),this.refreshEquipBtn(),this.refreshChildWin(),this.initTabRight()},t.prototype.touchTabTop=function(e){if(this.topTabArr.hasOwnProperty(e)){for(var t in this.curTopTab=e,this.topTabArr)if(this.topTabArr.hasOwnProperty(t)){var n=this.topTabArr[t],o=n.getChildByName("huangdi");t==e?(o.getComponent(cc.Sprite).enabled=!0,n.getComponent(cc.Button).interactable=!1):(o.getComponent(cc.Sprite).enabled=!1,n.getComponent(cc.Button).interactable=!0)}this.refreshEquipBtn(),this.refreshChildWin(),this.curRightTab=0,this.initTabRight()}},t.prototype.touchTabRight=function(e){if(this.rightTabArr.hasOwnProperty(e)){for(var t in this.curRightTab=e,this.rightTabArr)if(this.rightTabArr.hasOwnProperty(t)){var n=this.rightTabArr[t];t==e?(n.getComponent(cc.Sprite).enabled=!0,n.getComponent(cc.Button).interactable=!1):(n.getComponent(cc.Sprite).enabled=!1,n.getComponent(cc.Button).interactable=!0)}i.BagManager.Instance.getBagInfo().myKeepEquipment[r.EquipmentTypeName[this.curTopTab-1]].showStage(this.curRightTab+1),this.showHero(),this.refreshEquipBtn(),this.refreshChildWin()}},t.prototype.refreshChildWin=function(){var e=i.BagManager.Instance.getBagInfo().myKeepEquipment[r.EquipmentTypeName[this.curTopTab-1]];if(e.getShow()){this.equip_child.getChildByName("level").getComponent(cc.Label).string="LV"+e.getShow().lv,this.equip_child.getChildByName("name").getComponent(cc.Label).string=e.getShow().Name.toString(),this.equip_child.getChildByName("introduce ").getComponent(cc.Label).string=e.getShow().Desc.toString();var t=[];e.getShow().Range>0&&t.push({icon:"PreLoadRes/texture/shuxing_1",number:e.getShow().Range}),e.getShow().Soul>0&&t.push({icon:"PreLoadRes/texture/shuxing_2",number:e.getShow().Soul}),e.getShow().Shock>0&&t.push({icon:"PreLoadRes/texture/shuxing_3",number:e.getShow().Shock}),e.getShow().SlowTime>0&&t.push({icon:"PreLoadRes/texture/shuxing_4",number:e.getShow().SlowTime}),this.updateChildScroll(t)}else l.Logger.info("refreshChildWin \u65e0\u6548\u7684\u88c5\u5907",r.EquipmentTypeName[this.curTopTab-1])},t.prototype.updateChildScroll=function(e){l.Logger.info("\u66f4\u65b0\u5c5e\u6027\u5217\u8868:",e);var t=this.child_scollview.getComponent(cc.ScrollView);if(t.content.removeAllChildren(),!(e.length<=0)){this.node.active=!0;var n=this.child_item.width+20;this.child_item.height;t.content.width=e.length*n;for(var o=0;o<e.length;o++){var i=e[o],r=cc.instantiate(this.child_item);r.active=!0,t.content.addChild(r),r.myflag=o,r.setPosition(cc.v2(o*n+n/2,0)),r.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i.icon),r.getChildByName("num").getComponent(cc.Label).string=i.number}}},t.prototype.refreshEquipBtn=function(){var e=i.BagManager.Instance.getBagInfo().myKeepEquipment[r.EquipmentTypeName[this.curTopTab-1]];if(e.getShow()){if(e.getShow()){if(e.showID==e.selectID)return this.node.getChildByName("menu").getChildByName("equip").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame("PreLoadRes/texture/btn_yizhuangb"),void(this.node.getChildByName("menu").getChildByName("equip").getComponent(cc.Button).interactable=!1);this.node.getChildByName("menu").getChildByName("equip").getComponent(cc.Button).interactable=!0,e.getShow().canEquip?this.node.getChildByName("menu").getChildByName("equip").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame("PreLoadRes/texture/btn_zhuangbei"):e.getShow().canBuy&&(this.node.getChildByName("menu").getChildByName("equip").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame("PreLoadRes/texture/btn_goumai"))}}else l.Logger.info("refreshEquipBtn \u65e0\u6548\u7684\u88c5\u5907",r.EquipmentTypeName[this.curTopTab-1],e)},t.prototype.touchAdvanced=function(){var e=this.curRightTab+1;e<0&&e>=4||this.touchTabRight(e)},t.prototype.touchUpgrade=function(){var e=i.BagManager.Instance.getBagInfo().myKeepEquipment[r.EquipmentTypeName[this.curTopTab-1]];if(e.getShow()){var t=new s.CS_UpGradeEquip;t.equipId=e.getShow().Id,t.equipType=e.getShow().Itemtype,a.GameProto.Instance.requestUpGradeEquip(t)}else l.Logger.info("touchUpgrade \u65e0\u6548\u7684\u88c5\u5907",r.EquipmentTypeName[this.curTopTab-1])},t.prototype.touchEquip=function(){var e=i.BagManager.Instance.getBagInfo().myKeepEquipment[r.EquipmentTypeName[this.curTopTab-1]];if(e.getShow()){if(e.getShow().canEquip){if((n=new s.CS_WearEquip).equipId=e.getShow().Id,n.equipType=e.getShow().Itemtype,a.GameProto.Instance.requestWearEquip(n),p.UserManager.Instance.getUserInfo().uid<=0){var t=e.showID;e.selectById(t),this.refreshEquipBtn()}}else if(e.getShow().canBuy){var n;(n=new s.CS_ShopBuyInfo).Id=e.getShow().Id,n.shopType=e.getShow().Itemtype,n.chargeId=0,a.GameProto.Instance.requestShopBuyInfo(n)}}else l.Logger.info("touchEquip \u65e0\u6548\u7684\u88c5\u5907",r.EquipmentTypeName[this.curTopTab-1])},t.prototype.playTest=function(){var e="quan";if(i.BagManager.Instance.getBagInfo().myKeepEquipment.weapon.getShow()){var t=(e=i.BagManager.Instance.getBagInfo().myKeepEquipment.weapon.getShow().Modelid).split("|");e=t[0]}for(var n=this.heroSkeleton._skeleton,o=[],r=0;r<n.data.animations.length;r++){var a=n.data.animations[r];a.name.indexOf(e+"_idle")>=0&&o.push(a.name),a.name.indexOf(e+"_atk")>=0&&o.push(a.name)}var s=o[Math.floor(Math.random()*o.length)];if(s.indexOf("idle")>=0)this.setHeroAnimation(0,s,!0);else{var c=this,u=this.setHeroAnimation(0,s,!1);this.heroSkeleton.setTrackCompleteListener(u,function(t,n){c.setHeroAnimation(0,e+"_idle",!0)})}},t.prototype.touchLeft=function(){i.BagManager.Instance.getBagInfo().myKeepEquipment[r.EquipmentTypeName[this.curTopTab-1]].showBack(1),this.showHero(),this.refreshEquipBtn(),this.curRightTab=0,this.initTabRight()},t.prototype.touchRight=function(){i.BagManager.Instance.getBagInfo().myKeepEquipment[r.EquipmentTypeName[this.curTopTab-1]].showNext(1),this.showHero(),this.refreshEquipBtn(),this.curRightTab=0,this.initTabRight()},t.prototype.showHero=function(){if(this.heroSkeleton){this.heroSkeleton.setSkin("a");var e="";if(i.BagManager.Instance.getBagInfo().myKeepEquipment.weapon.getShow()){var t=(e=i.BagManager.Instance.getBagInfo().myKeepEquipment.weapon.getShow().Modelid).split("|");this.setHeroAnimation(0,t[0]+"_idle",!0),l.Logger.info("\u6b66\u5668:",t);var n=this.heroSkeleton.findSlot("wuqi_a1");n.setAttachment(null);var o=this.heroSkeleton.findSlot("a/wuqi01");if(o.setAttachment(null),t.length>1){var r=this.heroSkeleton.getAttachment("wuqi_a1",t[1]);r&&n.setAttachment(r)}if(t.length>2){var a=this.heroSkeleton.getAttachment("a/wuqi01",t[2]);a&&o.setAttachment(a)}}i.BagManager.Instance.getBagInfo().myKeepEquipment.hat.getShow()&&(e=i.BagManager.Instance.getBagInfo().myKeepEquipment.hat.getShow().Modelid,l.Logger.info("\u5e3d\u5b50:",e)),i.BagManager.Instance.getBagInfo().myKeepEquipment.armband.getShow()&&(e=i.BagManager.Instance.getBagInfo().myKeepEquipment.armband.getShow().Modelid,l.Logger.info("\u81c2\u7ae0:",e)),i.BagManager.Instance.getBagInfo().myKeepEquipment.clothes.getShow()&&(e=i.BagManager.Instance.getBagInfo().myKeepEquipment.clothes.getShow().Modelid,l.Logger.info("\u8863\u670d:",e)),i.BagManager.Instance.getBagInfo().myKeepEquipment.mask.getShow()&&(e=i.BagManager.Instance.getBagInfo().myKeepEquipment.mask.getShow().Modelid,l.Logger.info("\u9762\u5177:",e)),i.BagManager.Instance.getBagInfo().myKeepEquipment.action.getShow()&&(e=i.BagManager.Instance.getBagInfo().myKeepEquipment.action.getShow().Modelid,l.Logger.info("\u52a8\u4f5c:",e))}},t.prototype.setHeroAnimation=function(e,t,n){return this.heroSkeleton.findAnimation(t)?this.heroSkeleton.setAnimation(e,t,n):null},__decorate([d(cc.Node)],t.prototype,"hero",void 0),__decorate([d(cc.Node)],t.prototype,"equip_child",void 0),__decorate([d(cc.Node)],t.prototype,"child_scollview",void 0),__decorate([d(cc.Node)],t.prototype,"child_item",void 0),t=__decorate([f],t)}(u.BaseUI);n.PropShop=m,cc._RF.pop()},{"../Define/BagType":"BagType","../Net/BagPacket":"BagPacket","../Tool/Logger":"Logger","../Tool/shader/ShaderManager":"ShaderManager","../manager/AudioManager":"AudioManager","../manager/BagManager":"BagManager","../manager/UIManager":"UIManager","../manager/UserManager":"UserManager","../protocols/GameProto":"GameProto","./BaseUI":"BaseUI"}],RankInfo:[function(e,t,n){"use strict";cc._RF.push(t,"e982636rZ5IOo8ClHtanF9C","RankInfo"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(){this.allrankArr=new Array,this.dayrankArr=new Array,this.combatrankArr=new Array}}();n.RankInfo=o,cc._RF.pop()},{}],RankManager:[function(e,t,n){"use strict";cc._RF.push(t,"a4671xK37pNybRnrrG2iyOs","RankManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Define/RankInfo"),i=e("./UIManager"),r=function(){function e(){this.rankInfo=new o.RankInfo}return Object.defineProperty(e,"Instance",{get:function(){return null==this.instance&&(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.getRankInfo=function(){return this.rankInfo},e.prototype.refreshAllRank=function(e){this.rankInfo.allrankArr=e.rankList;var t=i.UIManager.Instance.findComponent("rank");t&&t.updateRankView()},e.prototype.refreshDayRank=function(e){this.rankInfo.dayrankArr=e.rankList;var t=i.UIManager.Instance.findComponent("everydayrank");t&&t.updateRankView()},e.prototype.refreshCombatRank=function(e){this.rankInfo.combatrankArr=e.rankList;var t=i.UIManager.Instance.findComponent("combatrank");t&&t.updateRankView()},e}();n.RankManager=r,cc._RF.pop()},{"../Define/RankInfo":"RankInfo","./UIManager":"UIManager"}],RankView_Combat:[function(e,t,n){"use strict";cc._RF.push(t,"6fc54NbjatKmpMnba6HSYbo","RankView_Combat"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../../manager/UserManager"),r=e("../../Tool/Logger"),a=cc._decorator,s=a.ccclass,c=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankScroll=null,t.rankItem=null,t.selfItem=null,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.setCombatRankList=function(e){this.updateRankScroll(this.getRankInfo(e))},t.prototype.updateRankScroll=function(e){r.Logger.info("\u66f4\u65b0 RankView.updateRankScroll:",e);var t=this.rankScroll.getComponent(cc.ScrollView);if(t.content.removeAllChildren(),!(e.length<=0)){this.node.active=!0;var n=this.rankItem.height+10;t.content.height=e.length*n;for(var a=0;a<e.length;a++){var s=e[a],c=cc.instantiate(this.rankItem);c.active=!0,t.content.addChild(c),c.setPosition(cc.v2(0,-a*n-n/2));var u=c.getChildByName("iconMask").getChildByName("head");this.loadHttpIcon(u,s.ran_picUrl,function(){}),c.getChildByName("name").getComponent(cc.Label).string=s.ran_nickName,c.getChildByName("combat").getComponent(cc.Label).string=s.ran_combat,c.getChildByName("rank").getComponent(cc.Label).string="NO."+(a+1),parseInt(s.ran_id)==i.UserManager.Instance.getUserInfo().uid+1e4?(o=a+1,this.setmyrank(e[a])):this.selfItem.active=!0}}},t.prototype.setmyrank=function(e){this.selfItem.getChildByName("myname").getComponent(cc.Label).string=i.UserManager.Instance.getUserInfo().nickName;var t=this.selfItem.getChildByName("myhead");this.loadHttpIcon(t,i.UserManager.Instance.getUserInfo().avatarUrl,function(){}),this.selfItem.getChildByName("combat").getComponent(cc.Label).string=e.ran_combat,this.selfItem.getChildByName("myrank").getComponent(cc.Label).string="NO."+o},t.prototype.getRankInfo=function(e){for(var t=new Array,n=0;n<e.length;n++)t.push(e[n]);return t},t.prototype.loadHttpIcon=function(e,t,n){t&&""!=t||(t="http://thirdwx.qlogo.cn/mmopen/vi_32/opmkDJhG2jpF8X8AfFQfTauRlpBc7VeFicJevZ9IiajEl5g4ia75opNSZOb0FvDV87BvpUN1rsyctibGnicP7uibsMtw/132"),cc.loader.load({url:t,type:"png"},function(t,o){var i=new cc.SpriteFrame(o);e.getComponent(cc.Sprite).spriteFrame=i,n&&n(),r.Logger.info("Should load a texture from RESTful API by specify the type: "+(o instanceof cc.Texture2D))})},__decorate([c(cc.Node)],t.prototype,"rankScroll",void 0),__decorate([c(cc.Node)],t.prototype,"rankItem",void 0),__decorate([c(cc.Node)],t.prototype,"selfItem",void 0),t=__decorate([s],t)}(cc.Component);n.RankView_Combat=u,cc._RF.pop()},{"../../Tool/Logger":"Logger","../../manager/UserManager":"UserManager"}],RankView:[function(e,t,n){"use strict";cc._RF.push(t,"fae8fL5+MxBYqegeL7qhKZ1","RankView"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("../../manager/UserManager"),r=e("../../manager/UIManager"),a=e("../../Tool/Logger"),s=cc._decorator,c=s.ccclass,u=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankScroll=null,t.rankItem=null,t.selfItem=null,t.ranklable=null,t.rankAwardView=null,t.isShowAward=!1,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.setAllRankList=function(e){this.updateRankScroll(this.getRankInfo(e))},t.prototype.setDayRankList=function(e){this.updateRankScroll(this.getRankInfo(e))},t.prototype.menu=function(e,t){"RankAward"==t&&(this.isShowAward?this.showRankList():this.showAwardList())},t.prototype.showRankList=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.isShowAward=!1,this.node.getChildByName("rankaward")&&(this.node.getChildByName("rankaward").active=!1),this.ranklable.getComponent(cc.Label).string="\u5956\u52b1\u4fe1\u606f",this.rankScroll.active=!0,this.node.getChildByName("listTop").active=!0,[2]})})},t.prototype.showAwardList=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.isShowAward=!0,this.ranklable.getComponent(cc.Label).string="\u6392\u884c\u4fe1\u606f",this.node.getChildByName("rankaward")?[3,2]:[4,r.UIManager.Instance.createPrefab("rankaward")];case 1:e=t.sent(),this.rankAwardView=e.node,this.node.addChild(this.rankAwardView),t.label=2;case 2:return this.node.getChildByName("rankaward").active=!0,this.rankScroll.active=!1,this.node.getChildByName("listTop").active=!1,[2]}})})},t.prototype.updateRankScroll=function(e){a.Logger.info("\u66f4\u65b0 RankView.updateRankScroll:",e);var t=this.rankScroll.getComponent(cc.ScrollView);if(t.content.removeAllChildren(),!(e.length<=0)){this.node.active=!0;var n=this.rankItem.height+9;t.content.height=e.length*n;for(var r=0;r<e.length;r++){var s=e[r],c=cc.instantiate(this.rankItem);c.active=!0,t.content.addChild(c),c.setPosition(cc.v2(0,-r*n-n/2));var u=c.getChildByName("iconMask").getChildByName("head");this.loadHttpIcon(u,s.ran_picUrl,function(){}),c.getChildByName("name").getComponent(cc.Label).string=s.ran_nickName,c.getChildByName("score").getComponent(cc.Label).string=s.ran_score,c.getChildByName("layer").getComponent(cc.Label).string=s.ran_stage,c.getChildByName("rank").getComponent(cc.Label).string="NO."+(r+1),i.UserManager.Instance.getUidByRankId(parseInt(s.ran_id))==i.UserManager.Instance.getUserInfo().uid?(o=r+1,this.setmyrank(e[r])):this.selfItem.active=!0}}},t.prototype.setmyrank=function(e){this.selfItem.getChildByName("myname").getComponent(cc.Label).string=i.UserManager.Instance.getUserInfo().nickName;var t=this.selfItem.getChildByName("myhead");this.loadHttpIcon(t,i.UserManager.Instance.getUserInfo().avatarUrl,function(){}),this.selfItem.getChildByName("myscore").getComponent(cc.Label).string=e.ran_score,this.selfItem.getChildByName("mylayer").getComponent(cc.Label).string=e.ran_stage,this.selfItem.getChildByName("myrank").getComponent(cc.Label).string="NO."+o},t.prototype.getRankInfo=function(e){for(var t=new Array,n=0;n<e.length;n++)t.push(e[n]);return t},t.prototype.loadHttpIcon=function(e,t,n){t&&""!=t||(t="http://thirdwx.qlogo.cn/mmopen/vi_32/opmkDJhG2jpF8X8AfFQfTauRlpBc7VeFicJevZ9IiajEl5g4ia75opNSZOb0FvDV87BvpUN1rsyctibGnicP7uibsMtw/132"),cc.loader.load({url:t,type:"png"},function(t,o){var i=new cc.SpriteFrame(o);e.getComponent(cc.Sprite).spriteFrame=i,n&&n(),a.Logger.info("Should load a texture from RESTful API by specify the type: "+(o instanceof cc.Texture2D))})},__decorate([u(cc.Node)],t.prototype,"rankScroll",void 0),__decorate([u(cc.Node)],t.prototype,"rankItem",void 0),__decorate([u(cc.Node)],t.prototype,"selfItem",void 0),__decorate([u(cc.Node)],t.prototype,"ranklable",void 0),t=__decorate([c],t)}(cc.Component);n.RankView=h,cc._RF.pop()},{"../../Tool/Logger":"Logger","../../manager/UIManager":"UIManager","../../manager/UserManager":"UserManager"}],ReadCsvConfig:[function(e,t,n){"use strict";cc._RF.push(t,"31b47tmV/tNkLpXho9fVO4a","ReadCsvConfig"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Csv/itemCsv"),i=e("../Csv/weaponCsv"),r=e("../Csv/equipCsv"),a=e("../Csv/caseCsv"),s=function(){function e(){}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.getItemInfo=function(e){var t=Math.floor(e/1e4);return 10==t?o.itemCsvManage.instance.GetItem(e):11==t?i.weaponCsvManage.instance.GetItem(e):12==t?r.equipCsvManage.instance.GetItem(e):13==t?a.caseCsvManage.instance.GetItem(e):void console.error("6\u4f4dID \u524d\u4e24\u4f4d\u9700\u8981\u6ee1\u8db3 10 item  11 weapon 12 equip 13 case"+e)},e}();n.default=s,cc._RF.pop()},{"../Csv/caseCsv":"caseCsv","../Csv/equipCsv":"equipCsv","../Csv/itemCsv":"itemCsv","../Csv/weaponCsv":"weaponCsv"}],Recharge:[function(e,t,n){"use strict";cc._RF.push(t,"b097aTmmQxDFbgpd9nEZN+/","Recharge"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/UIManager"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item=null,t}return __extends(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){},this)},t.prototype.menu=function(e,t){"close"==t&&o.UIManager.Instance.closeWindow("Recharge")},__decorate([a(cc.Label)],t.prototype,"item",void 0),t=__decorate([r],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../manager/UIManager":"UIManager"}],Setting:[function(e,t,n){"use strict";cc._RF.push(t,"0c899/EmOVL4a/8CcFdL8oG","Setting"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/AudioManager"),i=e("../manager/UIManager"),r=e("../Fight/FightManager"),a=e("../Tool/Logger"),s=cc._decorator,c=s.ccclass,u=s.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.font_zantingz=null,t.font_shezhi=null,t.yinxiao=null,t.yinyue=null,t}return __extends(t,e),t.prototype.start=function(){this.refreshUI()},t.prototype.refreshUI=function(){"FightScene"==cc.director.getScene().name?(this.node.getChildByName("menu").getChildByName("continue").active=!0,this.node.getChildByName("menu").getChildByName("back").active=!0,cc.director.pause()):(this.node.getChildByName("menu").getChildByName("continue").active=!1,this.node.getChildByName("menu").getChildByName("back").active=!1),a.Logger.info("AudioManager.Instance.music_on",o.AudioManager.Instance.music_on),this.setMusicState(o.AudioManager.Instance.music_on),this.setSoundState(o.AudioManager.Instance.sound_on)},t.prototype.menu=function(e,t){o.AudioManager.Instance.playEff(o.AudioType.EFF_Touch),"close"==t&&this.touchContinue(),"continue"==t&&this.touchContinue(),"back"==t&&this.touchBack(),"music_on"==t&&this.touchMusic(),"sound_on"==t&&this.touchSound()},t.prototype.touchContinue=function(){i.UIManager.Instance.closeWindow("Setting"),cc.director.resume()},t.prototype.touchBack=function(){cc.director.resume(),r.FightManager.Instance.exitGame()},t.prototype.touchMusic=function(){o.AudioManager.Instance.music_on=!o.AudioManager.Instance.music_on,this.refreshUI()},t.prototype.touchSound=function(){o.AudioManager.Instance.sound_on=!o.AudioManager.Instance.sound_on,this.refreshUI()},t.prototype.setMusicState=function(e){e?(this.yinyue.getChildByName("icon").getChildByName("close").active=!1,this.yinyue.getChildByName("select").getChildByName("off").active=!1,this.yinyue.getChildByName("select").getChildByName("on").active=!0):(this.yinyue.getChildByName("icon").getChildByName("close").active=!0,this.yinyue.getChildByName("select").getChildByName("off").active=!0,this.yinyue.getChildByName("select").getChildByName("on").active=!1)},t.prototype.setSoundState=function(e){e?(this.yinxiao.getChildByName("icon").getChildByName("close").active=!1,this.yinxiao.getChildByName("select").getChildByName("off").active=!1,this.yinxiao.getChildByName("select").getChildByName("on").active=!0):(this.yinxiao.getChildByName("icon").getChildByName("close").active=!0,this.yinxiao.getChildByName("select").getChildByName("off").active=!0,this.yinxiao.getChildByName("select").getChildByName("on").active=!1)},__decorate([u(cc.Node)],t.prototype,"title",void 0),__decorate([u(cc.SpriteFrame)],t.prototype,"font_zantingz",void 0),__decorate([u(cc.SpriteFrame)],t.prototype,"font_shezhi",void 0),__decorate([u(cc.Node)],t.prototype,"yinxiao",void 0),__decorate([u(cc.Node)],t.prototype,"yinyue",void 0),t=__decorate([c],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../Fight/FightManager":"FightManager","../Tool/Logger":"Logger","../manager/AudioManager":"AudioManager","../manager/UIManager":"UIManager"}],ShaderComponent:[function(e,t,n){"use strict";cc._RF.push(t,"a070aVds2pHIa61T6DVLeGp","ShaderComponent"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./ShaderManager"),i=cc._decorator,r=i.ccclass,a=i.property,s=i.requireComponent,c=i.executeInEditMode,u=[o.ShaderType.Fluxay,o.ShaderType.FluxaySuper,o.ShaderType.Streamer],h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._shader=o.ShaderType.Default,t._color=cc.color(),t._start=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"shader",{get:function(){return this._shader},set:function(e){this._shader=e,this._applyShader()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this._material},enumerable:!0,configurable:!0}),t.prototype.start=function(){this.getComponent(cc.Sprite).setState(0),this._applyShader()},t.prototype.update=function(e){this._material&&(this._setShaderColor(),this._setShaderTime(e))},t.prototype._applyShader=function(){var e=this._shader,t=this.getComponent(cc.Sprite),n=o.default.useShader(t,e);this._material=n,this._start=0;var i=this._color;if(i.setR(255),i.setG(255),i.setB(255),i.setA(255),n){switch(e){case o.ShaderType.Blur:case o.ShaderType.GaussBlur:n.setNum(.03)}this._setShaderColor()}},t.prototype._setShaderColor=function(){var e=this.node,t=e.color,n=this._color,o=t.getR(),i=t.getG(),r=t.getB(),a=e.opacity,s=!1;n.getR()!==o&&(n.setR(o),s=!0),n.getG()!==i&&(n.setG(i),s=!0),n.getB()!==r&&(n.setB(r),s=!0),n.getA()!==a&&(n.setA(a),s=!0),s&&this._material.setColor(o/255,i/255,r/255,a/255)},t.prototype._setShaderTime=function(e){if(u.indexOf(this._shader)>=0){var t=this._start;t>65535&&(t=0),t+=e,this._material.setTime(t),this._start=t}},__decorate([a({type:cc.Enum(o.ShaderType),visible:!1})],t.prototype,"_shader",void 0),__decorate([a({type:cc.Enum(o.ShaderType)})],t.prototype,"shader",null),t=__decorate([r,c,s(cc.Sprite)],t)}(cc.Component);n.default=h,cc._RF.pop()},{"./ShaderManager":"ShaderManager"}],ShaderLab:[function(e,t,n){"use strict";cc._RF.push(t,"64308h3gU1NYa8fFqwQgRn6","ShaderLab"),Object.defineProperty(n,"__esModule",{value:!0});var o="\nuniform mat4 viewProj;\nattribute vec3 a_position;\nattribute vec2 a_uv0;\nvarying vec2 uv0;\nvoid main () {\n    vec4 pos = viewProj * vec4(a_position, 1);\n    gl_Position = pos;\n    uv0 = a_uv0;\n}",i={GrayScaling:{vert:o,frag:"\n        uniform sampler2D texture;\n        uniform vec4 color;\n        varying vec2 uv0;\n        void main () {\n            vec4 c = color * texture2D(texture, uv0);\n            float gray = dot(c.rgb, vec3(0.299 * 0.5, 0.587 * 0.5, 0.114 * 0.5));\n            gl_FragColor = vec4(gray, gray, gray, c.a * 0.5);\n        }\n        "},Stone:{vert:o,frag:"\n        uniform sampler2D texture;\n        uniform vec4 color;\n        varying vec2 uv0;\n        void main () {\n            vec4 c = color * texture2D(texture, uv0);\n            float clrbright = (c.r + c.g + c.b) * (1. / 3.);\n            float gray = (0.6) * clrbright;\n            gl_FragColor = vec4(gray, gray, gray, c.a);\n        }\n        "},Ice:{vert:o,frag:"\n        uniform sampler2D texture;\n        uniform vec4 color;\n        varying vec2 uv0;\n        void main () {\n            vec4 clrx = color * texture2D(texture, uv0);\n            float brightness = (clrx.r + clrx.g + clrx.b) * (1. / 3.);\n            float gray = (1.5)*brightness;\n            clrx = vec4(gray, gray, gray, clrx.a)*vec4(0.8,1.2,1.5,1);\n            gl_FragColor =clrx;\n        }\n        "},Frozen:{vert:o,frag:"\n        uniform sampler2D texture;\n        uniform vec4 color;\n        varying vec2 uv0;\n        void main () {\n            vec4 c = color * texture2D(texture, uv0);\n            c *= vec4(0.8, 1, 0.8, 1);\n            c.b += c.a * 0.2;\n            gl_FragColor = c;\n        }\n        "},Mirror:{vert:o,frag:"\n        uniform sampler2D texture;\n        uniform vec4 color;\n        varying vec2 uv0;\n        void main () {\n            vec4 c = color * texture2D(texture, uv0);\n            c.r *= 0.5;\n            c.g *= 0.8;\n            c.b += c.a * 0.2;\n            gl_FragColor = c;\n        }\n        "},Poison:{vert:o,frag:"\n        uniform sampler2D texture;\n        uniform vec4 color;\n        varying vec2 uv0;\n        void main () {\n            vec4 c = color * texture2D(texture, uv0);\n            c.r *= 0.8;\n            c.r += 0.08 * c.a;\n            c.g *= 0.8;\n            c.g += 0.2 * c.a;\n            c.b *= 0.8;\n            gl_FragColor = c;\n        }\n        "},Banish:{vert:o,frag:"\n        uniform sampler2D texture;\n        uniform vec4 color;\n        varying vec2 uv0;\n        void main () {\n            vec4 c = color * texture2D(texture, uv0);\n            float gg = (c.r + c.g + c.b) * (1.0 / 3.0);\n            c.r = gg * 0.9;\n            c.g = gg * 1.2;\n            c.b = gg * 0.8;\n            c.a *= (gg + 0.1);\n            gl_FragColor = c;\n        }\n        "},Vanish:{vert:o,frag:"\n        uniform sampler2D texture;\n        uniform vec4 color;\n        varying vec2 uv0;\n        void main () {\n            vec4 c = color * texture2D(texture, uv0);\n            float gray = (c.r + c.g + c.b) * (1. / 3.);\n            float rgb = gray * 0.8;\n            gl_FragColor = vec4(rgb, rgb, rgb, c.a * (gray + 0.1));\n        }\n        "},Invisible:{vert:o,frag:"\n        void main () {\n            gl_FragColor = vec4(0,0,0,0);\n        }\n        "},Blur:{vert:o,frag:"\n        uniform sampler2D texture;\n        uniform vec4 color;\n        uniform float num;\n        varying vec2 uv0;\n        void main () {\n            vec4 sum = vec4(0.0);\n            vec2 size = vec2(num,num);\n            sum += texture2D(texture, uv0 - 0.4 * size) * 0.05;\n            sum += texture2D(texture, uv0 - 0.3 * size) * 0.09;\n            sum += texture2D(texture, uv0 - 0.2 * size) * 0.12;\n            sum += texture2D(texture, uv0 - 0.1 * size) * 0.15;\n            sum += texture2D(texture, uv0             ) * 0.16;\n            sum += texture2D(texture, uv0 + 0.1 * size) * 0.15;\n            sum += texture2D(texture, uv0 + 0.2 * size) * 0.12;\n            sum += texture2D(texture, uv0 + 0.3 * size) * 0.09;\n            sum += texture2D(texture, uv0 + 0.4 * size) * 0.05;\n            \n            vec4 vectemp = vec4(0,0,0,0);\n            vec4 substract = vec4(0,0,0,0);\n            vectemp = (sum - substract) * color;\n\n            float alpha = texture2D(texture, uv0).a;\n            if(alpha < 0.05) { gl_FragColor = vec4(0 , 0 , 0 , 0); }\n            else { gl_FragColor = vectemp; }\n        }\n        "},GaussBlur:{vert:o,frag:"\n        #define repeats 5.\n        uniform sampler2D texture;\n        uniform vec4 color;\n        uniform float num;\n        varying vec2 uv0;\n\n        vec4 draw(vec2 uv) {\n            return color * texture2D(texture,uv).rgba; \n        }\n        float grid(float var, float size) {\n            return floor(var*size)/size;\n        }\n        float rand(vec2 co){\n            return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n        }\n        void main()\n        {\n            vec4 blurred_image = vec4(0.);\n            for (float i = 0.; i < repeats; i++) { \n                vec2 q = vec2(cos(degrees((i/repeats)*360.)),sin(degrees((i/repeats)*360.))) * (rand(vec2(i,uv0.x+uv0.y))+num); \n                vec2 uv2 = uv0+(q*num);\n                blurred_image += draw(uv2)/2.;\n                q = vec2(cos(degrees((i/repeats)*360.)),sin(degrees((i/repeats)*360.))) * (rand(vec2(i+2.,uv0.x+uv0.y+24.))+num); \n                uv2 = uv0+(q*num);\n                blurred_image += draw(uv2)/2.;\n            }\n            blurred_image /= repeats;\n            gl_FragColor = vec4(blurred_image);\n        }\n"},Dissolve:{vert:o,frag:"\n        uniform sampler2D texture;\n        uniform vec4 color;\n        uniform float time;\n        varying vec2 uv0;\n\n        void main()\n        {\n            vec4 c = color * texture2D(texture,uv0);\n            float height = c.r;\n            if(height < time)\n            {\n                discard;\n            }\n            if(height < time+0.04)\n            {\n                // \u6eb6\u89e3\u989c\u8272\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\n                c = vec4(.9,.6,0.3,c.a);\n            }\n            gl_FragColor = c;\n        }\n"},Fluxay:{vert:o,frag:"\n        uniform sampler2D texture;\n        uniform vec4 color;\n        uniform float time;\n        varying vec2 uv0;\n\n        void main()\n        {\n            vec4 src_color = color * texture2D(texture, uv0).rgba;\n\n            float width = 0.08;       //\u6d41\u5149\u7684\u5bbd\u5ea6\u8303\u56f4 (\u8c03\u6574\u8be5\u503c\u6539\u53d8\u6d41\u5149\u7684\u5bbd\u5ea6)\n            float start = tan(time/1.414);  //\u6d41\u5149\u7684\u8d77\u59cbx\u5750\u6807\n            float strength = 0.008;   //\u6d41\u5149\u589e\u4eae\u5f3a\u5ea6   (\u8c03\u6574\u8be5\u503c\u6539\u53d8\u6d41\u5149\u7684\u589e\u4eae\u5f3a\u5ea6)\n            float offset = 0.5;      //\u504f\u79fb\u503c         (\u8c03\u6574\u8be5\u503c\u6539\u53d8\u6d41\u5149\u7684\u503e\u659c\u7a0b\u5ea6)\n            if(uv0.x < (start - offset * uv0.y) &&  uv0.x > (start - offset * uv0.y - width))\n            {\n                vec3 improve = strength * vec3(255, 255, 255);\n                vec3 result = improve * vec3( src_color.r, src_color.g, src_color.b);\n                gl_FragColor = vec4(result, src_color.a);\n\n            }else{\n                gl_FragColor = src_color;\n            }\n        }\n        "},FluxaySuper:{vert:o,frag:"\n        #define TAU 6.12\n        #define MAX_ITER 5\n        uniform sampler2D texture;\n        uniform vec4 color;\n        uniform float time;\n        varying vec2 uv0;\n\n        void main()\n        {\n            float time = time * .5+5.;\n            // uv should be the 0-1 uv of texture...\n            vec2 uv = uv0.xy;//fragCoord.xy / iResolution.xy;\n            \n            vec2 p = mod(uv*TAU, TAU)-250.0;\n\n            vec2 i = vec2(p);\n            float c = 1.0;\n            float inten = .0045;\n\n            for (int n = 0; n < MAX_ITER; n++) \n            {\n                float t =  time * (1.0 - (3.5 / float(n+1)));\n                i = p + vec2(cos(t - i.x) + sin(t + i.y), sin(t - i.y) + cos(1.5*t + i.x));\n                c += 1.0/length(vec2(p.x / (cos(i.x+t)/inten),p.y / (cos(i.y+t)/inten)));\n            }\n            c /= float(MAX_ITER);\n            c = 1.17-pow(c, 1.4);\n            vec4 tex = texture2D(texture,uv);\n            vec3 colour = vec3(pow(abs(c), 20.0));\n            colour = clamp(colour + vec3(0.0, 0.0, .0), 0.0, tex.a);\n\n            // \u6df7\u5408\u6ce2\u5149\n            float alpha = c*tex[3];  \n            tex[0] = tex[0] + colour[0]*alpha; \n            tex[1] = tex[1] + colour[1]*alpha; \n            tex[2] = tex[2] + colour[2]*alpha; \n            gl_FragColor = color * tex;\n        }\n        "},Streamer:{vert:o,frag:"\n        uniform sampler2D texture;\n        uniform vec4 color;\n        uniform float time;\n        varying vec2 uv0;\n        void main()\n        {\n            vec4 src_color = color * texture2D(texture, uv0).rgba;\n            float width = 0.2;\n            float start = tan(time/1.2);\n            float strength = 0.02;\n            float offset = 0.5;\n            \n            if( uv0.x < (start - offset * uv0.y) &&  uv0.x > (start - offset * uv0.y - width))\n            {\n                vec3 improve = strength * vec3(0, 0, 255);\n                vec3 result = improve * vec3( src_color.r, src_color.g, src_color.b);\n                gl_FragColor = vec4(result, src_color.a);\n\n            } else {\n                gl_FragColor = src_color;\n            }\n        }\n        "}};n.default=i,cc._RF.pop()},{}],ShaderManager:[function(e,t,n){"use strict";cc._RF.push(t,"5229cjoHEFH+Lr32hdSx9QM","ShaderManager"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("./ShaderLab"),r=e("./ShaderMaterial");(function(e){e[e.Default=0]="Default",e[e.Gray=1]="Gray",e[e.GrayScaling=100]="GrayScaling",e[e.Stone=101]="Stone",e[e.Ice=102]="Ice",e[e.Frozen=103]="Frozen",e[e.Mirror=104]="Mirror",e[e.Poison=105]="Poison",e[e.Banish=106]="Banish",e[e.Vanish=107]="Vanish",e[e.Invisible=108]="Invisible",e[e.Blur=109]="Blur",e[e.GaussBlur=110]="GaussBlur",e[e.Dissolve=111]="Dissolve",e[e.Fluxay=112]="Fluxay",e[e.FluxaySuper=113]="FluxaySuper",e[e.Streamer=114]="Streamer"})(o=n.ShaderType||(n.ShaderType={}));var a=function(){function e(){}return e.useShader=function(e,t){if(cc.game.renderType!==cc.game.RENDER_TYPE_CANVAS){if(e&&e.spriteFrame&&e.getState()!==t){if(t>o.Gray){var n=o[t],a=i.default[n];if(!a)return void console.warn("Shader not defined",n);cc.dynamicAtlasManager.enabled=!1;var s=new r.default(n,a.vert,a.frag,a.defines||[]),c=e.spriteFrame.getTexture();s.setTexture(c),s.updateHash();var u=e;return u._material=s,u._renderData._material=s,u._state=t,s}e.setState(t)}}else console.warn("Shader not surpport for canvas")},e}();n.default=a,cc._RF.pop()},{"./ShaderLab":"ShaderLab","./ShaderMaterial":"ShaderMaterial"}],ShaderMaterial:[function(e,t,n){"use strict";cc._RF.push(t,"0ee17icNjxNJYe5ws9LdE3f","ShaderMaterial"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc.renderer.renderEngine,i=function(e){function t(t,n,o,i){var r=e.call(this,!1)||this,a=cc.renderer._forward._programLib;return!a._templates[t]&&a.define(t,n,o,i),r._init(t),r}return __extends(t,e),t.prototype._init=function(e){var t=o.renderer,n=o.gfx,i=new t.Pass(e);i.setDepth(!1,!1),i.setCullMode(n.CULL_NONE),i.setBlend(n.BLEND_FUNC_ADD,n.BLEND_SRC_ALPHA,n.BLEND_ONE_MINUS_SRC_ALPHA,n.BLEND_FUNC_ADD,n.BLEND_SRC_ALPHA,n.BLEND_ONE_MINUS_SRC_ALPHA);var r=new t.Technique(["transparent"],[{name:"texture",type:t.PARAM_TEXTURE_2D},{name:"color",type:t.PARAM_COLOR4},{name:"pos",type:t.PARAM_FLOAT3},{name:"size",type:t.PARAM_FLOAT2},{name:"time",type:t.PARAM_FLOAT},{name:"num",type:t.PARAM_FLOAT}],[i]);this._texture=null,this._color={r:1,g:1,b:1,a:1},this._pos={x:0,y:0,z:0},this._size={x:0,y:0},this._time=0,this._num=0,this._effect=this.effect=new t.Effect([r],{color:this._color,pos:this._pos,size:this._size,time:this._time,num:this._num},[]),this._mainTech=r},t.prototype.setTexture=function(e){this._texture=e,this._texture.update({flipY:!1,mipmap:!1}),this._effect.setProperty("texture",e.getImpl()),this._texIds.texture=e.getId()},t.prototype.setColor=function(e,t,n,o){this._color.r=e,this._color.g=t,this._color.b=n,this._color.a=o,this._effect.setProperty("color",this._color)},t.prototype.setPos=function(e,t,n){this._pos.x=e,this._pos.y=t,this._pos.z=n,this._effect.setProperty("pos",this._pos)},t.prototype.setSize=function(e,t){this._size.x=e,this._size.y=t,this._effect.setProperty("size",this._size)},t.prototype.setTime=function(e){this._time=e,this._effect.setProperty("time",this._time)},t.prototype.setNum=function(e){this._num=e,this._effect.setProperty("num",this._num)},t}(o.Material);n.default=i,cc._RF.pop()},{}],Shake:[function(e,t,n){"use strict";cc._RF.push(t,"26366+y5zlDK6CT/FurUBvD","Shake"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=(o.property,function(e){function t(t,n,o){var i=e.call(this)||this;return i._initial_x=0,i._initial_y=0,i._strength_x=0,i._strength_y=0,i.setDuration(t),i.initWithDuration(t,n,o),i}return __extends(t,e),t.prototype.initWithDuration=function(e,t,n){return cc.ActionInterval.prototype.initWithDuration.call(this,e),this._strength_x=t,this._strength_y=n,!0},t.prototype.update=function(e){var t=Math.floor(-this._strength_x+Math.random()*this._strength_x*2),n=Math.floor(-this._strength_y+Math.random()*this._strength_y*2);this.getTarget().setPosition(t+this._initial_x,n+this._initial_y)},t.prototype.startWithTarget=function(e){cc.ActionInterval.prototype.startWithTarget.call(this,e),this._initial_x=e.x,this._initial_y=e.y,this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y))},t.prototype.stop=function(){this.getTarget().setPosition(new cc.Vec2(this._initial_x,this._initial_y))},t=__decorate([i],t)}(cc.ActionInterval));n.Shake=r,cc.Shake=function(e,t,n){return new r(e,t,n)};var a=function(e){function t(t,n){var o=e.call(this)||this;return o._initial=0,o._zoomRatio=0,o.setDuration(t),o.initWithDuration(t,n),o}return __extends(t,e),t.prototype.initWithDuration=function(e,t){return cc.ActionInterval.prototype.initWithDuration.call(this,e),this._zoomRatio=t,!0},t.prototype.update=function(e){this.getTarget().getComponent(cc.Camera).zoomRatio=this._zoomRatio},t.prototype.startWithTarget=function(e){cc.ActionInterval.prototype.startWithTarget.call(this,e),this._initial=e.getComponent(cc.Camera).zoomRatio,this.getTarget().getComponent(cc.Camera).zoomRatio=this._initial},t.prototype.stop=function(){this.getTarget().getComponent(cc.Camera).zoomRatio=this._zoomRatio},t=__decorate([i],t)}(cc.ActionInterval);n.CameraScaleTo=a,cc.CameraScaleTo=function(e,t){return new a(e,t)},cc._RF.pop()},{}],SingletonFactory:[function(e,t,n){"use strict";cc._RF.push(t,"e1cecmn0dtHSLNMSJEPew4p","SingletonFactory"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.Instance=function(t){var n=t.name,o=e.map[n];return o||(o=new t,e.map[n]=o),o},e.map={},e}();n.SingletonFactory=o;var i=function(){function e(e,t){this.mCall=e,this.mCaller=t}return e.prototype.Invoke=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.mCall).call.apply(e,[this.mCaller].concat(t))},e.prototype.Clear=function(){this.mCall=null,this.mCaller=null},e}();n.CallObj=i;var r=function(){function e(){this.mCalls=new Array}return e.prototype.Add=function(e){this.mCalls.push(e)},e.prototype.Invoke=function(){for(var e=this.mCalls.length,t=this.mCalls,n=0;n<e;n++)t[n]()},e.prototype.InvokeAndClear=function(){this.Invoke(),this.mCalls=[]},e}();n.FunctionArry=r;var a=function(){function e(){this.mCalls=[],this.mWaitToDo=new r}return e.prototype.AddListen=function(e,t){var n=this;return this.mIsSendIng?this.mWaitToDo.Add(function(){n.AddListen(e,t)}):(this.callRemove(e,t),this.mCalls.push(new i(e,t))),this.SetRemoveCall(e,t)},e.prototype.callRemove=function(e,t){for(var n=this.mCalls.length-1;n>=0;n--){var o=this.mCalls[n];if(o.mCaller==t&&o.mCall==e){this.mCalls[n].Clear(),this.mCalls.splice(n,1);break}}},e.prototype.SetCall=function(e,t){null!=this.OnCall&&this.OnCall.Clear(),this.OnCall=null!=e?new i(e,t):null},e.prototype.SetRemoveCall=function(e,t){var n=this;return function(){n.RemoveListen(e,t)}},e.prototype.RemoveListen=function(e,t){var n=this;this.mIsSendIng?this.mWaitToDo.Add(function(){n.RemoveListen(e,t)}):this.callRemove(e,t)},e.prototype.Send=function(){for(var e,t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];this.mIsSendIng=!0;for(var i=this.mCalls.length,r=this.mCalls,a=0;a<i;a++)(e=r[a]).Invoke.apply(e,n);this.OnCall&&(t=this.OnCall).Invoke.apply(t,n),this.mIsSendIng=!1,this.WaiToDo()},e.prototype.Get=function(){for(var e,t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];this.mIsSendIng=!0;for(var i=null,r=this.mCalls.length,a=this.mCalls,s=0;s<r;s++)i=(e=a[s]).Invoke.apply(e,n);return this.OnCall&&(i=(t=this.OnCall).Invoke.apply(t,n)),this.mIsSendIng=!1,this.WaiToDo(),i},e.prototype.WaiToDo=function(){this.mWaitToDo.InvokeAndClear()},e.prototype.Clear=function(){this.mCalls=[],this.OnCall=void 0},e.prototype.isClear=function(){return!this.OnCall&&0==this.mCalls.length},e}();n.Signa=a;var s=function(){function e(){this._map={},this.mapID=[],this.mapO={},this.AllIDNum=0,this.UseIDnum=0,this.UpdateID()}return e.prototype.One=function(e){var t=e.name,n=this._map[t];return n||(n=new e,this._map[t]=n),n},e.prototype.UpdateID=function(){if(this.UseIDnum==this.AllIDNum){this.AllIDNum+=1e4;for(var e=this.mapID,t=this.AllIDNum-1;t>=this.UseIDnum;t--)e.push(t)}},e.prototype.GetID=function(){return this.UpdateID(),this.UseIDnum++,this.mapID.pop()},e.prototype.Get=function(e,t){var n=e.toString(),o=this.mapO[n];void 0===o&&(o={}),void 0===t.SID&&(t.SID=this.GetID());var i=o[t.SID];return void 0===i&&(i=new e,o[t.SID]=i),i},e.prototype.Clear=function(){var e=this._map;for(var t in e)e[t].Clear();this._map={};var n=this.mapO;for(var t in n){var o=n[t];for(var i in o)o[i].Clear();n[t]={}}this.mapO={}},e.Instance=new e,e}();n.SignaManger=s;var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.Call=function(){return this.Get()},t}(a);n.GetSigna=c;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.Call=function(e){return this.Send(e)},t}(a);n.SetSigna=u;var h=function(){function e(e){this.onUpdata=new a,this._obj=e}return e.prototype.set=function(e){this._obj=e,this.Send()},e.prototype.get=function(){return this._obj},Object.defineProperty(e.prototype,"Obj",{get:function(){return this._obj},set:function(e){this._obj=e,this.Send()},enumerable:!0,configurable:!0}),e.prototype.Send=function(){this.onUpdata.Send(this._obj)},e.prototype.Clear=function(){this._obj=void 0,this.onUpdata.Clear()},e}();n.MyUpateObj=h;var p=function(){function e(){this._data=[],this._noUseNum=0,this.Length=0}return e.prototype.Init=function(e){return this._default=e,e.Root=this,this.Add(e),this},e.prototype.Add=function(e){this._data.push(e),e.Id=this.Length,this._noUseNum+=1,this.Length+=1},e.prototype.Get=function(){if(0==this._noUseNum){var e=this._default.Clone();return this.Add(e),this.change(this.Length-1,0),this._noUseNum--,e.IsUse=!0,e}return this._noUseNum--,(e=this._data[this._noUseNum]).IsUse=!0,e.ReSet(),e},e.prototype.change=function(e,t){var n=this._data[e],o=this._data[t];n.Id=t,o.Id=e,this._data[e]=o,this._data[t]=n},e.prototype.ClearAll=function(){if(this._noUseNum!=this.Length){for(var e=this._data.length-1;e>0;e--)this._data[e].IsUse=!1,this._data[e].Recovery();this._noUseNum=this.Length}},e.prototype.RecoveryOne=function(e){e.IsUse&&(this.change(e.Id,this._noUseNum),this._noUseNum++,e.IsUse=!1)},e}();n.LoopObj=p;var l=function(){function e(e){this.node=e}return e.prototype.Clone=function(){var t=cc.instantiate(this.node);return t.parent=this.node.parent,new e(t)},e.prototype.Recovery=function(){this.node.active=!1},e.prototype.ReSet=function(){this.node.active=!0},e}();n.LoopNodeChild=l;var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.InitParent=function(e){var t=e.children[0];t.active=!1,this.Init(new l(t));for(var n=1;n<e.children.length;n++)(t=e.children[n]).active=!1,this.Add(new l(t))},t}(p);n.LoopNode=g,cc._RF.pop()},{}],SkillCsv:[function(e,t,n){"use strict";cc._RF.push(t,"41d9cGYe0VP6YxRet7X4Lgn","SkillCsv"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tool/CsvBase"),i=function(){function e(){this.line=new Array}return e.prototype.SetValues=function(e){var t=0;this._Id=Number(e[t++]),this.line.push(this._Id),this._Name=e[t++],this.line.push(this._Name),this._AttackDistance=Number(e[t++]),this.line.push(this._AttackDistance),this._MoveSpeed=Number(e[t++]),this.line.push(this._MoveSpeed)},e.prototype.ColNum=function(){return 4},Object.defineProperty(e.prototype,"Id",{get:function(){return this._Id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Name",{get:function(){return this._Name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AttackDistance",{get:function(){return this._AttackDistance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MoveSpeed",{get:function(){return this._MoveSpeed},enumerable:!0,configurable:!0}),e.prototype.OnInit=function(){},e}();n.SkillCsv=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=o.CsvFactory.Instance(t)),t._instance},enumerable:!0,configurable:!0}),t.prototype.ConfigName=function(){return"Csv/Skill"},t.prototype.UseNote=function(){return!0},t.prototype.GetKeyCsv=function(e){return e.Id},t.prototype.create=function(){return new i},t.prototype.UpdateValues=function(t){e.prototype.UpdateValues.call(this,t),this.strMap={};for(var n=0,o=this.mListCsv;n<o.length;n++){var i=o[n];this.strMap[i.Name]=i}},t.prototype.GetItemByName=function(e){return this.strMap[e]},t}(o.CsvBaseManager);n.SkillCsvManage=r,cc._RF.pop()},{"../Tool/CsvBase":"CsvBase"}],SkillEffectCsv:[function(e,t,n){"use strict";cc._RF.push(t,"c900er/cSBLmL0Ho0CoPBV8","SkillEffectCsv"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tool/CsvBase"),i=function(){function e(){this.line=new Array}return e.prototype.SetValues=function(e){var t=0;this._Id=Number(e[t++]),this.line.push(this._Id),this._Name=e[t++],this.line.push(this._Name),this._RoleID=Number(e[t++]),this.line.push(this._RoleID),this._AttackEffect=e[t++],this.line.push(this._AttackEffect),this._HitEffect=e[t++],this.line.push(this._HitEffect),this._ShowEffect=e[t++],this.line.push(this._ShowEffect)},e.prototype.ColNum=function(){return 6},Object.defineProperty(e.prototype,"Id",{get:function(){return this._Id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Name",{get:function(){return this._Name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"RoleID",{get:function(){return this._RoleID},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AttackEffect",{get:function(){return this._AttackEffect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"HitEffect",{get:function(){return this._HitEffect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ShowEffect",{get:function(){return this._ShowEffect},enumerable:!0,configurable:!0}),e.prototype.OnInit=function(){},e}();n.SkillEffectCsv=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=o.CsvFactory.Instance(t)),t._instance},enumerable:!0,configurable:!0}),t.prototype.ConfigName=function(){return"Csv/SkillEffect"},t.prototype.UseNote=function(){return!0},t.prototype.GetKeyCsv=function(e){return e.Id},t.prototype.create=function(){return new i},t}(o.CsvBaseManager);n.SkillEffectCsvManage=r,cc._RF.pop()},{"../Tool/CsvBase":"CsvBase"}],Skill:[function(e,t,n){"use strict";cc._RF.push(t,"4f60bh5GMtMjbcw7rHjmiJ+","Skill"),Object.defineProperty(n,"__esModule",{value:!0});var o,i=e("./FighterFactor");(function(e){e[e.Skill_Knock=1]="Skill_Knock",e[e.Skill_CiKe=2]="Skill_CiKe",e[e.Skill_CallXX=3]="Skill_CallXX"})(o=n.SkillType||(n.SkillType={}));var r=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return null==this.instance&&(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.playSkill=function(e,t,n){switch(t){case o.Skill_Knock:this.Skill_Knock(e);break;case o.Skill_CiKe:this.Skill_CiKe(e);break;case o.Skill_CallXX:this.Skill_CallXX(e)}},e.prototype.Skill_Knock=function(e){e.now_anim=e.animations.block;var t=e.animations.block.name[0];e.skeleton.timeScale=1;var n=e.setAnimation(0,t,!1);e.flipX?e.help.moveBy(0,50,0):e.help.moveBy(0,-50,0),e.help.listenComplete(n)},e.prototype.Skill_CiKe=function(e){i.FighterFactor.Instance.player.flipX?(e.setFlipX(i.FighterFactor.Instance.player.flipX,null),e.node.x=i.FighterFactor.Instance.player.node.x+100):(e.setFlipX(i.FighterFactor.Instance.player.flipX,null),e.node.x=i.FighterFactor.Instance.player.node.x-100),e.now_anim=e.animations.block;var t=e.animations.block.name[0];e.skeleton.timeScale=1;var n=e.setAnimation(0,t,!1);e.help.listenComplete(n)},e.prototype.Skill_CallXX=function(e){},e}();n.Skill=r,cc._RF.pop()},{"./FighterFactor":"FighterFactor"}],TeXiaoFactor:[function(e,t,n){"use strict";cc._RF.push(t,"c21abHiMt5HPLUl3CQemCoq","TeXiaoFactor"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/UIManager"),i=e("./TeXiao"),r=e("../Tool/Logger");n.AtkArrowTX={quan_atk1:i.TeXiaoType.TX_Quan1,quan_atk2:i.TeXiaoType.TX_Quan2,quan_atk3:i.TeXiaoType.TX_Quan3,wuqi01_atk1:i.TeXiaoType.TX_Wuqi01_1,wuqi01_atk2:i.TeXiaoType.TX_Wuqi01_2,wuqi01_atk3:i.TeXiaoType.TX_Wuqi01_3,wuqi02_atk1:i.TeXiaoType.TX_Wuqi02_1,wuqi02_atk2:i.TeXiaoType.TX_Wuqi02_2,wuqi02_atk3:i.TeXiaoType.TX_Wuqi02_3,wuqi03_atk1:i.TeXiaoType.TX_Wuqi03_1,wuqi03_atk2:i.TeXiaoType.TX_Wuqi03_2,wuqi03_atk3:i.TeXiaoType.TX_Wuqi03_3,wuqi04_atk1:i.TeXiaoType.TX_Wuqi04_1,wuqi04_atk2:i.TeXiaoType.TX_Wuqi04_2,wuqi04_atk3:i.TeXiaoType.TX_Wuqi04_3};var a=function(){function e(){this.TexiaoModel=null,this.TexiaoPool=new cc.NodePool}return Object.defineProperty(e,"Instance",{get:function(){return null==this.instance&&(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n;return __generator(this,function(i){switch(i.label){case 0:return[4,o.UIManager.Instance.loadPrefab("Fight/TeXiao").catch(function(e){r.Logger.info(e)})];case 1:if(e=i.sent(),this.TexiaoModel=e,!this.TexiaoModel)return[2];for(t=0;t<20;t++)n=cc.instantiate(this.TexiaoModel),this.TexiaoPool.put(n);return[2]}})})},e.prototype.create=function(t,n,o){if(this.TexiaoPool.size()>0){var i=null;(i=this.TexiaoPool.get()).parent=t;var r=i.getComponent("TeXiao");return r.init(n,o),r.setPlayComplete(function(t){e.Instance.TexiaoPool.put(t)}),new Promise(function(e,t){e(r)})}},e}();n.TeXiaoFactor=a,cc._RF.pop()},{"../Tool/Logger":"Logger","../manager/UIManager":"UIManager","./TeXiao":"TeXiao"}],TeXiao:[function(e,t,n){"use strict";cc._RF.push(t,"734afAuYGlAuqGaVQCb64lv","TeXiao"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/LoadManager");(function(e){e.TX_Quan1="nanzhu_tx|quan_tx1",e.TX_Quan2="nanzhu_tx|quan_tx2",e.TX_Quan3="nanzhu_tx|quan_tx3",e.TX_Wuqi01_1="nanzhu_tx|wuqi01_tx1",e.TX_Wuqi01_2="nanzhu_tx|wuqi01_tx2",e.TX_Wuqi01_3="nanzhu_tx|wuqi01_tx3",e.TX_Wuqi02_1="nanzhu_tx|wuqi02_tx1",e.TX_Wuqi02_2="nanzhu_tx|wuqi02_tx2",e.TX_Wuqi02_3="nanzhu_tx|wuqi02_tx3",e.TX_Wuqi03_1="nanzhu_tx|wuqi03_tx1",e.TX_Wuqi03_2="nanzhu_tx|wuqi03_tx2",e.TX_Wuqi03_3="nanzhu_tx|wuqi03_tx3",e.TX_Wuqi04_1="nanzhu_tx|wuqi04_tx1",e.TX_Wuqi04_2="nanzhu_tx|wuqi04_tx2",e.TX_Wuqi04_3="nanzhu_tx|wuqi04_tx3",e.TX_Quan_Sj="sj|quan_sj",e.TX_Wuqi_Sj="sj|wuqi_sj"})(n.TeXiaoType||(n.TeXiaoType={}));var i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.skeleton=null,t.flipX=!1,t.skname="",t.anim_name="",t.complete=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.skeleton=this.getComponent(sp.Skeleton)},t.prototype.init=function(e,t){var n=e.split("|");this.skname=n[0],this.anim_name=n[1],this.setSkeletonRes(o.LoadManager.Instance.skeletons[this.skname],"default",this.anim_name),this.node.active=!0,t&&this.node.setPosition(t)},t.prototype.setPlayComplete=function(e){this.complete=e},t.prototype.play=function(){var e=this,t=this.setAnimation(0,this.anim_name,!0);this.skeleton.setTrackCompleteListener(t,function(t,n){e.stop()})},t.prototype.stop=function(){this.node.active=!1,this.complete&&this.complete(this.node)},t.prototype.setSkeletonRes=function(e,t,n){e&&(this.skeleton.skeletonData=e,this.skeleton.animation=n)},t.prototype.setAnimation=function(e,t,n){return this.skeleton.findAnimation(t)?this.skeleton.setAnimation(e,t,n):null},t.prototype.initSkin=function(){},t.prototype.setFlipX=function(e,t){this.flipX=e,t?this.node.runAction(cc.sequence(cc.flipX(e),t)):this.node.runAction(cc.flipX(e))},t=__decorate([r],t)}(cc.Component));n.TeXiao=a,cc._RF.pop()},{"../manager/LoadManager":"LoadManager"}],TestUI:[function(e,t,n){"use strict";cc._RF.push(t,"09016emDABOCZvTUxXyA5gr","TestUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./BaseUI"),i=e("../manager/UIManager"),r=e("../Tool/Logger"),a=cc._decorator,s=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){r.Logger.info("TestUI onLoad")},t.prototype.onDestroy=function(){r.Logger.info("TestUI onDestroy")},t.prototype.onEnable=function(){r.Logger.info("TestUI onEnable")},t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){},this)},t.prototype.play=function(){},t.prototype.menu=function(e,t){"close"==t&&this.close(),"play"==t&&this.play()},t.prototype.close=function(){i.UIManager.Instance.closeWindow("TestUI")},t.prototype.onShow=function(){r.Logger.info("TestUI onShow")},t.prototype.onHide=function(){r.Logger.info("TestUI onHide")},t=__decorate([s],t)}(o.BaseUI));n.TestUI=c,cc._RF.pop()},{"../Tool/Logger":"Logger","../manager/UIManager":"UIManager","./BaseUI":"BaseUI"}],Toast:[function(e,t,n){"use strict";cc._RF.push(t,"d39a5r5FwFL7qhSJdGkDb9a","Toast"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/UIManager"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.message="",t}return __extends(t,e),t.prototype.start=function(){},t.prototype.showMsg=function(e,t){this.message=e,this.label.string=this.message,this.node.getChildByName("bg").width=this.label.node.width+200,this.node.getChildByName("bg").height=this.label.node.height+60;var n=this;this.node.runAction(cc.sequence(cc.delayTime(t),cc.fadeOut(.5),cc.callFunc(function(){n.close()})))},t.prototype.close=function(){o.UIManager.Instance.closeWindow("Toast")},__decorate([a(cc.Label)],t.prototype,"label",void 0),__decorate([a()],t.prototype,"message",void 0),t=__decorate([r],t)}(cc.Component);n.Toast=s,cc._RF.pop()},{"../manager/UIManager":"UIManager"}],TopUI:[function(e,t,n){"use strict";cc._RF.push(t,"463b1b8YK5MM7qe41X4nHl+","TopUI"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../manager/UserManager"),i=e("../../manager/AudioManager"),r=e("../../manager/UIManager"),a=e("../../Tool/Logger"),s=cc._decorator,c=s.ccclass,u=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.refreshUI=function(){this.node.getChildByName("soul").getChildByName("soulnumber").getComponent(cc.Label).string=o.UserManager.Instance.getUserInfo().gold.toString(),this.node.getChildByName("diamondsNumber").getComponent(cc.Label).string=o.UserManager.Instance.getUserInfo().diamonds.toString()},t.prototype.menu=function(e,t){i.AudioManager.Instance.playEff(i.AudioType.EFF_Touch),"setting"==t&&this.openSetting(),"diamouds"!=t&&"clickCharge"!=t||this.opemRecharge()},t.prototype.openSetting=function(){r.UIManager.Instance.openWindow("Setting")},t.prototype.opemRecharge=function(){a.Logger.info("\u6253\u5f00\u5145\u503c\u754c\u9762"),r.UIManager.Instance.openWindow("FreeGet")},t=__decorate([c],t)}(cc.Component));n.TopUI=u,cc._RF.pop()},{"../../Tool/Logger":"Logger","../../manager/AudioManager":"AudioManager","../../manager/UIManager":"UIManager","../../manager/UserManager":"UserManager"}],UIManager:[function(e,t,n){"use strict";cc._RF.push(t,"e92e1EGWkxFW6Mre6aYdkm6","UIManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./AudioManager"),i=e("../Tool/Logger"),r=function(){function e(){}return e.TYPE_MainUI="MainUI",e.TYPE_TopUI="TopUI",e}();n.WindowCode=r;var a=function(){function e(){this.uiPool={},this.uiList={},this.rootNode=cc.find("Canvas"),this.init()}return Object.defineProperty(e,"Instance",{get:function(){return null==this.instance&&(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.preLoadWindow=function(e){for(var t=this,n=function(e){if(t.uiPool[e])return{value:void 0};var n="Wnd/"+e;o.loadPrefab(n).then(function(n){t.uiPool[e]=n}).catch(function(e){i.Logger.info(e)})},o=this,r=0,a=e;r<a.length;r++){var s=n(a[r]);if("object"==typeof s)return s.value}},e.prototype.openWindow=function(e,t){return __awaiter(this,void 0,void 0,function(){var n,o,r;return __generator(this,function(a){switch(a.label){case 0:return o="Wnd/"+e,(n=this).uiPool[e]?(n.addNew(e,t||0),[2]):[4,this.loadPrefab(o).then(function(e){return e}).catch(function(e){i.Logger.info(e)})];case 1:return r=a.sent(),n.uiPool[e]=r,n.addNew(e,t||0),[2]}})})},e.prototype.createPrefab=function(e){return __awaiter(this,void 0,Promise,function(){var t,n,o,r,a;return __generator(this,function(s){switch(s.label){case 0:return n="Wnd/nodes/"+e,o=null,(t=this).uiPool[e]?(o=cc.instantiate(t.uiPool[e]),[3,3]):[3,1];case 1:return[4,this.loadPrefab(n).catch(function(e){i.Logger.info(e)})];case 2:r=s.sent(),t.uiPool[e]=r,o=cc.instantiate(t.uiPool[e]),s.label=3;case 3:return a=o.getComponent(e),[2,new Promise(function(e,t){e(a)})]}})})},e.prototype.closeWindow=function(e){this.uiList[e]?(this.hide(e),i.Logger.info("closeWindow:",e),this.rootNode.removeChild(this.uiList[e]),this.uiList[e].destroy(),delete this.uiList[e]):i.Logger.info("closeWindow:",e,"not found")},e.prototype.closeAllWindow=function(){for(var e in i.Logger.info("closeAllWindow:"),this.uiList)this.uiList[e]&&(this.rootNode.removeChild(this.uiList[e],!0),this.uiList[e].destroy(),delete this.uiList[e])},e.prototype.loadScene=function(e,t){return __awaiter(this,void 0,Promise,function(){var n;return __generator(this,function(o){return this.closeAllWindow(),n=this,[2,new Promise(function(o,i){cc.director.loadScene(e,function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return t(),n.rootNode=cc.find("Canvas"),o(),[2]})})})})]})})},e.prototype.findWindow=function(e){return this.uiList[e]},e.prototype.findComponent=function(e){return this.uiList[e]?this.uiList[e].getComponent(e):null},e.prototype.addNew=function(e,t){if(i.Logger.info("openWindow:",e),this.uiList[e]&&this.closeWindow(e),!this.uiPool[e])return null;var n=cc.instantiate(this.uiPool[e]);return this.rootNode.addChild(n,t),this.uiList[e]=n,this.show(e),n},e.prototype.show=function(e){o.AudioManager.Instance.playEff(o.AudioType.EFF_OpenWindow);var t=this.uiList[e].getComponent(e);t.addFlowBg&&t.addFlowBg(),t.onShow&&t.onShow(),t.enabled=!0},e.prototype.hide=function(e){o.AudioManager.Instance.playEff(o.AudioType.EFF_CloseWindow);var t=this.uiList[e].getComponent(e);t&&t.onHide&&t.onHide(),t.enabled=!0},e.prototype.showToast=function(e,t){return void 0===t&&(t=2),__awaiter(this,void 0,void 0,function(){return __generator(this,function(n){switch(n.label){case 0:return[4,this.openWindow("Toast")];case 1:return n.sent(),this.findComponent("Toast").showMsg(e,t),[2]}})})},e.prototype.loadPrefab=function(e){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(t){return[2,new Promise(function(t,n){cc.loader.loadRes(e,function(e,o){e?n(e):t(o)})})]})})},e}();n.UIManager=a,cc._RF.pop()},{"../Tool/Logger":"Logger","./AudioManager":"AudioManager"}],UpdateObj:[function(e,t,n){"use strict";cc._RF.push(t,"704d1WuUz9LsJGJF12iI/yC","UpdateObj"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tool/SingletonFactory"),i=e("../Tool/Help"),r=function(){function e(){this.Speed=1,this.OnSigna=new o.Signa}return e.AddUpdateSigna=function(t){e.UpdateObjMgr.push(t),1==e.UpdateObjMgr.length&&(e._intervalID=setInterval(function(){e.DoUpdateAll()},33))},e.RemoveUpdateSigna=function(t){i.Help.ArrayRemove(e.UpdateObjMgr,t),0==e.UpdateObjMgr.length&&clearInterval(e._intervalID)},e.DoUpdateAll=function(){for(var t=0,n=e.UpdateObjMgr;t<n.length;t++){n[t].OnSigna.Send()}},e.GetUpdateObj=function(t){var n=e.UpdateObjSpeedMgr[t];return n||(n=new e,e.UpdateObjSpeedMgr[t]=n),n},e.UpdateObjMgr=new Array,e.UpdateObjSpeedMgr={},e._intervalID=0,e}(),a=function(){function e(e){this._clearCall=new o.FunctionArry,this._isPlaying=!1,this._updateSigna=r.GetUpdateObj(e)}return e.prototype.Start=function(e,t){this._call=e,this._caller=t,this._isPlaying||(this._isPlaying=!0,0==this._updateSigna.OnSigna.mCalls.length&&r.AddUpdateSigna(this._updateSigna),this._clearCall.Add(this._updateSigna.OnSigna.AddListen(this.Invoke,this)))},e.prototype.Stop=function(){this._isPlaying&&(this._isPlaying=!1,this._clearCall.InvokeAndClear(),0==this._updateSigna.OnSigna.mCalls.length&&r.AddUpdateSigna(this._updateSigna))},e.prototype.SetSpeed=function(e){this._isPlaying?(this.Stop(),this._updateSigna=r.GetUpdateObj(e),this.Start(this._call,this._caller)):this._updateSigna=r.GetUpdateObj(e)},e.prototype.Invoke=function(){this._call.call(this._caller)},e}();n.UpdateObj=a;var s=function(){function e(e){this.Time=1,this._interval=void 0,this.OnSigna=new o.Signa,this.Time=e}return e.GetUpdateObj=function(t){var n=e.TimerSpeedMgr[t];return n||(n=new e(t),e.TimerSpeedMgr[t]=n),n},e.prototype.start=function(){if(void 0===this._interval){var e=this,t=function(){return e.OnSigna.Send(),t};this._interval=setInterval(t(),this.Time)}},e.prototype.stop=function(){clearInterval(this._interval),this._interval=void 0},e.TimerSpeedMgr={},e}(),c=function(){function e(e){this._clearCall=new o.FunctionArry,this._isPlaying=!1,this.testId=0,this._updateSigna=s.GetUpdateObj(e),this.testId=this._updateSigna.OnSigna.mCalls.length+1}return e.prototype.Start=function(e,t){this._call=e,this._caller=t,this._isPlaying||(this._isPlaying=!0,this._updateSigna.start(),this._clearCall.Add(this._updateSigna.OnSigna.AddListen(this.Invoke,this)))},e.prototype.Stop=function(){this._isPlaying&&(this._isPlaying=!1,this._clearCall.InvokeAndClear(),0==this._updateSigna.OnSigna.mCalls.length&&this._updateSigna.stop())},e.prototype.SetSpeed=function(e){this._isPlaying?(this.Stop(),this._updateSigna=s.GetUpdateObj(e),this.Start(this._call,this._caller)):this._updateSigna=s.GetUpdateObj(e)},e.prototype.Invoke=function(){this._call.call(this._caller)},e}();n.TimerObj=c,cc._RF.pop()},{"../Tool/Help":"Help","../Tool/SingletonFactory":"SingletonFactory"}],UserManager:[function(e,t,n){"use strict";cc._RF.push(t,"588679DSB1LpoxtOuu0YMYz","UserManager"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Define/UserType"),i=e("./UIManager"),r=e("./BagManager"),a=e("../Tool/Logger"),s=function(){function e(){this.isFirstToday=!1,this.isLogin=!1,this.userInfo=new o.UserInfo}return Object.defineProperty(e,"Instance",{get:function(){return null==this.instance&&(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.setUserInfo=function(e){this.userInfo.openid=e.openid,this.userInfo.uid=e.uid,this.userInfo.token=e.tk,a.Logger.info("setUserInfo:",this.userInfo)},e.prototype.getUserInfo=function(){return this.userInfo},e.prototype.updatePlayerData=function(e){this.userInfo.avatarUrl=e.picUrl,this.userInfo.gender=e.gender,this.userInfo.nickName=e.nickName,this.userInfo.score=e.score,this.userInfo.stage=e.stage,this.userInfo.combat=e.combat,this.userInfo.maxscore=e.maxscore,this.userInfo.maxstage=e.maxstage,this.checkFirstToday(),this.loginSuccess(),this.refreshToUI()},e.prototype.loginSuccess=function(){cc.find("LocalNode").getComponent("LocalNode").loginComplete()},e.prototype.updateAssets=function(){this.userInfo.gold=r.BagManager.Instance.getGold(),this.userInfo.diamonds=r.BagManager.Instance.getDiamonds(),this.refreshToUI()},e.prototype.updateMyRank=function(e){this.userInfo.myRank=e,this.refreshToUI()},e.prototype.getUidByRankId=function(e){return(e-1)/1e4},e.prototype.refreshToUI=function(){var e=i.UIManager.Instance.findComponent("MainUI");e&&e.refreshUI()},e.prototype.checkFirstToday=function(){var e=new Date;e.setTime(cc.sys.localStorage.getItem("lastEnterTime")),this.isFirstToday=!1,(new Date).getFullYear()>e.getFullYear()?this.isFirstToday=!0:(new Date).getMonth()>e.getMonth()?this.isFirstToday=!0:(new Date).getDate()>e.getDate()&&(this.isFirstToday=!0),cc.sys.localStorage.setItem("lastEnterTime",(new Date).getTime()),this.isFirstToday&&(cc.sys.localStorage.setItem("rewardLookMvCount",5),cc.sys.localStorage.setItem("rewardShareCount",5))},e}();n.UserManager=s,cc._RF.pop()},{"../Define/UserType":"UserType","../Tool/Logger":"Logger","./BagManager":"BagManager","./UIManager":"UIManager"}],UserType:[function(e,t,n){"use strict";cc._RF.push(t,"78fecvfYWRB4ZArfdLiIXyR","UserType"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){return function(){this.uid=0,this.token="",this.openid="",this.isNewPlayer="",this.code=null,this.avatarUrl="",this.gender=1,this.nickName="\u6e38\u5ba2",this.diamonds=0,this.gold=0,this.score=0,this.stage=0,this.combat=0,this.myRank=99999}}();n.UserInfo=o;var i=function(){return function(){this.total=0,this.gate=0,this.boos=0,this.friend=0,this.equipment=0}}();n.FightingCapacity=i;var r=function(){return function(){this.UnlockBossArr=[],this.upGoldRate=0,this.upGold=10,this.friendCombat=0,this.bossCombat=0}}();n.HangUpInfo=r,cc._RF.pop()},{}],Util:[function(e,t,n){"use strict";cc._RF.push(t,"348fbJrxhRFsLt3pfb5WpuD","Util"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.formatDateMonth=function(e){return e.getMonth()+1+"\u6708"+e.getDate()+"\u65e5"},e.safeCopy=function(e,t,n,o){for(var i in n=n||"",o=o||"",t){var r=n+i.replace(o,"");if(e.hasOwnProperty(r)){var a=typeof e[r];"undefined"!==a&&(e[r]="number"!==a?t[i]:parseFloat(t[i]))}}return e},e.safeExtend=function(e,t){for(var n in t)e[n]=t[n];return e},e}();n.Util=o,cc._RF.pop()},{}],c_propCsv:[function(e,t,n){"use strict";cc._RF.push(t,"19979KNJr9AOoMo5yWZCBV2","c_propCsv"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tool/CsvBase"),i=function(){function e(){this.line=new Array}return e.prototype.SetValues=function(e){var t=0;this._type=e[t++],this.line.push(this._type),this._index=e[t++],this.line.push(this._index),this._key=Number(e[t++]),this.line.push(this._key),this._value=e[t++],this.line.push(this._value),this._remark=e[t++],this.line.push(this._remark),this._Null5=e[t++],this.line.push(this._Null5)},e.prototype.ColNum=function(){return 6},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remark",{get:function(){return this._remark},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Null5",{get:function(){return this._Null5},enumerable:!0,configurable:!0}),e.prototype.OnInit=function(){},e}();n.c_propCsv=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=o.CsvFactory.Instance(t)),t._instance},enumerable:!0,configurable:!0}),t.prototype.ConfigName=function(){return"Csv/c_prop"},t.prototype.UseNote=function(){return!0},t.prototype.GetKeyCsv=function(e){return e.type},t.prototype.create=function(){return new i},t}(o.CsvBaseManager);n.c_propCsvManage=r,cc._RF.pop()},{"../Tool/CsvBase":"CsvBase"}],caseCsv:[function(e,t,n){"use strict";cc._RF.push(t,"1a0feA3NOhPyL0QDkDhitOT","caseCsv"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tool/CsvBase"),i=function(){function e(){this.line=new Array}return e.prototype.SetValues=function(e){var t=0;this._Id=Number(e[t++]),this.line.push(this._Id),this._Itemname=e[t++],this.line.push(this._Itemname),this._Create=e[t++],this.line.push(this._Create),this._Decreate=Number(e[t++]),this.line.push(this._Decreate),this._Min=Number(e[t++]),this.line.push(this._Min),this._Max=Number(e[t++]),this.line.push(this._Max)},e.prototype.ColNum=function(){return 6},Object.defineProperty(e.prototype,"Id",{get:function(){return this._Id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Itemname",{get:function(){return this._Itemname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Create",{get:function(){return this._Create},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Decreate",{get:function(){return this._Decreate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Min",{get:function(){return this._Min},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Max",{get:function(){return this._Max},enumerable:!0,configurable:!0}),e.prototype.OnInit=function(){},e}();n.caseCsv=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=o.CsvFactory.Instance(t)),t._instance},enumerable:!0,configurable:!0}),t.prototype.ConfigName=function(){return"Csv/case"},t.prototype.UseNote=function(){return!0},t.prototype.GetKeyCsv=function(e){return e.Id},t.prototype.create=function(){return new i},t}(o.CsvBaseManager);n.caseCsvManage=r,cc._RF.pop()},{"../Tool/CsvBase":"CsvBase"}],combatrank:[function(e,t,n){"use strict";cc._RF.push(t,"7a47348kp9Ep44ZRAdupZmp","combatrank"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/UIManager"),i=e("../Net/MsgPacket"),r=e("../protocols/GameProto"),a=e("../manager/RankManager"),s=e("./BaseUI"),c=cc._decorator,u=c.ccclass,h=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankView=null,t}return __extends(t,e),t.prototype.start=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return this.node.on(cc.Node.EventType.TOUCH_START,function(){},this),[4,o.UIManager.Instance.createPrefab("RankView_Combat")];case 1:return e=n.sent(),this.node.addChild(e.node),this.rankView=e.node,e.setCombatRankList(a.RankManager.Instance.getRankInfo().combatrankArr),t=new i.CS_CombatRank,r.GameProto.Instance.requestCombatRank(t),[2]}})})},t.prototype.updateRankView=function(){this.rankView.getComponent("RankView_Combat").setCombatRankList(a.RankManager.Instance.getRankInfo().combatrankArr)},t.prototype.menu=function(e,t){"close"==t&&o.UIManager.Instance.closeWindow("combatrank"),"allrank"==t&&(o.UIManager.Instance.closeWindow("everydayrank"),o.UIManager.Instance.closeWindow("combatrank"),o.UIManager.Instance.closeWindow("rankaward"),o.UIManager.Instance.openWindow("rank")),"everydayrank"==t&&(o.UIManager.Instance.closeWindow("rank"),o.UIManager.Instance.closeWindow("rankaward"),o.UIManager.Instance.closeWindow("combatrank"),o.UIManager.Instance.openWindow("everydayrank"))},t=__decorate([u],t)}(s.BaseUI));n.default=h,cc._RF.pop()},{"../Net/MsgPacket":"MsgPacket","../manager/RankManager":"RankManager","../manager/UIManager":"UIManager","../protocols/GameProto":"GameProto","./BaseUI":"BaseUI"}],diamshop:[function(e,t,n){"use strict";cc._RF.push(t,"eb6e7/iteRK/ofjwHjCUMPy","diamshop"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/UIManager"),i=e("../protocols/GameProto"),r=e("../Net/BagPacket"),a=e("./BaseUI"),s=e("../manager/BagManager"),c=e("../Tool/Logger"),u=cc._decorator,h=u.ccclass,p=u.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.boxScrollView=null,t.boxItem=null,t.inScrollView=null,t.inItem=null,t.has=null,t}return __extends(t,e),t.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){},this),c.Logger.info(s.BagManager.Instance.getBagInfo().myItems);var e=[];for(var t in s.BagManager.Instance.getBagInfo().myItems)s.BagManager.Instance.getBagInfo().myItems.hasOwnProperty(t)&&4==s.BagManager.Instance.getBagInfo().myItems[t].Typeid&&e.push(s.BagManager.Instance.getBagInfo().myItems[t]);this.updateBoxScroll(e),this.updateInScroll([1,2,3,4,5,6]),this.updateHaNum()},t.prototype.menu=function(e,t){if("close"==t&&o.UIManager.Instance.closeWindow("diamshop"),"boxItem"==t){c.Logger.info("\u70b9\u51fb\u4e86\u666e\u901a\u5b9d\u7bb1",e.target.myflag);var n=new r.CS_OpenBox;n.itemId=e.target.myflag,i.GameProto.Instance.requestOpenBox(n)}},t.prototype.updateHaNum=function(){for(var e=0;e<this.has.children.length;e++){var t=this.has.children[e],n=t.name;s.BagManager.Instance.getBagInfo().myItems[n]?t.getComponent(cc.Label).string=s.BagManager.Instance.getBagInfo().myItems[n].Count.toString():t.getComponent(cc.Label).string="0"}},t.prototype.updateBoxScroll=function(e){c.Logger.info("\u66f4\u65b0\u5b9d\u7bb1\u5217\u8868:",e);var t=this.boxScrollView.getComponent(cc.ScrollView);if(t.content.removeAllChildren(),!(e.length<=0)){this.node.active=!0;var n=this.boxItem.width+20;this.boxItem.height;t.content.width=e.length*n;for(var o=0;o<e.length;o++){var i=e[o],r=cc.instantiate(this.boxItem);r.active=!0,t.content.addChild(r),r.myflag=i.Id,r.setPosition(cc.v2(o*n+n/2,0)),this.loadHttpIcon(r.getChildByName("icon"),i.Icon,null),r.getChildByName("name").getComponent(cc.Label).string=i.Itemname,r.getChildByName("num").getComponent(cc.Label).string="\u5269\u4f59:"+i.Count}}},t.prototype.updateInScroll=function(e){c.Logger.info("\u66f4\u65b0\u5b9d\u7bb1\u5185\u7269\u54c1:",e);var t=this.inScrollView.getComponent(cc.ScrollView);if(t.content.removeAllChildren(),!(e.length<=0)){this.node.active=!0;var n=this.inItem.width+20;t.content.width=e.length*n;for(var o=0;o<e.length;o++){e[o];var i=cc.instantiate(this.inItem);i.active=!0,t.content.addChild(i),i.myflag=o,i.setPosition(cc.v2(o*n+n/2,0))}this.inScrollView.x=-e.length*n/2,this.inScrollView.x<-cc.winSize.width/2&&(this.inScrollView.x=-cc.winSize.width/2)}},t.prototype.loadHttpIcon=function(e,t,n){t&&""!=t||(t="http://thirdwx.qlogo.cn/mmopen/vi_32/opmkDJhG2jpF8X8AfFQfTauRlpBc7VeFicJevZ9IiajEl5g4ia75opNSZOb0FvDV87BvpUN1rsyctibGnicP7uibsMtw/132"),cc.loader.load({url:t,type:"png"},function(t,o){var i=new cc.SpriteFrame(o);e.getComponent(cc.Sprite).spriteFrame=i,n&&n(),c.Logger.info("Should load a texture from RESTful API by specify the type: "+(o instanceof cc.Texture2D))})},__decorate([p(cc.Node)],t.prototype,"boxScrollView",void 0),__decorate([p(cc.Node)],t.prototype,"boxItem",void 0),__decorate([p(cc.Node)],t.prototype,"inScrollView",void 0),__decorate([p(cc.Node)],t.prototype,"inItem",void 0),__decorate([p(cc.Node)],t.prototype,"has",void 0),t=__decorate([h],t)}(a.BaseUI);n.default=l,cc._RF.pop()},{"../Net/BagPacket":"BagPacket","../Tool/Logger":"Logger","../manager/BagManager":"BagManager","../manager/UIManager":"UIManager","../protocols/GameProto":"GameProto","./BaseUI":"BaseUI"}],displaywxsub:[function(e,t,n){"use strict";cc._RF.push(t,"1a50ezl3ixOHKZz11jBi+Ol","displaywxsub"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("./wxApi"),i=cc._decorator,r=i.ccclass,a=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.show=function(){this.node.active=!0,this.node.getComponent(cc.WXSubContextView).updateSubContextViewport();var e=new o.WX_OpenData("show");e.res={},o.WXManager.Instance.sendMessageToChild(e)},t.prototype.hide=function(){this.node.active=!1;var e=new o.WX_OpenData("hide");e.res={},o.WXManager.Instance.sendMessageToChild(e)},t=__decorate([r],t)}(cc.Component));n.displaywxsub=a,cc._RF.pop()},{"./wxApi":"wxApi"}],equipCsv:[function(e,t,n){"use strict";cc._RF.push(t,"7abccufD2lO55N0STlOkkvd","equipCsv"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tool/CsvBase"),i=function(){function e(){this.line=new Array}return e.prototype.SetValues=function(e){var t=0;this._Id=Number(e[t++]),this.line.push(this._Id),this._Type=Number(e[t++]),this.line.push(this._Type),this._Name=e[t++],this.line.push(this._Name),this._Desc=e[t++],this.line.push(this._Desc),this._Modelid=Number(e[t++]),this.line.push(this._Modelid),this._Range=Number(e[t++]),this.line.push(this._Range),this._Rangeweight=Number(e[t++]),this.line.push(this._Rangeweight),this._Recovery=Number(e[t++]),this.line.push(this._Recovery),this._Recoveryweight=Number(e[t++]),this.line.push(this._Recoveryweight),this._Luck=Number(e[t++]),this.line.push(this._Luck),this._Luckweight=Number(e[t++]),this.line.push(this._Luckweight)},e.prototype.ColNum=function(){return 11},Object.defineProperty(e.prototype,"Id",{get:function(){return this._Id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Type",{get:function(){return this._Type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Name",{get:function(){return this._Name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Desc",{get:function(){return this._Desc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Modelid",{get:function(){return this._Modelid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Range",{get:function(){return this._Range},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rangeweight",{get:function(){return this._Rangeweight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Recovery",{get:function(){return this._Recovery},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Recoveryweight",{get:function(){return this._Recoveryweight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Luck",{get:function(){return this._Luck},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Luckweight",{get:function(){return this._Luckweight},enumerable:!0,configurable:!0}),e.prototype.OnInit=function(){},e}();n.equipCsv=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=o.CsvFactory.Instance(t)),t._instance},enumerable:!0,configurable:!0}),t.prototype.ConfigName=function(){return"Csv/equip"},t.prototype.UseNote=function(){return!0},t.prototype.GetKeyCsv=function(e){return e.Id},t.prototype.create=function(){return new i},t}(o.CsvBaseManager);n.equipCsvManage=r,cc._RF.pop()},{"../Tool/CsvBase":"CsvBase"}],everydayrank:[function(e,t,n){"use strict";cc._RF.push(t,"6df654F26pCLJjJaEzXC0k2","everydayrank"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/UIManager"),i=e("../Net/MsgPacket"),r=e("../protocols/GameProto"),a=e("../manager/RankManager"),s=e("./BaseUI"),c=cc._decorator,u=c.ccclass,h=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankView=null,t}return __extends(t,e),t.prototype.start=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return this.node.on(cc.Node.EventType.TOUCH_START,function(){},this),[4,o.UIManager.Instance.createPrefab("RankView")];case 1:return e=n.sent(),this.rankView=e.node,this.node.addChild(e.node),this.rankView.getChildByName("selfItem").getChildByName("RankAward").active=!0,e.setDayRankList(a.RankManager.Instance.getRankInfo().combatrankArr),t=new i.CS_DayRank,r.GameProto.Instance.requestDayRank(t),[2]}})})},t.prototype.updateRankView=function(){this.rankView.getComponent("RankView").setDayRankList(a.RankManager.Instance.getRankInfo().dayrankArr)},t.prototype.menu=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return"close"==t&&o.UIManager.Instance.closeWindow("everydayrank"),"allrank"==t&&(o.UIManager.Instance.closeWindow("everydayrank"),o.UIManager.Instance.closeWindow("combatrank"),o.UIManager.Instance.closeWindow("rankaward"),o.UIManager.Instance.openWindow("rank")),"combatrank"==t&&(o.UIManager.Instance.closeWindow("rank"),o.UIManager.Instance.closeWindow("rankaward"),o.UIManager.Instance.closeWindow("everydayrank"),o.UIManager.Instance.openWindow("combatrank")),[2]})})},t=__decorate([u],t)}(s.BaseUI));n.default=h,cc._RF.pop()},{"../Net/MsgPacket":"MsgPacket","../manager/RankManager":"RankManager","../manager/UIManager":"UIManager","../protocols/GameProto":"GameProto","./BaseUI":"BaseUI"}],itemCsv:[function(e,t,n){"use strict";cc._RF.push(t,"f56b4nQwqdIcorsmlQo0HoC","itemCsv"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tool/CsvBase"),i=function(){function e(){this.line=new Array}return e.prototype.SetValues=function(e){var t=0;this._Id=Number(e[t++]),this.line.push(this._Id),this._Itemname=e[t++],this.line.push(this._Itemname),this._Desc=e[t++],this.line.push(this._Desc),this._Typeid=Number(e[t++]),this.line.push(this._Typeid),this._Icon=e[t++],this.line.push(this._Icon),this._Count=Number(e[t++]),this.line.push(this._Count),this._Price=Number(e[t++]),this.line.push(this._Price)},e.prototype.ColNum=function(){return 7},Object.defineProperty(e.prototype,"Id",{get:function(){return this._Id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Itemname",{get:function(){return this._Itemname},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Desc",{get:function(){return this._Desc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Typeid",{get:function(){return this._Typeid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Icon",{get:function(){return this._Icon},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Count",{get:function(){return this._Count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Price",{get:function(){return this._Price},enumerable:!0,configurable:!0}),e.prototype.OnInit=function(){},e}();n.itemCsv=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=o.CsvFactory.Instance(t)),t._instance},enumerable:!0,configurable:!0}),t.prototype.ConfigName=function(){return"Csv/item"},t.prototype.UseNote=function(){return!0},t.prototype.GetKeyCsv=function(e){return e.Id},t.prototype.create=function(){return new i},t}(o.CsvBaseManager);n.itemCsvManage=r,cc._RF.pop()},{"../Tool/CsvBase":"CsvBase"}],nearTip:[function(e,t,n){"use strict";cc._RF.push(t,"1d148k6VrBBQY16X13YGCPM","nearTip"),Object.defineProperty(n,"__esModule",{value:!0});var o=cc._decorator,i=o.ccclass,r=o.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dot=null,t.dotSpriteFrame=null,t.dotList=[],t._isNear=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"isNear",{get:function(){return this._isNear},set:function(e){this._isNear=e,this._isNear&&this.setNearView()},enumerable:!0,configurable:!0}),t.prototype.start=function(){},t.prototype.initNum=function(e,t){this.clear(),this.setColor(t),this.dot.active=!0;for(var n=1;n<e;n++)this.addDot(e,cc.v2(22*n,0));this.node.x=-22*e/2},t.prototype.reduce=function(){this.dotList.length<=0||this.dotList.shift().removeFromParent()},t.prototype.clear=function(){this.isNear=!1;for(var e=0;e<this.dotList.length;e++){this.dotList[e].removeFromParent()}this.dotList.splice(0,this.dotList.length),this.dot.active=!1},t.prototype.setNearView=function(){for(var e=0;e<this.dotList.length;e++){this.dotList[e].removeFromParent()}this.dotList.splice(0,this.dotList.length),this.dot.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame("PreLoadRes/texture/fight/dian_01")},t.prototype.setColor=function(e){this.dotSpriteFrame=1==e?new cc.SpriteFrame("PreLoadRes/texture/fight/dian_03"):2==e?new cc.SpriteFrame("PreLoadRes/texture/fight/dian_03"):3==e?new cc.SpriteFrame("PreLoadRes/texture/fight/dian_02"):new cc.SpriteFrame("PreLoadRes/texture/fight/dian_03"),this.dot.getComponent(cc.Sprite).spriteFrame=this.dotSpriteFrame},t.prototype.addDot=function(e,t){var n=cc.instantiate(this.dot);return n.getComponent(cc.Sprite).spriteFrame=this.dotSpriteFrame,this.node.addChild(n),n.position=t,this.dotList.push(n),n},__decorate([r(cc.Node)],t.prototype,"dot",void 0),t=__decorate([i],t)}(cc.Component);n.default=a,cc._RF.pop()},{}],rankaward:[function(e,t,n){"use strict";cc._RF.push(t,"910a9OkIjNM1JzkmijTXp4y","rankaward"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../manager/UIManager"),i=cc._decorator,r=i.ccclass,a=i.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return __extends(t,e),t.prototype.start=function(){},t.prototype.menu=function(e,t){"close"==t&&o.UIManager.Instance.closeWindow("rankaward")},__decorate([a(cc.Label)],t.prototype,"label",void 0),__decorate([a],t.prototype,"text",void 0),t=__decorate([r],t)}(cc.Component);n.default=s,cc._RF.pop()},{"../../manager/UIManager":"UIManager"}],rank:[function(e,t,n){"use strict";cc._RF.push(t,"0e98d3s7oJIY7Hggt5r4t+H","rank"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../manager/UIManager"),i=e("../Tool/wx/wxApi"),r=e("../Net/MsgPacket"),a=e("../protocols/GameProto"),s=e("../manager/RankManager"),c=e("./BaseUI"),u=cc._decorator,h=u.ccclass,p=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rankView=null,t}return __extends(t,e),t.prototype.start=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return this.node.on(cc.Node.EventType.TOUCH_START,function(){},this),[4,o.UIManager.Instance.createPrefab("RankView")];case 1:return e=n.sent(),this.rankView=e.node,this.node.addChild(e.node),e.setAllRankList(s.RankManager.Instance.getRankInfo().allrankArr),t=new r.CS_AllRank,a.GameProto.Instance.requestAllRank(t),[2]}})})},t.prototype.updateRankView=function(){this.rankView.getComponent("RankView").setAllRankList(s.RankManager.Instance.getRankInfo().allrankArr)},t.prototype.menu=function(e,t){"close"==t&&(o.UIManager.Instance.closeWindow("rank"),i.WXManager.Instance.closeDataContent()),"everydayrank"==t&&(o.UIManager.Instance.closeWindow("rank"),o.UIManager.Instance.closeWindow("rankaward"),o.UIManager.Instance.closeWindow("combatrank"),i.WXManager.Instance.closeDataContent(),o.UIManager.Instance.openWindow("everydayrank")),"combatrank"==t&&(o.UIManager.Instance.closeWindow("rank"),o.UIManager.Instance.closeWindow("rankaward"),o.UIManager.Instance.closeWindow("everydayrank"),i.WXManager.Instance.closeDataContent(),o.UIManager.Instance.openWindow("combatrank"))},t=__decorate([h],t)}(c.BaseUI));n.rank=p,cc._RF.pop()},{"../Net/MsgPacket":"MsgPacket","../Tool/wx/wxApi":"wxApi","../manager/RankManager":"RankManager","../manager/UIManager":"UIManager","../protocols/GameProto":"GameProto","./BaseUI":"BaseUI"}],t_itemCsv:[function(e,t,n){"use strict";cc._RF.push(t,"e0c9fzGxlNCwIVd6mgsoZjo","t_itemCsv"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tool/CsvBase"),i=function(){function e(){this.line=new Array}return e.prototype.SetValues=function(e){var t=0;this._id=Number(e[t++]),this.line.push(this._id),this._name=e[t++],this.line.push(this._name),this._note=e[t++],this.line.push(this._note),this._iconId=Number(e[t++]),this.line.push(this._iconId),this._itemLvl=Number(e[t++]),this.line.push(this._itemLvl),this._level=Number(e[t++]),this.line.push(this._level),this._vip=Number(e[t++]),this.line.push(this._vip),this._color=Number(e[t++]),this.line.push(this._color),this._type=Number(e[t++]),this.line.push(this._type),this._bagTag=Number(e[t++]),this.line.push(this._bagTag),this._count=Number(e[t++]),this.line.push(this._count),this._price=Number(e[t++]),this.line.push(this._price),this._dropId=e[t++],this.line.push(this._dropId),this._isLoot=Number(e[t++]),this.line.push(this._isLoot),this._lootType=e[t++],this.line.push(this._lootType)},e.prototype.ColNum=function(){return 15},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"note",{get:function(){return this._note},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconId",{get:function(){return this._iconId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemLvl",{get:function(){return this._itemLvl},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vip",{get:function(){return this._vip},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bagTag",{get:function(){return this._bagTag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"price",{get:function(){return this._price},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropId",{get:function(){return this._dropId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoot",{get:function(){return this._isLoot},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lootType",{get:function(){return this._lootType},enumerable:!0,configurable:!0}),e.prototype.OnInit=function(){},e}();n.t_itemCsv=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=o.CsvFactory.Instance(t)),t._instance},enumerable:!0,configurable:!0}),t.prototype.ConfigName=function(){return"Csv/t_item"},t.prototype.UseNote=function(){return!0},t.prototype.GetKeyCsv=function(e){return e.id},t.prototype.create=function(){return new i},t}(o.CsvBaseManager);n.t_itemCsvManage=r,cc._RF.pop()},{"../Tool/CsvBase":"CsvBase"}],weaponCsv:[function(e,t,n){"use strict";cc._RF.push(t,"5211fZFDhpD3LyaffxVs3Em","weaponCsv"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Tool/CsvBase"),i=function(){function e(){this.line=new Array}return e.prototype.SetValues=function(e){var t=0;this._Id=Number(e[t++]),this.line.push(this._Id),this._Type=Number(e[t++]),this.line.push(this._Type),this._Name=e[t++],this.line.push(this._Name),this._Desc=e[t++],this.line.push(this._Desc),this._Stage=Number(e[t++]),this.line.push(this._Stage),this._Modelid=Number(e[t++]),this.line.push(this._Modelid),this._Range=Number(e[t++]),this.line.push(this._Range),this._Rangeweight=Number(e[t++]),this.line.push(this._Rangeweight),this._Soul=Number(e[t++]),this.line.push(this._Soul),this._Soulweight=Number(e[t++]),this.line.push(this._Soulweight),this._Shock=Number(e[t++]),this.line.push(this._Shock),this._Shockweight=Number(e[t++]),this.line.push(this._Shockweight),this._Slowtime=Number(e[t++]),this.line.push(this._Slowtime),this._STweight=Number(e[t++]),this.line.push(this._STweight)},e.prototype.ColNum=function(){return 14},Object.defineProperty(e.prototype,"Id",{get:function(){return this._Id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Type",{get:function(){return this._Type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Name",{get:function(){return this._Name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Desc",{get:function(){return this._Desc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Stage",{get:function(){return this._Stage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Modelid",{get:function(){return this._Modelid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Range",{get:function(){return this._Range},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Rangeweight",{get:function(){return this._Rangeweight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Soul",{get:function(){return this._Soul},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Soulweight",{get:function(){return this._Soulweight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Shock",{get:function(){return this._Shock},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Shockweight",{get:function(){return this._Shockweight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Slowtime",{get:function(){return this._Slowtime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"STweight",{get:function(){return this._STweight},enumerable:!0,configurable:!0}),e.prototype.OnInit=function(){},e}();n.weaponCsv=i;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=o.CsvFactory.Instance(t)),t._instance},enumerable:!0,configurable:!0}),t.prototype.ConfigName=function(){return"Csv/weapon"},t.prototype.UseNote=function(){return!0},t.prototype.GetKeyCsv=function(e){return e.Id},t.prototype.create=function(){return new i},t}(o.CsvBaseManager);n.weaponCsvManage=r,cc._RF.pop()},{"../Tool/CsvBase":"CsvBase"}],wxApi:[function(e,t,n){"use strict";cc._RF.push(t,"17384EsnltMC6H4az2QLjFb","wxApi"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../../Define/GameConfig"),i=e("../../manager/UserManager"),r=e("../../manager/UIManager"),a=e("../Logger"),s=function(){return function(e){this.fun_name="",this.res="",this.fun_name=e}}();n.WX_OpenData=s;var c=function(){function e(){this.wx=window.wx,this.launchData=null,this.downLoadConfig={total:0,process:0},this.bannerAd=null,this.rewardedVideoAd=null}return Object.defineProperty(e,"Instance",{get:function(){return null==this.instance&&(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.loadWx=function(){window.wx?(this.wx=window.wx,this.init()):a.Logger.warn("loadWx fail!")},e.prototype.init=function(){if(this.checkWx()){if(this.launchData=this.wx.getLaunchOptionsSync(),a.Logger.info(this.launchData),this.launchData.query&&this.launchData.query.appid,this.wx.onShareAppMessage(function(){return{title:"\u70ed\u8840\u9ad8\u6821",imageUrl:"",success:function(){},fail:function(){},complete:function(){},query:""}}),this.wx.showShareMenu({withShareTicket:!0,success:function(){a.Logger.info("showShareMenu true")},fail:function(){a.Logger.info("showShareMenu fail")},complete:function(){a.Logger.info("showShareMenu complete")}}),this.wx.updateShareMenu({withShareTicket:!0,success:function(){a.Logger.info("updateShareMenu true")},fail:function(){a.Logger.info("updateShareMenu fail")},complete:function(){a.Logger.info("updateShareMenu complete")}}),"function"==typeof this.wx.getUpdateManager){var e=this.wx.getUpdateManager();e.onCheckForUpdate(function(e){a.Logger.info(e.hasUpdate)}),e.onUpdateReady(function(){e.applyUpdate()}),e.onUpdateFailed(function(){})}this.wx.onHide(function(){a.Logger.info("onHide ")}),this.wx.onShow(function(e){a.Logger.info("onShow"),a.Logger.info(e),e.query&&e.query.appid}),this.wx.getSystemInfo({success:function(e){"getSystemInfo:ok"==e.errMsg&&a.Logger.info("getSystemInfo:",e)}})}},e.prototype.checkWx=function(){return!!this.wx||(a.Logger.warn("not found wx:\u6ca1\u6709\u627e\u5230\u5fae\u4fe1"),!1)},e.prototype.openDataContent=function(){this.checkWx()&&cc.find("LocalNode").getComponent("LocalNode").showDisplayView()},e.prototype.closeDataContent=function(){this.checkWx()&&cc.find("LocalNode").getComponent("LocalNode").hideDisplayView()},e.prototype.sendMessageToChild=function(e){this.checkWx()&&this.wx.getOpenDataContext().postMessage({fun_name:e.fun_name,data:e.res})},e.prototype.login=function(e){if(this.checkWx()){var t=this;this.wx.login({success:function(n){n.code?(i.UserManager.Instance.getUserInfo().code=n.code,t.getUserInfo(e)):a.Logger.error("\u7528\u6237\u6388\u6743\u5931\u8d25\uff01",n)},fail:function(){e.fail()}})}},e.prototype.getUserInfo=function(e){var t=this;this.wx.getSetting({success:function(n){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){switch(i.label){case 0:return n.authSetting["scope.userInfo"]?(t.wx.getUserInfo({withCredentials:!0,lang:"zh_CN",success:function(t){a.Logger.info("\u6210\u529f\u83b7\u53d6wx\u7528\u6237\u4fe1\u606f"),e.success(t),r.UIManager.Instance.closeWindow("LoginUI")},fail:function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){switch(n.label){case 0:return a.Logger.info("\u83b7\u53d6wx\u7528\u6237\u5931\u8d25---\u8f6c\u5230\u6388\u6743\u754c\u9762-"),t=null,r.UIManager.Instance.findWindow("LoginUI")?[3,2]:[4,r.UIManager.Instance.openWindow("LoginUI")];case 1:n.sent(),n.label=2;case 2:return(t=r.UIManager.Instance.findComponent("LoginUI"))?(t.loginHandel=e,t.showWxInfoButton(),[2]):[2]}})})}}),[3,4]):[3,1];case 1:return a.Logger.info("==\u8f6c\u5230\u6388\u6743\u754c\u9762==="),o=null,r.UIManager.Instance.findWindow("LoginUI")?[3,3]:[4,r.UIManager.Instance.openWindow("LoginUI")];case 2:i.sent(),i.label=3;case 3:if(!(o=r.UIManager.Instance.findComponent("LoginUI")))return[2];o.loginHandel=e,o.showWxInfoButton(),i.label=4;case 4:return[2]}})})}})},e.prototype.request=function(e){if(this.checkWx())return a.Logger.info(e.url),a.Logger.info("POSTDATA"+JSON.stringify(e.data)),this.wx.request({url:e.url,data:e.data,header:{"Content-Type":"application/json"},method:"POST",success:function(e){a.Logger.info(e)},fail:function(t){e.fail(t),a.Logger.info("err"+JSON.stringify(t))}})},e.prototype.share=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return e?(a.Logger.info("\u5fae\u4fe1\u5206\u4eab:",e),this.checkWx()?(this.wx.shareAppMessage({title:e.title,imageUrl:e.imageUrl,query:e.query,success:function(e){a.Logger.info("onShare success:"+JSON.stringify(e)),t&&t.success(e)},fail:function(e){a.Logger.info("onShare fail:"+JSON.stringify(e)),t.fail(e)},complete:function(e){a.Logger.info("onShare complete:"+JSON.stringify(e)),t.complete(e)}}),[2]):[2]):[2]})})},e.prototype.changeBannerAd=function(e){if(this.checkWx()&&this.wx.createBannerAd){var t=this;t.bannerAd&&t.bannerAd.destroy(),t.wx.getSystemInfo({success:function(e){"getSystemInfo:ok"==e.errMsg&&(a.Logger.info("bannerAd  Add"),function(e,n){var o=100*e/350;t.bannerAd=t.wx.createBannerAd({adUnitId:"adunit-126db2a263dfa9f7",style:{left:(e-350)/2,top:n-o,width:350}}),t.bannerAd.onResize(function(o){t.bannerAd.style.width=t.bannerAd.style.realWidth,t.bannerAd.style.height=t.bannerAd.style.realHeight,t.bannerAd.style.left=(e-t.bannerAd.style.width)/2,t.bannerAd.style.top=n-t.bannerAd.style.height})}(e.screenWidth,e.screenHeight))}})}},e.prototype.createRewardedVideoAd=function(e){if(a.Logger.info("\u5e7f\u544a\u89c6\u5c4f"),this.checkWx()&&this.wx.createRewardedVideoAd){var t=this;t.rewardedVideoAd||(t.rewardedVideoAd=this.wx.createRewardedVideoAd({adUnitId:"adunit-f60366d91f6e4092"})),t.rewardedVideoAd&&(t.rewardedVideoAd.show().then(function(){a.Logger.info("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u663e\u793a")}).catch(function(e){a.Logger.info("\u62c9\u53d6\u5931\u8d25\uff0c\u91cd\u65b0\u62c9\u53d6"),t.rewardedVideoAd.load().then(function(){return t.rewardedVideoAd.show()})}),t.rewardedVideoAd.onLoad(function(){a.Logger.info("\u6fc0\u52b1\u89c6\u9891 \u5e7f\u544a\u52a0\u8f7d\u6210\u529f"),e&&e.onLoad()}),t.rewardedVideoAd.onClose(function(t){t&&t.isEnded||void 0===t?(a.Logger.info(" \u6b63\u5e38\u64ad\u653e\u7ed3\u675f\uff0c\u53ef\u4ee5\u4e0b\u53d1\u6e38\u620f\u5956\u52b1"),e&&e.onClose(!0)):(a.Logger.info(" \u64ad\u653e\u4e2d\u9014\u9000\u51fa\uff0c\u4e0d\u4e0b\u53d1\u6e38\u620f\u5956\u52b1"),e&&e.onClose(!1))}))}},e.prototype.downLoad=function(e){e&&e.urls&&(this.downLoadConfig.total=e.urls.length,this.downLoadConfig.process=0,this.downLoadNext(e))},e.prototype.downLoadNext=function(e){var t=this,n=e.urls[this.downLoadConfig.process];this.downLoadOne(n,function(){t.downLoadConfig.process++,e.process(t.downLoadConfig.process,t.downLoadConfig.total),t.downLoadConfig.process<t.downLoadConfig.total?t.downLoadNext(e):e.success("\u4e0b\u8f7d\u5b8c\u6210")})},e.prototype.downLoadOne=function(e,t){var n=this;this.wx.downloadFile({url:o.GameConfig.downLoadUrl+e,success:function(o){var i=[];(i=e.split("/")).splice(i.length-1,1),new Promise(function(e,t){var o="";i.forEach(function(e){o+=e+"/",n.wx.getFileSystemManager().mkdir({dirPath:n.wx.env.USER_DATA_PATH+"/"+o,success:function(){},fail:function(e){}})}),e("\u521b\u5efa\u6587\u4ef6\u7684\u6240\u6709\u7236\u76ee\u5f55\u6210\u529f")}).then(function(){n.wx.getFileSystemManager().saveFile({tempFilePath:o.tempFilePath,filePath:n.wx.env.USER_DATA_PATH+"/"+e,success:function(e){a.Logger.info("saveFile success",e),t()},fail:function(e){a.Logger.info("saveFile fail:",e)}})})},fail:function(e){a.Logger.info("wx downLoad fail:",e)}})},e}();n.WXManager=c,cc._RF.pop()},{"../../Define/GameConfig":"GameConfig","../../manager/UIManager":"UIManager","../../manager/UserManager":"UserManager","../Logger":"Logger"}]},{},["BuffCsv","EffectCsv","SkillCsv","SkillEffectCsv","c_propCsv","caseCsv","equipCsv","itemCsv","t_itemCsv","weaponCsv","BagType","CommonParam","ErrorLang","GameConfig","RankInfo","UserType","Util","Clisson","FightLayer","FightLogic","FightManager","Fighter","FighterFactor","Skill","TeXiao","TeXiaoFactor","nearTip","Helloworld","ItemBase","LocalNode","BagPacket","HttpHandel","MsgPacket","HostAdress","INetSocket","NetSocket","NetUtil","CsvBase","HashMap","Help","Load","Logger","ReadCsvConfig","Shake","SingletonFactory","UpdateObj","ShaderComponent","ShaderLab","ShaderManager","ShaderMaterial","displaywxsub","wxApi","AudioManager","BagManager","HangManager","LoadManager","RankManager","UIManager","UserManager","GameNetwork","GameProto","BaseUI","FreeGet","FriendCare","FriendCriticism","GameEnd","HangLingQu","HangUp","LoginUI","MainUI","PropShop","Recharge","Setting","TestUI","Toast","combatrank","diamshop","everydayrank","BackGround","RankView","RankView_Combat","TopUI","rankaward","rank"]);